<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Usage</title>
	<meta name='Generator' content='Zim 0.69'>
	<style type='text/css'>
		a          { color: #690303; text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #690303; margin-bottom: 0 }
		h2         { color: #690303; margin-bottom: 0 }
		h3         { color: #690303; margin-bottom: 0 }
		h4         { color: #690303; margin-bottom: 0 }
		h5         { color: #690303; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */
	</style>
</head>
<body>

<!-- Wiki content -->

	<img src="https://storage.googleapis.com/stiles-images/StilesLogo.png" alt="Stiles Logo" />
	<h1>Usage</h1>

<p>
Created Sunday 03 March 2019
</p>

<p>
Used for DASH Videos
</p>

<p>
Located in $HOME/bin/bento4
</p>

<p>
Preparing the input files<br>
To create DASH MP4 content, you need to start with fragmented MP4 files. The input files you will be working with may or may not already be in fragmented MP4 form. Ideally, your encode will already produce MP4 files that way.<br>
The command line tool mp4info can tell you if an MP4 file is fragmented or not: here’s an example of what you will see in the Movie: part of the mp4info output for a non-fragmented MP4 file (the line fragments: no)
</p>

<p>
Movie:<br>
<div style='padding-left: 30pt'>
duration:   147188 ms<br>
time scale: 2997<br>
fragments:  no
</div>
</p>

<p>
Found 2 Tracks<br>
If you have non-fragmented MP4 files, you can use the mp4fragment tool to fragment them.
</p>

<p>
Example
</p>

<p>
mp4fragment video.mp4 video-fragmented.mp4<br>
Dealing with ISMV and ISMA input files<br>
ISMV and ISMA files are basically fragmented MP4 files, and as such can be used as input to mp4dash. However, most legacy tools (encoder and packagers) that produce ISMV and ISMA files generate fragmented MP4 files that lack a tfdt timestamp box. While these files appear to be normal fragmented MP4 files, the lack of tfdt renders those media files unsuitable for playback with many DASH clients, including most HTML5 based clients.<br>
If you have such files, you can fix this problem by refragmenting your ISMV and ISMA files into compliant fragmented MP4 files, using the mp4fragment tool.
</p>

<p>
Example
</p>

<p>
mp4fragment video.ismv video.mp4<br>
This should print something like
</p>

<p>
NOTICE: file is already fragmented, it will be re-fragmented <br>
found regular I-frame interval: 1 frames (at 25.000 frames per second)<br>
You can then use the re-fragmented files as input to mp4dash.
</p>

<p>
Tip<br>
You can tell whether your fragmented input file has a tfdt box or not by using mp4dump.<br>
A file with tfdt will show entries like this:
</p>

<p>
[moof] size=8+816<br>
  [mfhd] size=12+4<br>
<div style='padding-left: 30pt'>
sequence number = 490
</div>
  [traf] size=8+792<br>
<div style='padding-left: 30pt'>
[tfhd] size=12+4, flags=20000<br>
  track ID = 2<br>
[tfdt] size=12+8, version=1<br>
  base media decode time = 32281600<br>
[trun] size=12+744, flags=301<br>
  sample count = 92<br>
  data offset = 832
</div>
with a tfdt box as a child of the traf container box
</p>

<p>
Generating a DASH presentation<br>
Once you have fragmented MP4 files to work with as input, you can generate a DASH presentation, including an MPD and media files or media segments. For single-bitrate streaming, a single MP4 file is required. For multi-bitrate streaming, you will need a set of MP4 files that have been encoded with closed GOPs (Group Of Pictures) with equal durations. Also, the audio tracks in all the files should be encoded with the same parameters. Once you have your input files, you can use the mp4dash tool to automatically generate the DASH MPD and optionally split the MP4 file into individual file segments.
</p>

<p>
Simple examples<br>
Single MP4 input file
</p>

<p>
mp4dash video.mp4<br>
Multi-bitrate set of MP4 files
</p>

<p>
mp4dash video_1000.mp4 video_2000.mp4 video_3000.mp4<br>
Advanced usage<br>
Multi-language and stream selection<br>
By default, mp4dash will create an output that contains all the audio tracks found in its input(s). It is possible to limit the selected tracks by using input stream selectors. A stream selector is specified as a prefix before an input file path, enclosed between square brackets. The selector syntax is [&lt;property&gt;=&lt;value&gt;], where &lt;property&gt; can be type, track, or language. When the property name is type, the value can be audio to select only the audio track(s) from the input, or video for the video track. When the property name is track, the value is the ID of the track to select (could be audio or video). When the property name is language the value is an audio language code (2 or 3 letter code as defined by the DASH specification – IETF RFC 5646). It is possible to combine the language selector with a type selector, by separating the two by a comma (ex: [type=audio,language=fr]. If the language selector is used by itself without a type selector, the video track as well as the matching audio track will be selected.
</p>

<p>
Examples:<br>
Select the French audio track and the video track from video.mp4:
</p>

<p>
mp4dash [language=fr]video.mp4<br>
Select the French audio track from video1.mp4 and the video track from video2.mp4:
</p>

<p>
mp4dash [type=audio,language=fr]video1.mp4 [type=video]video2.mp4<br>
Select track ID 3 from video1.mp4 and all tracks from video2.mp4:
</p>

<p>
mp4dash [track=3]video1.mp4 video2.mp4<br>
Select the track with ‘undefined’ language from video1.mp4 and remap the language to ‘fr’
</p>

<p>
mp4dash --language-map=und:fr [language=und]video1.mp4<br>
Using the --verbose option may be useful when debugging language selection options
</p>

<p>
Encryption and DRM<br>
MPEG DASH streams can be encrypted, and played on clients that have a DRM-enabled DASH player.<br>
Visit the MPEG DASH Encryption &amp; DRM page for details.
</p>

<p>
Serving DASH Streams<br>
By default, mp4dash produces an output that can be served by any regular HTTP server. In order to make this possible, each one of the media segments and the init segments are stored in separate files. The MPD then refers to relative URLs for those files. Care should be taken to configure the HTTP server to return the correct Content-Type for the MPD document and segment files. The MPD document (named stream.mpd by default by the mp4dash tool) should be served with Content-Type: application/dash+xml and the init and media segments should be served with a Content-Type: video/mp4
</p>

<p>
Serving DASH without splitting segments<br>
With special support from the server, it is possible to serve DASH streams without splitting the segments into individual files. This is achieved by having a server-side module that can virtualize URLs, so as to be able to expose each segment as an separate URL, mapping it back to a byte range in a source file when requests are made. MPEG does not specify a common standard for such URL virtualization. Each server that supports this model is free do do it any way it chooses. For example, the Microsoft IIS server can be used with a IIS Media Services extension for Smooth Streaming to deliver MPEG DASH streams. More details can be found on the Serving MPEG DASH with Microsoft IIS page. Another useful way to do the same thing is to use the open-source Hippo Media Server package, which knows how to virtualize URLs for MPEG DASH and Smooth Streaming.<br>
The --hippo option of mp4dash is used to generate the server-side manifest needed by the Hippo Media Server.
</p>

<p>
2 COMMENTS ON “MPEG DASH”<br>
Pingback: How to encode Multi-bitrate videos in MPEG-DASH for MSE based media players (2/2) Streamroot Blog
</p>

<p>
Pingback: How to encode multi-bitrate videos in MPEG-DASH for MSE based media players | TDNGAN
</p>

<br>
<br>

<p>
Usage: mp4dash [options] &lt;media-file&gt; [&lt;media-file&gt; ...]
</p>

<p>
Each &lt;media-file&gt; is the path to a fragmented MP4 file, optionally prefixed<br>
with a stream selector delimited by [ and ]. The same input MP4 file may be<br>
repeated, provided that the stream selector prefixes select different streams.<br>
Version 1.6.0 r607
</p>

<p>
Options:<br>
  -h, --help            show this help message and exit<br>
  -v, --verbose         Be verbose<br>
  -d, --debug           Print out debugging information<br>
  -o &lt;output-dir&gt;, --output-dir=&lt;output-dir&gt;<br>
<div style='padding-left: 180pt'>
Output directory
</div>
  -f, --force           Allow output to an existing directory<br>
  --mpd-name=&lt;filename&gt;<br>
<div style='padding-left: 180pt'>
MPD file name
</div>
  --profiles=&lt;profiles&gt;<br>
<div style='padding-left: 180pt'>
Comma-separated list of one or more profile(s).<br>
Complete profile names can be used, or profile aliases<br>
('live'='urn:mpeg:dash:profile:isoff-live:2011', 'on-<br>
demand'='urn:mpeg:dash:profile:isoff-on-demand:2011',<br>
'hbbtv-1.5='urn:hbbtv:dash:profile:isoff-live:2012')
</div>
  --no-media            Do not output media files (MPD/Manifests only)<br>
  --rename-media        Use a file name pattern instead of the base name of<br>
<div style='padding-left: 180pt'>
input files for output media files.
</div>
  --media-prefix=&lt;prefix&gt;<br>
<div style='padding-left: 180pt'>
Use this prefix for prefixed media file names (instead<br>
of the default prefix "media")
</div>
  --init-segment=&lt;filename&gt;<br>
<div style='padding-left: 180pt'>
Initialization segment name
</div>
  --no-split            Do not split the file into individual segment files<br>
  --use-segment-list    Use segment lists instead of segment templates<br>
  --use-segment-template-number-padding<br>
<div style='padding-left: 180pt'>
Use padded numbers in segment URL/filename templates
</div>
  --use-segment-timeline<br>
<div style='padding-left: 180pt'>
Use segment timelines (necessary if segment durations<br>
vary)
</div>
  --min-buffer-time=&lt;duration&gt;<br>
<div style='padding-left: 180pt'>
Minimum buffer time (in seconds)
</div>
  --max-playout-rate=&lt;strategy&gt;<br>
<div style='padding-left: 180pt'>
Max Playout Rate setting strategy for trick-play<br>
support. Supported strategies: lowest:X
</div>
  --language-map=&lt;lang_from&gt;:&lt;lang_to&gt;[,...]<br>
<div style='padding-left: 180pt'>
Remap language code &lt;lang_from&gt; to &lt;lang_to&gt;. Multiple<br>
mappings can be specified, separated by ','
</div>
  --always-output-lang  Always output an <span class="zim-tag">@lang</span> attribute for audio tracks even<br>
<div style='padding-left: 180pt'>
when the language is undefined
</div>
  --subtitles           Enable Subtitles<br>
  --group=&lt;group-definition&gt;<br>
<div style='padding-left: 180pt'>
Specify the attributes of a group. This option may be<br>
used multiple times, once per group
</div>
  --smooth              Produce an output compatible with Smooth Streaming<br>
  --smooth-client-manifest-name=&lt;filename&gt;<br>
<div style='padding-left: 180pt'>
Smooth Streaming Client Manifest file name
</div>
  --smooth-server-manifest-name=&lt;filename&gt;<br>
<div style='padding-left: 180pt'>
Smooth Streaming Server Manifest file name
</div>
  --smooth-h264-fourcc=&lt;fourcc&gt;<br>
<div style='padding-left: 180pt'>
Smooth Streaming FourCC value for H.264 video<br>
(default=AVC1)
</div>
  --hippo               Produce an output compatible with the Hippo Media<br>
<div style='padding-left: 180pt'>
Server
</div>
  --hippo-server-manifest-name=&lt;filename&gt;<br>
<div style='padding-left: 180pt'>
Hippo Media Server Manifest file name
</div>
  --encryption-key=&lt;key-spec&gt;<br>
<div style='padding-left: 180pt'>
Encrypt all audio and video tracks with MPEG CENC<br>
(AES-128), where &lt;key-spec&gt; specifies the KID and Key<br>
to use, using one of the following ways: (1)<br>
&lt;KID&gt;:&lt;key&gt; with &lt;KID&gt; as a 32-character hex string<br>
and &lt;key&gt; either a 32-character hex string or the<br>
character '#' followed by a base64-encoded key seed;<br>
or (2) @&lt;key-locator&gt; where &lt;key-locator&gt; is an<br>
expression of one of the supported key locator schemes<br>
(see online docs for details)
</div>
  --encryption-args=&lt;cmdline-arguments&gt;<br>
<div style='padding-left: 180pt'>
Pass additional command line arguments to mp4encrypt<br>
(separated by spaces)
</div>
  --use-compat-namespace<br>
<div style='padding-left: 180pt'>
Use the original DASH MPD namespace as it was<br>
specified in the first published specification
</div>
  --marlin              Add Marlin signaling to the MPD (requires an encrypted<br>
<div style='padding-left: 180pt'>
input, or the --encryption-key option)
</div>
  --marlin-add-pssh     Add an (optional) Marlin 'pssh' box in the init<br>
<div style='padding-left: 180pt'>
segment(s)
</div>
  --playready           Add PlayReady signaling to the MPD (requires an<br>
<div style='padding-left: 180pt'>
encrypted input, or the --encryption-key option)
</div>
  --playready-header=&lt;playready-header&gt;<br>
<div style='padding-left: 180pt'>
Add a PlayReady PRO element in the MPD and a PlayReady<br>
PSSH box in the init segments. The use of this option<br>
implies the --playready option.The &lt;playready-header&gt;<br>
argument can be either: (1) the character '@' followed<br>
by the name of a file containing a PlayReady XML<br>
Rights Management Header (&lt;WRMHEADER&gt;) or a PlayReady<br>
Header Object (PRO) in binary form,  or (2) the<br>
character '#' followed by a PlayReady Header Object<br>
encoded in Base64, or (3) one or more &lt;name&gt;:&lt;value&gt;<br>
pair(s) (separated by '#' if more than one) specifying<br>
fields of a PlayReady Header Object (field names<br>
include LA_URL, LUI_URL and DS_ID)
</div>
  --playready-add-pssh  Store the PlayReady header in a 'pssh' box in the init<br>
<div style='padding-left: 180pt'>
segment(s) [deprecated: this is now implicitly on by<br>
default when the --playready or --playready-header<br>
option is used]
</div>
  --playready-no-pssh   Do not store the PlayReady header in a 'pssh' box in<br>
<div style='padding-left: 180pt'>
the init segment(s)
</div>
  --widevine            Add Widevine signaling to the MPD (requires an<br>
<div style='padding-left: 180pt'>
encrypted input, or the --encryption-key option)
</div>
  --widevine-header=&lt;widevine-header&gt;<br>
<div style='padding-left: 180pt'>
Add a Widevine entry in the MPD, and a Widevine PSSH<br>
box in the init segments. The use of this option<br>
implies the --widevine option. The &lt;widevine-header&gt;<br>
argument can be either: (1) the character '#' followed<br>
by a Widevine header encoded in Base64, or (2) one or<br>
more &lt;name&gt;:&lt;value&gt; pair(s) (separated by '#' if more<br>
than one) specifying fields of a Widevine header<br>
(field names include 'provider' [string], 'content_id'<br>
[byte array in hex], 'policy' [string])
</div>
  --primetime           Add Primetime signaling to the MPD (requires an<br>
<div style='padding-left: 180pt'>
encrypted input, or the --encryption-key option)
</div>
  --primetime-metadata=&lt;primetime-metadata&gt;<br>
<div style='padding-left: 180pt'>
Add Primetime metadata in a PSSH box in the init<br>
segments. The use of this option implies the<br>
--primetime option. The &lt;primetime-data&gt; argument can<br>
be either: (1) the character '@' followed by the name<br>
of a file containing the Primetime Metadata to use, or<br>
(2) the character '#' followed by the Primetime<br>
Metadata encoded in Base64
</div>
  --exec-dir=&lt;exec_dir&gt;<br>
<div style='padding-left: 180pt'>
Directory where the Bento4 executables are located
</div>
</p>

<p>
Command line options detailed documentation<br>
media files arguments<br>
mp4dash takes as input one or more media files. Each media file is the path to a fragmented MP4 file that will be used as input. Each media file name may be preceded by a selector, delimited by [ and ].<br>
When no selector is used, all the audio tracks and the first video track of each input file will be used. If more than one track with the same language is found (which is common when multiple input files are used in a multi-bitrate scenario, and that each input has its own copy of the shared audio track), only the first one will be used (it is assumed that they are all copies of each other).<br>
The syntax for a selector is a list of one or more specifiers, separated by commas (,).<br>
A specifier may be a filter, in which case it has the form name=value, or it may be a “setter”, in which case it has the form +name=value (it starts with a + character).<br>
Filters and setters can be combined in a single selector (ex: [track=3])
</p>

<p>
filters<br>
A filter selects a subset or one or more tracks from an input file. Supported filters are: type, track, and language. When the filter name is type, the value can be audio to select only the audio track(s) from the input, or video for the video track. When the filter name is track, the value is the ID of the track to select (could be audio or video). When the filter name is language the value is an audio language code (2 or 3 letter code as defined by the DASH specification). It is possible to combine the language selector with a type selector, by separating the two by a comma (ex: [type=audio,language=fr]. If the language selector is used by itself without a type selector, the video track as well as the matching audio track will be selected.
</p>

<p>
setters<br>
A setter sets a property or attribute for the track(s) selected by the filter (or all the tracks if the selector doesn’t include a filter). This may be used to set or override a track’s language, or set DASH-specific attributes like Role, Rating or Viewpoint. The name of a setter always starts with a + character.<br>
NOTE there are currently no setters defined. This syntax is reserved for future use.
</p>

<p>
command line arguments<br>
-h, --help<br>
Print out a short summary of the command line options and arguments usage.
</p>

<p>
-v, --verbose<br>
Produce a more verbose output. Useful for debugging.
</p>

<p>
-o &lt;output-dir&gt;, --output-dir=&lt;output-dir&gt;<br>
Specify the output directory where the files will be written. If omitted, the output directory is named output.
</p>

<p>
-f, --force<br>
Allow output to an existing directory.
</p>

<p>
--mpd-name=&lt;filename&gt;<br>
Specify the name of the MPD file (default: stream.mpd)
</p>

<p>
--profiles=&lt;profiles&gt;<br>
Comma-separated list of one or more profile(s). Complete profile names can be used, or profile aliases.<br>
Profile aliaes include:<br>
<ul>
<li>live as an alias for urn:mpeg:dash:profile:isoff-live:2011</li>
<li>on-demand as an alias for urn:mpeg:dash:profile:isoff-on-demand:2011</li>
<li>hbbtv-1.5 as an alias for urn:hbbtv:dash:profile:isoff-live:2012</li>
</ul>
</p>

<p>
If no profiles are specified, the default is to use the single profile urn:mpeg:dash:profile:isoff-live:2011.
</p>

<p>
--no-media<br>
Do not output media files (MPD/Manifests only). This may be useful if you want to re-generate an MPD without re-processing the media files.
</p>

<p>
--rename-media<br>
Use a file name pattern instead of the base name of input files for output media files (this option is only relevant when also using the --no-split option)<br>
For example, running:<br>
mp4dash --no-split video.mp4<br>
will produce an output directory with the files: stream.mpd and video.mp4<br>
Whereas with the --rename-media option:<br>
mp4dash --no-split --rename-media video.mp4<br>
will produce an output directory with the files: stream.mpd and media-01.mp4 (the input file name video.mp4 is renamed to media-XX.mp4)
</p>

<p>
--media-prefix=&lt;prefix&gt;<br>
When combined with the --rename-media option, use this prefix for prefixed media file names (instead of the default prefix media)<br>
For example, mp4dash --no-split --rename-media --media-prefix foobar video.mp4<br>
will produce an output directory with the files: stream.mpd and foobar-01.mp4 (the input file name video.mp4 is renamed to foobar-XX.mp4)
</p>

<p>
--init-segment=&lt;filename&gt;<br>
Specify an Initialization Segment name instead of the default ('init.mp4)
</p>

<p>
--no-split<br>
Do not split the file into individual segment files. This option produces a single output file for each input file. Since with most MPEG DASH MPDs, each media segment has its own URL, the use of this option requires that the HTTP server be able to “virtualize” URLs (i.e map segment URLs to byte ranges within the stored, non-split, media file)
</p>

<p>
--use-segment-list<br>
Use segment lists instead of segment templates.<br>
For DASH presentation that follow the isoff-live profile (the defaut profile used by mp4dash), the default mode is to use a shared template for the segment URL. When using --use-segment-list, an explicit list of all segments and their respective URLs will be used in the MPD.
</p>

<p>
--use-segment-template-number-padding<br>
Use padded numbers in segment URL/filename templates. For example, with padding, segment 1 would be named seg-0001.m4f instead of seg-1.m4f.
</p>

<p>
--use-segment-timeline<br>
Use segment timelines.<br>
For DASH presentation that follow the isoff-live profile (the defaut profile used by mp4dash), the default mode is to use a shared template for the segment information. This is efficient, as it keeps the size of the MPD small. But when the input media where the fragments/segments are not all of the same duration, this does not work, since when using templates, there is a single duration value shared by all segments. So in that case, the --use-segment-list option tells mp4dash to use an explicit segment list where each segment has its own duration.
</p>

<p>
--min-buffer-time=&lt;duration&gt;<br>
Minimum buffer time (in seconds).<br>
By default, mp4dash automatically computes the minimum buffer time. Use this option to override the default.
</p>

<p>
--max-playout-rate=&lt;strategy&gt;<br>
Max Playout Rate setting strategy for trick-play support. Supported strategies: lowest:X
</p>

<p>
--language-map=&lt;lang_from&gt;:&lt;lang_to&gt;[,...]<br>
Remap language code &lt;lang_from&gt; to &lt;lang_to&gt;. Multiple mappings can be specified, separated by “,”
</p>

<p>
--always-output-lang<br>
Always output an <span class="zim-tag">@lang</span> attribute for audio tracks even when the language is undefined.<br>
This option is automatically enabled when the hbbtv-1.5 profile is part of the profiles list.
</p>

<p>
--subtitles<br>
Enable subtitles.
</p>

<p>
-g, --group<br>
This option may be used to define the attributes and properties for a media group. Each input media belongs to one or more groups. By default, all the audio tracks belong to the group named audio, all the video tracks belong to the group named video and all the subtitle tracks belong to the group named subtitles. In addition, an audio track with language xxx belong to the group named audio/xxx. For instance, an audio track with an undefined language (language code und) will belong to the group audio/und.<br>
The syntax for a group definition is: group_name:group_attributes, where group_attributes is one or more {attribute_namespace}attribute_name=attribute_value attributes, separated by ,.<br>
To set the DASH Role, Accessibility, Rating or Viewpoint attributes, use the attribute name, prefixed with its namespace (schemeIdUri in the DASH specification) delimited by curly braces ({ and }). For the Role attribute, the namespace may be omitted, in which case it will default to urn:mpeg:dash:role:2011. The attribute name may be written as it appears in the DASH specification, or in lowercase for convenience.<br>
For example, role=main sets the Role attribute for a group, and {urn:mpeg:dash:viewpoint:2011}viewpoint sets the Viewpoint attribute.
</p>

<p>
More than one --group option may be used, each with a different group name.
</p>

<p>
Examples
</p>

<p>
mp4dash --group audio:role=main --group video:{urn:mpeg:dash:role:2011}viewpoint=vp1 video.mp4<br>
mp4dash --group audio:role=main --group video:{urn:mpeg:dash:role:2011}viewpoint=vp1 video.mp4<br>
mp4dash --group audio:role=main --group video:{urn:scte:dash:cc:cea-608:2015}accessibility=eng,{urn:mpeg:dash:role:2011}viewpoint=vp2 video.mp4<br>
--smooth<br>
Produce an output compatible with Microsoft Smooth Streaming.
</p>

<p>
--smooth-client-manifest-name=&lt;filename&gt;<br>
Smooth Streaming Client Manifest file name. (default=stream.ismc)
</p>

<p>
--smooth-server-manifest-name=&lt;filename&gt;<br>
Smooth Streaming Server Manifest file name. (default=stream.ism)
</p>

<p>
--smooth-h264-fourcc=&lt;fourcc&gt;<br>
Smooth Streaming FourCC value for H.264 video. (default=AVC1)
</p>

<p>
--hippo<br>
Produce an output compatible with the Hippo Media Server.
</p>

<p>
--hippo-server-manifest-name=&lt;filename&gt;<br>
Hippo Media Server Manifest file name.
</p>

<p>
--encryption-key=&lt;key-spec&gt;<br>
Encrypt all audio and video tracks with MPEG CENC (Common Encryption, with AES-128).<br>
&lt;key-spec&gt; specifies the KID and Key to use, using one of the following ways:<br>
<ol type="1" start="1">
<li>&lt;KID&gt;:&lt;key&gt; with &lt;KID&gt; as a 32-character hex string and &lt;key&gt; either a 32-character hex string or the character # followed by a base64-encoded key seed.</li>
<li>@&lt;key-locator&gt; where &lt;key-locator&gt; is an expression of one of the supported key locator schemes.</li>
</ol>
</p>

<p>
Example<br>
--encryption-key=000102030405060708090a0b0c0d0e0f:00112233445566778899aabbccddeeff
</p>

<p>
--encryption-args=&lt;cmdline-arguments&gt;<br>
Pass additional command line arguments to mp4encrypt (separated by spaces).<br>
This option can be used to precisely control certain options supported by mp4encrypt.
</p>

<p>
--use-compat-namespace<br>
Use the original DASH MPD namespace as it was specified in the first published specification.
</p>

<p>
--marlin<br>
Add Marlin signaling to the MPD (requires an encrypted input, or the --encryption-key option)
</p>

<p>
--marlin-add-pssh<br>
Add an (optional) Marlin ‘pssh’ box in the init segment(s)
</p>

<p>
--playready<br>
Add PlayReady signaling to the MPD (requires an encrypted input, or the --encryption-key option)
</p>

<p>
--playready-header=&lt;playready-header&gt;<br>
Add a PlayReady PRO element in the MPD and a PlayReady PSSH box in the init segments. The use of this option implies the --playready option.<br>
The &lt;playready-header&gt; argument can be either:<br>
<ol type="1" start="1">
<li>The character @ followed by the name of a file containing a PlayReady XML Rights Management Header (&lt;WRMHEADER&gt;) or a PlayReady Header Object (PRO) in binary form</li>
<li>The character #' followed by a PlayReady Header Object encoded in Base64</li>
<li>One or more &lt;name&gt;:&lt;value&gt; pair(s) (separated by # if more than one) specifying fields of a PlayReady Header Object (field names include LA_URL, LUI_URL and DS_ID)</li>
</ol>
</p>

<p>
Example: --playready-header=LA_URL=<a href="http://myplayreadyserver.com/license.asmx" title="http://myplayreadyserver.com/license.asmx" class="http">http://myplayreadyserver.com/license.asmx</a>
</p>

<p>
--playready-no-pssh<br>
Do not store the PlayReady header in a ‘pssh’ box in the init segment(s).
</p>

<p>
--widevine<br>
Add Widevine signaling to the MPD (requires an encrypted input, or the --encryption-key option)
</p>

<p>
--widevine-header=&lt;widevine-header&gt;<br>
Add a Widevine entry in the MPD, and a Widevine PSSH box in the init segments. The use of this option implies the --widevine option.<br>
The &lt;widevine-header&gt; argument can be:<br>
<ol type="1" start="1">
<li>The character # followed by a Widevine header encoded in Base64</li>
<li>One or more &lt;name&gt;:&lt;value&gt; pair(s) (separated by # if more than one) specifying fields of a Widevine header (field names include provider [string], content_id [byte array in hex], and policy [string])</li>
</ol>
</p>

<p>
Examples<br>
--widevine-header=provider:myprovidername#content_id:2a<br>
--widevine-header=#CAESEBycOU9s3lZopG92JeLT54EaDXdpZGV2aW5lX3Rlc3QiBAEjRWc=
</p>

<p>
--primetime<br>
Add Primetime DRM signaling to the MPD (requires an encrypted input, or the –encryption-key option)
</p>

<p>
--primetime-metadata=&lt;primetime-metadata&gt;<br>
Add Primetime metadata in a PSSH box in the init segments. The use of this option implies the --primetime option. The &lt;primetime-data&gt; argument can be:<br>
<ol type="1" start="1">
<li>The character @ followed by the name of a file containing the Primetime Metadata to use</li>
<li>The character # followed by the Primetime Metadata encoded in Base64</li>
</ol>
</p>

<p>
Example<br>
--<a href="mailto:primetime-metadata=@mymetadatafile.bin" title="primetime-metadata=@mymetadatafile.bin" class="mailto">primetime-metadata=@mymetadatafile.bin</a>
</p>

<p>
--exec-dir=&lt;exec_dir&gt;<br>
Directory where the Bento4 executables are located. This option may be needed when running this tool outside of its normal SDK distribution (running a custom build from source for example).
</p>


<!-- End wiki content -->

</body>

</html>
