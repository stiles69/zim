<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Rsync Manual</title>
	<meta name='Generator' content='Zim 0.69'>
	<style type='text/css'>
		a          { color: #690303; text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #690303; margin-bottom: 0 }
		h2         { color: #690303; margin-bottom: 0 }
		h3         { color: #690303; margin-bottom: 0 }
		h4         { color: #690303; margin-bottom: 0 }
		h5         { color: #690303; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */
	</style>
</head>
<body>

<!-- Wiki content -->

	<img src="https://storage.googleapis.com/stiles-images/StilesLogo.png" alt="Stiles Logo" />
	
<br>
<br>
<br>

<h1>Rsync Manual</h1>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<p>
Content-Type: text/x-zim-wiki Wiki-Format: zim 0.4
</p>

<br>
<br>

<p>
rsync(1)                                        rsync(1)
</p>

<br>
<br>

<p>
NAME
</p>

<p>
   rsync  -  a  fast,  versatile, remote (and local)<br>
   file-copying tool
</p>

<br>
<br>
<br>

<p>
SYNOPSIS
</p>

<p>
   Local:  rsync [OPTION...] SRC... [DEST]
</p>

<br>
<br>
<br>
<br>

<p>
   Access via remote shell:
</p>

<br>

<p>
 Pull: rsync [OPTION...] [USER@]HOST:SRC... [DEST]<br>
 Push: rsync [OPTION...] SRC... [USER@]HOST:DEST
</p>

<br>
<br>
<br>
<br>

<p>
   Access via rsync daemon:
</p>

<br>

<p>
 Pull: rsync [OPTION...] [USER@]HOST::SRC... [DEST]
</p>

<br>

<p>
   rsync [OPTION...] <a href="rsync://[USER@]HOST[:PORT]/SRC" title="rsync://[USER@]HOST[:PORT]/SRC" class="rsync">rsync://[USER@]HOST[:PORT]/SRC</a>... [DEST]
</p>

<br>

<p>
 Push: rsync [OPTION...] SRC... [USER@]HOST::DEST
</p>

<br>

<p>
   rsync [OPTION...] SRC... <a href="rsync://[USER@]HOST[:PORT]/DEST" title="rsync://[USER@]HOST[:PORT]/DEST" class="rsync">rsync://[USER@]HOST[:PORT]/DEST</a>
</p>

<br>
<br>
<br>
<br>

<p>
   Usages with just one SRC arg and no DEST arg will<br>
   list the source files instead of copying.
</p>

<br>
<br>
<br>

<p>
DESCRIPTION
</p>

<p>
   Rsync  is  a  fast  and extraordinarily versatile<br>
   file copying tool.  It can copy locally,  to/from<br>
   another  host over any remote shell, or to/from a<br>
   remote rsync daemon.  It offers a large number of<br>
   options that control every aspect of its behavior<br>
   and permit very flexible specification of the set<br>
   of  files  to  be  copied.   It is famous for its<br>
   delta-transfer  algorithm,  which   reduces   the<br>
   amount  of  data sent over the network by sending<br>
   only the differences between the source files and<br>
   the  existing files in the destination.  Rsync is<br>
   widely used for backups and mirroring and  as  an<br>
   improved copy command for everyday use.
</p>

<br>
<br>
<br>
<br>

<p>
   Rsync  finds  files  that  need to be transferred<br>
   using a "quick check" algorithm (by default) that<br>
   looks  for  files that have changed in size or in<br>
   last-modified time.  Any  changes  in  the  other<br>
   preserved  attributes  (as  requested by options)<br>
   are made on the destination  file  directly  when<br>
   the  quick  check  indicates that the file’s data<br>
   does not need to be updated.
</p>

<br>
<br>
<br>
<br>

<p>
   Some of the additional features of rsync are:
</p>

<br>
<br>
<br>
<br>

<p>
   o      support for copying links,  devices,  own‐
</p>

<br>

<p>
  ers, groups, and permissions
</p>

<br>
<br>
<br>
<br>

<p>
   o      exclude  and  exclude-from options similar
</p>

<br>

<p>
  to GNU tar
</p>

<br>
<br>
<br>
<br>

<p>
   o      a CVS exclude mode for ignoring  the  same
</p>

<br>

<p>
  files that CVS would ignore
</p>

<br>
<br>
<br>
<br>

<p>
   o      can  use  any  transparent  remote  shell,
</p>

<br>

<p>
  including ssh or rsh
</p>

<br>
<br>
<br>
<br>

<p>
   o      does not require super-user privileges
</p>

<br>
<br>
<br>
<br>

<p>
   o      pipelining of file transfers  to  minimize
</p>

<br>

<p>
  latency costs
</p>

<br>
<br>
<br>
<br>

<p>
   o      support  for  anonymous  or  authenticated
</p>

<br>

<p>
  rsync daemons (ideal for mirroring)
</p>

<br>
<br>
<br>

<p>
GENERAL
</p>

<p>
   Rsync copies files either to  or  from  a  remote<br>
   host, or locally on the current host (it does not<br>
   support copying files between two remote hosts).
</p>

<br>
<br>
<br>
<br>

<p>
   There are two different ways for rsync to contact<br>
   a  remote system: using a remote-shell program as<br>
   the transport (such as ssh or rsh) or  contacting<br>
   an   rsync   daemon   directly   via   TCP.   The<br>
   remote-shell  transport  is  used  whenever   the<br>
   source  or  destination  path  contains  a single<br>
   colon (:) separator after a  host  specification.<br>
   Contacting  an rsync daemon directly happens when<br>
   the source or destination path contains a  double<br>
   colon  (::) separator after a host specification,<br>
   OR when an rsync:// URL is  specified  (see  also<br>
   the    "USING   RSYNC-DAEMON   FEATURES   VIA   A<br>
   REMOTE-SHELL CONNECTION" section for an exception<br>
   to this latter rule).
</p>

<br>
<br>
<br>
<br>

<p>
   As  a  special  case,  if  a single source arg is<br>
   specified without a destination,  the  files  are<br>
   listed in an output format similar to "ls -l".
</p>

<br>
<br>
<br>
<br>

<p>
   As expected, if neither the source or destination<br>
   path specify  a  remote  host,  the  copy  occurs<br>
   locally (see also the --list-only option).
</p>

<br>
<br>
<br>
<br>

<p>
   Rsync  refers  to  the local side as the "client"<br>
   and the remote side as the "server".  Don’t  con‐<br>
   fuse "server" with an rsync daemon -- a daemon is<br>
   always a server, but a server  can  be  either  a<br>
   daemon or a remote-shell spawned process.
</p>

<br>
<br>
<br>

<p>
SETUP
</p>

<p>
   See  the  file  README  for installation instruc‐<br>
   tions.
</p>

<br>
<br>
<br>
<br>

<p>
   Once installed, you can use rsync to any  machine<br>
   that  you  can access via a remote shell (as well<br>
   as some that you can access using the rsync  dae‐<br>
   mon-mode protocol).  For remote transfers, a mod‐<br>
   ern rsync uses ssh for its communications, but it<br>
   may  have  been  configured  to  use  a different<br>
   remote shell by default, such as rsh or remsh.
</p>

<br>
<br>
<br>
<br>

<p>
   You can also specify any remote shell  you  like,<br>
   either by using the -e command line option, or by<br>
   setting the RSYNC_RSH environment variable.
</p>

<br>
<br>
<br>
<br>

<p>
   Note that rsync must be  installed  on  both  the<br>
   source and destination machines.
</p>

<br>
<br>
<br>

<p>
USAGE
</p>

<p>
   You  use  rsync  in the same way you use rcp. You<br>
   must specify a source and a destination,  one  of<br>
   which may be remote.
</p>

<br>
<br>
<br>
<br>

<p>
   Perhaps  the  best  way  to explain the syntax is<br>
   with some examples:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -t *.c foo:src/
</p>

<br>
<br>
<br>
<br>

<p>
   This would transfer all files matching  the  pat‐<br>
   tern *.c from the current directory to the direc‐<br>
   tory src on the machine foo. If any of the  files<br>
   already exist on the remote system then the rsync<br>
   remote-update protocol is used to update the file<br>
   by  sending  only  the  differences  in the data.<br>
   Note that the expansion of wildcards on the  com‐<br>
   mandline (*.c) into a list of files is handled by<br>
   the shell before it runs rsync and not  by  rsync<br>
   itself (exactly the same as all other posix-style<br>
   programs).
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -avz foo:src/bar /data/tmp
</p>

<br>
<br>
<br>
<br>

<p>
   This would recursively transfer  all  files  from<br>
   the directory src/bar on the machine foo into the<br>
   /data/tmp/bar directory on the local machine. The<br>
   files  are  transferred  in "archive" mode, which<br>
   ensures that symbolic links, devices, attributes,<br>
   permissions,  ownerships,  etc.  are preserved in<br>
   the transfer.  Additionally, compression will  be<br>
   used  to  reduce the size of data portions of the<br>
   transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -avz foo:src/bar/ /data/tmp
</p>

<br>
<br>
<br>
<br>

<p>
   A trailing  slash  on  the  source  changes  this<br>
   behavior  to  avoid creating an additional direc‐<br>
   tory level at the destination.  You can think  of<br>
   a  trailing  /  on  a source as meaning "copy the<br>
   contents of this directory" as opposed  to  "copy<br>
   the  directory  by  name",  but in both cases the<br>
   attributes of the containing directory are trans‐<br>
   ferred  to the containing directory on the desti‐<br>
   nation.  In other words, each  of  the  following<br>
   commands  copies  the  files  in  the  same  way,<br>
   including their  setting  of  the  attributes  of<br>
   /dest/foo:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -av /src/foo /dest<br>
  rsync -av /src/foo/ /dest/foo
</p>

<br>
<br>
<br>
<br>

<p>
   Note  also  that host and module references don’t<br>
   require a trailing slash to copy the contents  of<br>
   the  default  directory.   For  example,  both of<br>
   these copy the remote directory’s  contents  into<br>
   "/dest":
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -av host: /dest<br>
  rsync -av host::module /dest
</p>

<br>
<br>
<br>
<br>

<p>
   You  can also use rsync in local-only mode, where<br>
   both the source and destination don’t have a  ’:’<br>
   in  the  name.  In  this  case it behaves like an<br>
   improved copy command.
</p>

<br>
<br>
<br>
<br>

<p>
   Finally, you can list all the (listable)  modules<br>
   available from a particular rsync daemon by leav‐<br>
   ing off the module name:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync somehost.mydomain.com::
</p>

<br>
<br>
<br>
<br>

<p>
   See the following section for more details.
</p>

<br>
<br>
<br>

<p>
ADVANCED USAGE
</p>

<p>
   The syntax for requesting multiple files  from  a<br>
   remote  host  is  done  by  specifying additional<br>
   remote-host args in the same style as the  first,<br>
   or  with the hostname omitted.  For instance, all<br>
   these work:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -av host:file1 :file2 host:file{3,4}<br>
  /dest/<br>
  rsync      -av     host::modname/file{1,2}<br>
  host::modname/file3 /dest/<br>
  rsync   -av   host::modname/file1   ::mod‐<br>
  name/file{3,4}
</p>

<br>
<br>
<br>
<br>

<p>
   Older  versions  of  rsync  required using quoted<br>
   spaces in the SRC, like these examples:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync  -av  host:'dir1/file1   dir2/file2'<br>
  /dest<br>
  rsync    host::'modname/dir1/file1    mod‐<br>
  name/dir2/file2' /dest
</p>

<br>
<br>
<br>
<br>

<p>
   This word-splitting still works (by  default)  in<br>
   the  latest  rsync,  but is not as easy to use as<br>
   the first method.
</p>

<br>
<br>
<br>
<br>

<p>
   If you need to transfer a filename that  contains<br>
   whitespace,  you  can  either  specify the --pro‐<br>
   tect-args (-s) option, or you’ll need  to  escape<br>
   the  whitespace  in  a  way that the remote shell<br>
   will understand.  For instance:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -av host:'file\ name\ with\  spaces'<br>
  /dest
</p>

<br>
<br>
<br>

<p>
CONNECTING TO AN RSYNC DAEMON
</p>

<p>
   It is also possible to use rsync without a remote<br>
   shell as the transport.  In this  case  you  will<br>
   directly  connect to a remote rsync daemon, typi‐<br>
   cally  using  TCP  port  873.   (This   obviously<br>
   requires  the  daemon to be running on the remote<br>
   system, so refer to the STARTING AN RSYNC  DAEMON<br>
   TO  ACCEPT CONNECTIONS section below for informa‐<br>
   tion on that.)
</p>

<br>
<br>
<br>
<br>

<p>
   Using rsync in this way is the same as  using  it<br>
   with a remote shell except that:
</p>

<br>
<br>
<br>
<br>

<p>
   o      you  either  use a double colon :: instead
</p>

<br>

<p>
  of a single colon to separate the hostname<br>
  from the path, or you use an rsync:// URL.
</p>

<br>
<br>
<br>
<br>

<p>
   o      the first word of the "path" is actually a
</p>

<br>

<p>
  module name.
</p>

<br>
<br>
<br>
<br>

<p>
   o      the remote daemon may print a  message  of
</p>

<br>

<p>
  the day when you connect.
</p>

<br>
<br>
<br>
<br>

<p>
   o      if  you specify no path name on the remote
</p>

<br>

<p>
  daemon then the list of  accessible  paths<br>
  on the daemon will be shown.
</p>

<br>
<br>
<br>
<br>

<p>
   o      if you specify no local destination then a
</p>

<br>

<p>
  listing of  the  specified  files  on  the<br>
  remote daemon is provided.
</p>

<br>
<br>
<br>
<br>

<p>
   o      you   must  not  specify  the  --rsh  (-e)
</p>

<br>

<p>
  option.
</p>

<br>
<br>
<br>
<br>

<p>
   An example that copies all the files in a  remote<br>
   module named "src":
</p>

<br>
<br>
<br>
<br>

<p>
   rsync -av host::src /dest
</p>

<br>
<br>
<br>
<br>

<p>
   Some  modules  on  the  remote daemon may require<br>
   authentication. If so, you will receive  a  pass‐<br>
   word  prompt  when you connect. You can avoid the<br>
   password prompt by setting the environment  vari‐<br>
   able  RSYNC_PASSWORD  to the password you want to<br>
   use or using the --password-file option. This may<br>
   be useful when scripting rsync.
</p>

<br>
<br>
<br>
<br>

<p>
   WARNING:  On  some  systems environment variables<br>
   are visible to all users. On those systems  using<br>
   --password-file is recommended.
</p>

<br>
<br>
<br>
<br>

<p>
   You  may establish the connection via a web proxy<br>
   by setting the environment  variable  RSYNC_PROXY<br>
   to  a  hostname:port  pair  pointing  to your web<br>
   proxy.  Note that your web proxy’s  configuration<br>
   must support proxy connections to port 873.
</p>

<br>
<br>
<br>
<br>

<p>
   You  may also establish a daemon connection using<br>
   a program as a proxy by setting  the  environment<br>
   variable  RSYNC_CONNECT_PROG  to the commands you<br>
   wish to run in place of making  a  direct  socket<br>
   connection.   The  string  may contain the escape<br>
   "%H" to represent the hostname specified  in  the<br>
   rsync  command  (so use "%%" if you need a single<br>
   "%" in your string).  For example:
</p>

<br>
<br>
<br>
<br>

<p>
 export RSYNC_CONNECT_PROG='ssh proxyhost nc %H 873'<br>
 rsync -av targethost1::module/src/ /dest/<br>
 rsync -av rsync:://targethost2/module/src/ /dest/
</p>

<br>
<br>
<br>
<br>

<p>
   The command specified above uses ssh  to  run  nc<br>
   (netcat)  on a proxyhost, which forwards all data<br>
   to port 873 (the rsync daemon) on the  targethost<br>
   (%H).
</p>

<br>
<br>
<br>

<p>
USING  RSYNC-DAEMON  FEATURES VIA A REMOTE-SHELL CONNEC‐
</p>

<p>
   TION<br>
   It is sometimes useful to use various features of<br>
   an  rsync  daemon (such as named modules) without<br>
   actually allowing any new socket connections into<br>
   a  system (other than what is already required to<br>
   allow remote-shell access).  Rsync supports  con‐<br>
   necting  to  a host using a remote shell and then<br>
   spawning  a  single-use  "daemon"   server   that<br>
   expects  to  read its config file in the home dir<br>
   of the remote user.  This can be  useful  if  you<br>
   want  to  encrypt a daemon-style transfer’s data,<br>
   but since the daemon is started up fresh  by  the<br>
   remote  user, you may not be able to use features<br>
   such as chroot or change the uid used by the dae‐<br>
   mon.  (For another way to encrypt a daemon trans‐<br>
   fer, consider using ssh to tunnel a local port to<br>
   a  remote  machine  and  configure a normal rsync<br>
   daemon on that remote host to only allow  connec‐<br>
   tions from "localhost".)
</p>

<br>
<br>
<br>
<br>

<p>
   From  the  user’s  perspective, a daemon transfer<br>
   via a remote-shell  connection  uses  nearly  the<br>
   same command-line syntax as a normal rsync-daemon<br>
   transfer, with the only exception being that  you<br>
   must  explicitly  set the remote shell program on<br>
   the command-line with the  --rsh=COMMAND  option.<br>
   (Setting  the  RSYNC_RSH  in the environment will<br>
   not turn on this functionality.)  For example:
</p>

<br>
<br>
<br>
<br>

<p>
   rsync -av --rsh=ssh host::module /dest
</p>

<br>
<br>
<br>
<br>

<p>
   If you need to specify a  different  remote-shell<br>
   user, keep in mind that the user@ prefix in front<br>
   of the host is specifying  the  rsync-user  value<br>
   (for  a module that requires user-based authenti‐<br>
   cation).  This means that you must give  the  ’-l<br>
   user’   option   to   ssh   when  specifying  the<br>
   remote-shell, as in this example  that  uses  the<br>
   short version of the --rsh option:
</p>

<br>
<br>
<br>
<br>

<p>
   rsync -av -e "ssh -l ssh-user" rsync-user@host::module /dest
</p>

<br>
<br>
<br>
<br>

<p>
   The "ssh-user" will be used at the ssh level; the<br>
   "rsync-user" will be used to log-in to the  "mod‐<br>
   ule".
</p>

<br>
<br>
<br>

<p>
STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS
</p>

<p>
   In  order  to  connect  to  an  rsync daemon, the<br>
   remote system needs to have a daemon already run‐<br>
   ning  (or  it  needs to have configured something<br>
   like inetd to spawn an rsync daemon for  incoming<br>
   connections  on  a  particular  port).   For full<br>
   information on how to start a  daemon  that  will<br>
   handling  incoming  socket  connections,  see the<br>
   rsyncd.conf(5) man page --  that  is  the  config<br>
   file  for  the  daemon,  and it contains the full<br>
   details for how  to  run  the  daemon  (including<br>
   stand-alone and inetd configurations).
</p>

<br>
<br>
<br>
<br>

<p>
   If  you’re  using  one of the remote-shell trans‐<br>
   ports for the transfer, there is no need to manu‐<br>
   ally start an rsync daemon.
</p>

<br>
<br>
<br>

<p>
SORTED TRANSFER ORDER
</p>

<p>
   Rsync  always  sorts the specified filenames into<br>
   its internal transfer  list.   This  handles  the<br>
   merging  together  of the contents of identically<br>
   named directories, makes it easy to remove dupli‐<br>
   cate  filenames, and may confuse someone when the<br>
   files are transferred in a different  order  than<br>
   what was given on the command-line.
</p>

<br>
<br>
<br>
<br>

<p>
   If  you  need a particular file to be transferred<br>
   prior to another, either separate the files  into<br>
   different   rsync   calls,   or   consider  using<br>
   --delay-updates (which doesn’t affect the  sorted<br>
   transfer   order,   but   does   make  the  final<br>
   file-updating phase happen much more rapidly).
</p>

<br>
<br>
<br>

<p>
EXAMPLES
</p>

<p>
   Here are some examples of how I use rsync.
</p>

<br>
<br>
<br>
<br>

<p>
   To backup my wife’s home  directory,  which  con‐<br>
   sists  of large MS Word files and mail folders, I<br>
   use a cron job that runs
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -Cavz . arvidsjaur:backup
</p>

<br>
<br>
<br>
<br>

<p>
   each night over a PPP connection to  a  duplicate<br>
   directory on my machine "arvidsjaur".
</p>

<br>
<br>
<br>
<br>

<p>
   To  synchronize  my  samba source trees I use the<br>
   following Makefile targets:
</p>

<br>
<br>
<br>
<br>

<p>
   get:
</p>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
   rsync -avuzb --exclude '*~' samba:samba/ .
</p>

<br>

<p>
   put:
</p>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
   rsync -Cavuzb . samba:samba/
</p>

<br>

<p>
   sync: get put
</p>

<br>
<br>
<br>
<br>

<p>
   this allows me to sync with a  CVS  directory  at<br>
   the  other  end  of the connection. I then do CVS<br>
   operations on the remote machine, which  saves  a<br>
   lot of time as the remote CVS protocol isn’t very<br>
   efficient.
</p>

<br>
<br>
<br>
<br>

<p>
   I mirror a directory between my "old"  and  "new"<br>
   ftp sites with the command:
</p>

<br>
<br>
<br>
<br>

<p>
   rsync  -az  -e  ssh  --delete ~ftp/pub/samba nim‐<br>
   bus:"~ftp/pub/tridge"
</p>

<br>
<br>
<br>
<br>

<p>
   This is launched from cron every few hours.
</p>

<br>
<br>
<br>

<p>
OPTIONS SUMMARY
</p>

<p>
   Here is a short summary of the options  available<br>
   in  rsync.  Please refer to the detailed descrip‐<br>
   tion below for a complete description.
</p>

<br>
<br>
<br>
<br>

<p>
-v, --verbose               increase verbosity
</p>

<br>

<p>
--info=FLAGS            fine-grained informational verbosity<br>
--debug=FLAGS           fine-grained debug verbosity<br>
--msgs2stderr           special output handling for debugging
</p>

<br>

<p>
-q, --quiet                 suppress non-error messages
</p>

<br>

<p>
--no-motd               suppress daemon-mode MOTD (see caveat)
</p>

<br>

<p>
-c, --checksum              skip based on checksum, not mod-time &amp;amp; size<br>
-a, --archive               archive mode; equals -rlptgoD (no -H,-A,-X)
</p>

<br>

<p>
--no-OPTION             turn off an implied OPTION (e.g. --no-D)
</p>

<br>

<p>
-r, --recursive             recurse into directories<br>
-R, --relative              use relative path names
</p>

<br>

<p>
--no-implied-dirs       don't send implied dirs with --relative
</p>

<br>

<p>
-b, --backup                make backups (see --suffix &amp;amp; --backup-dir)
</p>

<br>

<p>
--backup-dir=DIR        make backups into hierarchy based in DIR<br>
--suffix=SUFFIX         backup suffix (default ~ w/o --backup-dir)
</p>

<br>

<p>
-u, --update                skip files that are newer on the receiver
</p>

<br>

<p>
--inplace               update destination files in-place<br>
--append                append data onto shorter files<br>
--append-verify         --append w/old data in file checksum
</p>

<br>

<p>
-d, --dirs                  transfer directories without recursing<br>
-l, --links                 copy symlinks as symlinks<br>
-L, --copy-links            transform symlink into referent file/dir
</p>

<br>

<p>
--copy-unsafe-links     only "unsafe" symlinks are transformed<br>
--safe-links            ignore symlinks that point outside the tree<br>
--munge-links           munge symlinks to make them safer
</p>

<br>

<p>
-k, --copy-dirlinks         transform symlink to dir into referent dir<br>
-K, --keep-dirlinks         treat symlinked dir on receiver as dir<br>
-H, --hard-links            preserve hard links<br>
-p, --perms                 preserve permissions<br>
-E, --executability         preserve executability
</p>

<br>

<p>
--chmod=CHMOD           affect file and/or directory permissions
</p>

<br>

<p>
-A, --acls                  preserve ACLs (implies -p)<br>
-X, --xattrs                preserve extended attributes<br>
-o, --owner                 preserve owner (super-user only)<br>
-g, --group                 preserve group
</p>

<br>

<p>
--devices               preserve device files (super-user only)<br>
--specials              preserve special files
</p>

<br>

<p>
-D                          same as --devices --specials<br>
-t, --times                 preserve modification times<br>
-O, --omit-dir-times        omit directories from --times<br>
-J, --omit-link-times       omit symlinks from --times
</p>

<br>

<p>
--super                 receiver attempts super-user activities<br>
--fake-super            store/recover privileged attrs using xattrs
</p>

<br>

<p>
-S, --sparse                handle sparse files efficiently
</p>

<br>

<p>
--preallocate           allocate dest files before writing
</p>

<br>

<p>
-n, --dry-run               perform a trial run with no changes made<br>
-W, --whole-file            copy files whole (w/o delta-xfer algorithm)<br>
-x, --one-file-system       don't cross filesystem boundaries<br>
-B, --block-size=SIZE       force a fixed checksum block-size<br>
-e, --rsh=COMMAND           specify the remote shell to use
</p>

<br>

<p>
--rsync-path=PROGRAM    specify the rsync to run on remote machine<br>
--existing              skip creating new files on receiver<br>
--ignore-existing       skip updating files that exist on receiver<br>
--remove-source-files   sender removes synchronized files (non-dir)<br>
--del                   an alias for --delete-during<br>
--delete                delete extraneous files from dest dirs<br>
--delete-before         receiver deletes before xfer, not during<br>
--delete-during         receiver deletes during the transfer<br>
--delete-delay          find deletions during, delete after<br>
--delete-after          receiver deletes after transfer, not during<br>
--delete-excluded       also delete excluded files from dest dirs<br>
--ignore-missing-args   ignore missing source args without error<br>
--delete-missing-args   delete missing source args from destination<br>
--ignore-errors         delete even if there are I/O errors<br>
--force                 force deletion of dirs even if not empty<br>
--max-delete=NUM        don't delete more than NUM files<br>
--max-size=SIZE         don't transfer any file larger than SIZE<br>
--min-size=SIZE         don't transfer any file smaller than SIZE<br>
--partial               keep partially transferred files<br>
--partial-dir=DIR       put a partially transferred file into DIR<br>
--delay-updates         put all updated files into place at end
</p>

<br>

<p>
-m, --prune-empty-dirs      prune empty directory chains from file-list
</p>

<br>

<p>
--numeric-ids           don't map uid/gid values by user/group name<br>
--usermap=STRING        custom username mapping<br>
--groupmap=STRING       custom groupname mapping<br>
--chown=USER:GROUP      simple username/groupname mapping<br>
--timeout=SECONDS       set I/O timeout in seconds<br>
--contimeout=SECONDS    set daemon connection timeout in seconds
</p>

<br>

<p>
-I, --ignore-times          don't skip files that match size and time
</p>

<br>

<p>
--size-only             skip files that match in size<br>
--modify-window=NUM     compare mod-times with reduced accuracy
</p>

<br>

<p>
-T, --temp-dir=DIR          create temporary files in directory DIR<br>
-y, --fuzzy                 find similar file for basis if no dest file
</p>

<br>

<p>
--compare-dest=DIR      also compare received files relative to DIR<br>
--copy-dest=DIR         ... and include copies of unchanged files<br>
--link-dest=DIR         hardlink to files in DIR when unchanged
</p>

<br>

<p>
-z, --compress              compress file data during the transfer
</p>

<br>

<p>
--compress-level=NUM    explicitly set compression level<br>
--skip-compress=LIST    skip compressing files with suffix in LIST
</p>

<br>

<p>
-C, --cvs-exclude           auto-ignore files in the same way CVS does<br>
-f, --filter=RULE           add a file-filtering RULE<br>
-F                          same as --filter='dir-merge /.rsync-filter'
</p>

<p>
&lt;div style='padding-left: 270pt'&gt;<br>
repeated: --filter='- .rsync-filter'
</p>

<br>

<p>
--exclude=PATTERN       exclude files matching PATTERN<br>
--exclude-from=FILE     read exclude patterns from FILE<br>
--include=PATTERN       don't exclude files matching PATTERN<br>
--include-from=FILE     read include patterns from FILE<br>
--files-from=FILE       read list of source-file names from FILE
</p>

<br>

<p>
-0, --from0                 all *from/filter files are delimited by 0s<br>
-s, --protect-args          no space-splitting; wildcard chars only
</p>

<br>

<p>
--address=ADDRESS       bind address for outgoing socket to daemon<br>
--port=PORT             specify double-colon alternate port number<br>
--sockopts=OPTIONS      specify custom TCP options<br>
--blocking-io           use blocking I/O for the remote shell<br>
--outbuf=N|L|B          set out buffering to None, Line, or Block<br>
--stats                 give some file-transfer stats
</p>

<br>

<p>
-8, --8-bit-output          leave high-bit chars unescaped in output<br>
-h, --human-readable        output numbers in a human-readable format
</p>

<br>

<p>
--progress              show progress during transfer
</p>

<br>

<p>
-P                          same as --partial --progress<br>
-i, --itemize-changes       output a change-summary for all updates<br>
-M, --remote-option=OPTION  send OPTION to the remote side only
</p>

<br>

<p>
--out-format=FORMAT     output updates using the specified FORMAT<br>
--log-file=FILE         log what we're doing to the specified FILE<br>
--log-file-format=FMT   log updates using the specified FMT<br>
--password-file=FILE    read daemon-access password from FILE<br>
--list-only             list the files instead of copying them<br>
--bwlimit=RATE          limit socket I/O bandwidth<br>
--stop-at=y-m-dTh:m     Stop rsync at year-month-dayThour:minute<br>
--time-limit=MINS       Stop rsync after MINS minutes have elapsed<br>
--write-batch=FILE      write a batched update to FILE<br>
--only-write-batch=FILE like --write-batch but w/o updating dest<br>
--read-batch=FILE       read a batched update from FILE<br>
--protocol=NUM          force an older protocol version to be used<br>
--iconv=CONVERT_SPEC    request charset conversion of filenames<br>
--checksum-seed=NUM     set block/file checksum seed (advanced)
</p>

<br>

<p>
-4, --ipv4                  prefer IPv4<br>
-6, --ipv6                  prefer IPv6
</p>

<br>

<p>
--version               print version number
</p>

<br>

<p>
   (-h) --help                  show this help (see below for -h comment)
</p>

<br>
<br>
<br>
<br>

<p>
   Rsync can also be run as a daemon, in which  case<br>
   the following options are accepted:
</p>

<br>
<br>
<br>
<br>

<p>
--daemon                run as an rsync daemon<br>
--address=ADDRESS       bind to the specified address<br>
--bwlimit=RATE          limit socket I/O bandwidth<br>
--config=FILE           specify alternate rsyncd.conf file
</p>

<br>

<p>
-M, --dparam=OVERRIDE       override global daemon config parameter
</p>

<br>

<p>
--no-detach             do not detach from the parent<br>
--port=PORT             listen on alternate port number<br>
--log-file=FILE         override the "log file" setting<br>
--log-file-format=FMT   override the "log format" setting<br>
--sockopts=OPTIONS      specify custom TCP options
</p>

<br>

<p>
-v, --verbose               increase verbosity<br>
-4, --ipv4                  prefer IPv4<br>
-6, --ipv6                  prefer IPv6<br>
-h, --help                  show this help (if used after --daemon)
</p>

<br>
<br>
<br>

<p>
OPTIONS
</p>

<p>
   Rsync  accepts both long (double-dash + word) and<br>
   short (single-dash + letter) options.   The  full<br>
   list  of  the  available  options  are  described<br>
   below.  If an option can  be  specified  in  more<br>
   than  one  way,  the choices are comma-separated.<br>
   Some options only have  a  long  variant,  not  a<br>
   short.   If  the  option  takes  a parameter, the<br>
   parameter is only listed after the long  variant,<br>
   even  though  it  must  also be specified for the<br>
   short.  When  specifying  a  parameter,  you  can<br>
   either use the form --option=param or replace the<br>
   ’=’ with whitespace.  The parameter may  need  to<br>
   be  quoted  in  some manner for it to survive the<br>
   shell’s command-line parsing.  Keep in mind  that<br>
   a  leading tilde (~) in a filename is substituted<br>
   by your shell, so --option=~/foo will not  change<br>
   the  tilde  into  your home directory (remove the<br>
   ’=’ for that).
</p>

<br>
<br>
<br>
<br>

<p>
   --help Print a short  help  page  describing  the
</p>

<br>

<p>
  options  available in rsync and exit.  For<br>
  backward-compatibility with older versions<br>
  of  rsync, the help will also be output if<br>
  you use the -h option  without  any  other<br>
  args.
</p>

<br>
<br>
<br>
<br>

<p>
   --version
</p>

<br>

<p>
  print the rsync version number and exit.
</p>

<br>
<br>
<br>
<br>

<p>
   -v, --verbose
</p>

<br>

<p>
  This option increases the amount of infor‐<br>
  mation you are given during the  transfer.<br>
  By default, rsync works silently. A single<br>
  -v will give you  information  about  what<br>
  files  are  being  transferred and a brief<br>
  summary at the end. Two  -v  options  will<br>
  give  you  information  on  what files are<br>
  being skipped and slightly  more  informa‐<br>
  tion  at the end. More than two -v options<br>
  should only be used if you  are  debugging<br>
  rsync.
</p>

<br>
<br>
<br>
<br>

<p>
  In a modern rsync, the -v option is equiv‐<br>
  alent to the setting of groups  of  --info<br>
  and  --debug  options.   You can choose to<br>
  use these newer options in addition to, or<br>
  in   place  of  using  --verbose,  as  any<br>
  fine-grained settings override the implied<br>
  settings  of  -v.  Both --info and --debug<br>
  have a way to ask for help that tells  you<br>
  exactly   what  flags  are  set  for  each<br>
  increase in verbosity.
</p>

<br>
<br>
<br>
<br>

<p>
  However, do keep in mind that  a  daemon’s<br>
  "max  verbosity"  setting  will  limit how<br>
  high of a  level  the  various  individual<br>
  flags  can be set on the daemon side.  For<br>
  instance, if the max is 2, then  any  info<br>
  and/or  debug flag that is set to a higher<br>
  value than what would be set by  -vv  will<br>
  be downgraded to the -vv level in the dae‐<br>
  mon’s logging.
</p>

<br>
<br>
<br>
<br>

<p>
   --info=FLAGS
</p>

<br>

<p>
  This option  lets  you  have  fine-grained<br>
  control  over  the  information output you<br>
  want to see.  An individual flag name  may<br>
  be  followed  by  a  level  number, with 0<br>
  meaning to silence that  output,  1  being<br>
  the  default output level, and higher num‐<br>
  bers increasing the output  of  that  flag<br>
  (for  those  that  support higher levels).<br>
  Use --info=help to see all  the  available<br>
  flag  names,  what  they  output, and what<br>
  flag names are added for each increase  in<br>
  the verbose level.  Some examples:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync -a --info=progress2 src/ dest/<br>
  rsync -avv --info=stats2,misc1,flist0 src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  Note that --info=name’s output is affected<br>
  by the --out-format and  --itemize-changes<br>
  (-i)  options.  See those options for more<br>
  information on what is output and when.
</p>

<br>
<br>
<br>
<br>

<p>
  This option was  added  to  3.1.0,  so  an<br>
  older  rsync  on  the  server  side  might<br>
  reject your attempts at fine-grained  con‐<br>
  trol  (if  one  or more flags needed to be<br>
  send to the server and the server was  too<br>
  old  to  understand  them).   See also the<br>
  "max verbosity" caveat above when  dealing<br>
  with a daemon.
</p>

<br>
<br>
<br>
<br>

<p>
   --debug=FLAGS
</p>

<br>

<p>
  This  option  lets  you  have fine-grained<br>
  control over the debug output you want  to<br>
  see.   An individual flag name may be fol‐<br>
  lowed by a level number, with 0 meaning to<br>
  silence  that  output, 1 being the default<br>
  output level, and higher numbers  increas‐<br>
  ing  the  output  of  that flag (for those<br>
  that   support   higher   levels).     Use<br>
  --debug=help to see all the available flag<br>
  names, what they  output,  and  what  flag<br>
  names  are  added for each increase in the<br>
  verbose level.  Some examples:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync -avvv --debug=none src/ dest/<br>
  rsync -avA --del --debug=del2,acl src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  Note that some debug messages will only be<br>
  output  when  --msgs2stderr  is specified,<br>
  especially those  pertaining  to  I/O  and<br>
  buffer debugging.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  was  added  to  3.1.0, so an<br>
  older  rsync  on  the  server  side  might<br>
  reject  your attempts at fine-grained con‐<br>
  trol (if one or more flags  needed  to  be<br>
  send  to the server and the server was too<br>
  old to understand  them).   See  also  the<br>
  "max  verbosity" caveat above when dealing<br>
  with a daemon.
</p>

<br>
<br>
<br>
<br>

<p>
   --msgs2stderr
</p>

<br>

<p>
  This option changes rsync to send all  its<br>
  output  directly  to stderr rather than to<br>
  send messages to the client side  via  the<br>
  protocol (which normally outputs info mes‐<br>
  sages  via  stdout).    This   is   mainly<br>
  intended  for  debugging in order to avoid<br>
  changing the data sent via  the  protocol,<br>
  since  the  extra protocol data can change<br>
  what is being tested.  The option does not<br>
  affect the remote side of a transfer with‐<br>
  out   using   --remote-option   --    e.g.<br>
  -M--msgs2stderr.  Also keep in mind that a<br>
  daemon connection does not have  a  stderr<br>
  channel  to  send  messages  back  to  the<br>
  client side, so if you are doing any  dae‐<br>
  mon-transfer  debugging using this option,<br>
  you  should  start  up  a   daemon   using<br>
  --no-detach so that you can see the stderr<br>
  output on the daemon side.
</p>

<br>
<br>
<br>
<br>

<p>
  This option has the side-effect of  making<br>
  stderr  output  get  line-buffered so that<br>
  the merging of the output  of  3  programs<br>
  happens in a more readable manner.
</p>

<br>
<br>
<br>
<br>

<p>
   -q, --quiet
</p>

<br>

<p>
  This option decreases the amount of infor‐<br>
  mation you are given during the  transfer,<br>
  notably  suppressing  information messages<br>
  from the remote  server.  This  option  is<br>
  useful when invoking rsync from cron.
</p>

<br>
<br>
<br>
<br>

<p>
   --no-motd
</p>

<br>

<p>
  This  option  affects the information that<br>
  is output by the client at the start of  a<br>
  daemon transfer.  This suppresses the mes‐<br>
  sage-of-the-day (MOTD) text, but  it  also<br>
  affects  the list of modules that the dae‐<br>
  mon  sends  in  response  to  the   "rsync<br>
  host::"  request  (due  to a limitation in<br>
  the rsync protocol), so omit  this  option<br>
  if you want to request the list of modules<br>
  from the daemon.
</p>

<br>
<br>
<br>
<br>

<p>
   -I, --ignore-times
</p>

<br>

<p>
  Normally rsync will skip  any  files  that<br>
  are  already  the  same  size and have the<br>
  same modification timestamp.  This  option<br>
  turns  off  this  "quick  check" behavior,<br>
  causing all files to be updated.
</p>

<br>
<br>
<br>
<br>

<p>
   --size-only
</p>

<br>

<p>
  This modifies rsync’s "quick check"  algo‐<br>
  rithm  for  finding  files that need to be<br>
  transferred, changing it from the  default<br>
  of   transferring   files  with  either  a<br>
  changed size or  a  changed  last-modified<br>
  time  to  just looking for files that have<br>
  changed in  size.   This  is  useful  when<br>
  starting  to use rsync after using another<br>
  mirroring system which  may  not  preserve<br>
  timestamps exactly.
</p>

<br>
<br>
<br>
<br>

<p>
   --modify-window
</p>

<br>

<p>
  When   comparing   two  timestamps,  rsync<br>
  treats the timestamps as  being  equal  if<br>
  they  differ  by  no  more  than  the mod‐<br>
  ify-window value.  This is normally 0 (for<br>
  an  exact match), but you may find it use‐<br>
  ful to set this to a larger value in  some<br>
  situations.  In particular, when transfer‐<br>
  ring to or from an MS Windows FAT filesys‐<br>
  tem  (which represents times with a 2-sec‐<br>
  ond resolution), --modify-window=1 is use‐<br>
  ful  (allowing  times to differ by up to 1<br>
  second).
</p>

<br>
<br>
<br>
<br>

<p>
   -c, --checksum
</p>

<br>

<p>
  This changes the way rsync checks  if  the<br>
  files have been changed and are in need of<br>
  a transfer.  Without  this  option,  rsync<br>
  uses  a  "quick  check"  that (by default)<br>
  checks if each file’s  size  and  time  of<br>
  last modification match between the sender<br>
  and receiver.  This option changes this to<br>
  compare  a  128-bit checksum for each file<br>
  that has a matching size.  Generating  the<br>
  checksums   means  that  both  sides  will<br>
  expend a lot of disk I/O reading  all  the<br>
  data  in  the  files  in the transfer (and<br>
  this is prior to any reading that will  be<br>
  done  to  transfer changed files), so this<br>
  can slow things down significantly.
</p>

<br>
<br>
<br>
<br>

<p>
  The sending side generates  its  checksums<br>
  while  it  is  doing  the file-system scan<br>
  that builds  the  list  of  the  available<br>
  files.   The receiver generates its check‐<br>
  sums  when  it  is  scanning  for  changed<br>
  files, and will checksum any file that has<br>
  the  same  size   as   the   corresponding<br>
  sender’s   file:    files  with  either  a<br>
  changed size or  a  changed  checksum  are<br>
  selected for transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that rsync always verifies that each<br>
  transferred  file  was  correctly   recon‐<br>
  structed on the receiving side by checking<br>
  a whole-file checksum that is generated as<br>
  the  file  is  transferred, but that auto‐<br>
  matic after-the-transfer verification  has<br>
  nothing   to   do   with   this   option’s<br>
  before-the-transfer "Does this  file  need<br>
  to be updated?" check.
</p>

<br>
<br>
<br>
<br>

<p>
  For  protocol  30  and  beyond (first sup‐<br>
  ported in 3.0.0),  the  checksum  used  is<br>
  MD5.   For  older  protocols, the checksum<br>
  used is MD4.
</p>

<br>
<br>
<br>
<br>

<p>
   -a, --archive
</p>

<br>

<p>
  This is equivalent to -rlptgoD.  It  is  a<br>
  quick way of saying you want recursion and<br>
  want to preserve almost  everything  (with<br>
  -H  being  a  notable omission).  The only<br>
  exception to the above equivalence is when<br>
  --files-from  is  specified, in which case<br>
  -r is not implied.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that -a does not preserve  hardlinks,<br>
  because  finding  multiply-linked files is<br>
  expensive.  You  must  separately  specify<br>
  -H.
</p>

<br>
<br>
<br>
<br>

<p>
   --no-OPTION
</p>

<br>

<p>
  You  may  turn  off  one  or  more implied<br>
  options by prefixing the option name  with<br>
  "no-".   Not  all  options may be prefixed<br>
  with  a  "no-":  only  options  that   are<br>
  implied  by  other  options  (e.g. --no-D,<br>
  --no-perms) or have different defaults  in<br>
  various         circumstances        (e.g.<br>
  --no-whole-file,         --no-blocking-io,<br>
  --no-dirs).   You  may  specify either the<br>
  short or the long option  name  after  the<br>
  "no-"  prefix  (e.g. --no-R is the same as<br>
  --no-relative).
</p>

<br>
<br>
<br>
<br>

<p>
  For example: if you want to use -a  (--ar‐<br>
  chive)   but   don’t  want  -o  (--owner),<br>
  instead of converting -a into -rlptgD, you<br>
  could    specify    -a   --no-o   (or   -a<br>
  --no-owner).
</p>

<br>
<br>
<br>
<br>

<p>
  The order of the options is important:  if<br>
  you specify --no-r -a, the -r option would<br>
  end up being turned on, the opposite of -a<br>
  --no-r.   Note  also that the side-effects<br>
  of the --files-from option are  NOT  posi‐<br>
  tional, as it affects the default state of<br>
  several options and slightly  changes  the<br>
  meaning of -a (see the --files-from option<br>
  for more details).
</p>

<br>
<br>
<br>
<br>

<p>
   -r, --recursive
</p>

<br>

<p>
  This  tells  rsync  to  copy   directories<br>
  recursively.  See also --dirs (-d).
</p>

<br>
<br>
<br>
<br>

<p>
  Beginning  with rsync 3.0.0, the recursive<br>
  algorithm used is now an incremental  scan<br>
  that uses much less memory than before and<br>
  begins the transfer after the scanning  of<br>
  the  first  few directories have been com‐<br>
  pleted.   This   incremental   scan   only<br>
  affects  our recursion algorithm, and does<br>
  not change a non-recursive  transfer.   It<br>
  is  also  only  possible when both ends of<br>
  the transfer are at least version 3.0.0.
</p>

<br>
<br>
<br>
<br>

<p>
  Some options require  rsync  to  know  the<br>
  full  file  list, so these options disable<br>
  the  incremental  recursion  mode.   These<br>
  include:  --delete-before, --delete-after,<br>
  --prune-empty-dirs,  and  --delay-updates.<br>
  Because  of  this, the default delete mode<br>
  when   you   specify   --delete   is   now<br>
  --delete-during when both ends of the con‐<br>
  nection are at least 3.0.0 (use  --del  or<br>
  --delete-during  to  request this improved<br>
  deletion mode explicitly).  See  also  the<br>
  --delete-delay  option  that  is  a better<br>
  choice than using --delete-after.
</p>

<br>
<br>
<br>
<br>

<p>
  Incremental  recursion  can  be   disabled<br>
  using the --no-inc-recursive option or its<br>
  shorter --no-i-r alias.
</p>

<br>
<br>
<br>
<br>

<p>
   -R, --relative
</p>

<br>

<p>
  Use relative paths. This  means  that  the<br>
  full  path  names specified on the command<br>
  line are sent to the  server  rather  than<br>
  just the last parts of the filenames. This<br>
  is particularly useful when  you  want  to<br>
  send  several different directories at the<br>
  same time. For example, if you  used  this<br>
  command:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync -av /foo/bar/baz.c remote:/tmp/
</p>

<br>
<br>
<br>
<br>

<p>
  ...  this  would create a file named baz.c<br>
  in /tmp/ on the remote machine. If instead<br>
  you used
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync -avR /foo/bar/baz.c remote:/tmp/
</p>

<br>
<br>
<br>
<br>

<p>
  then a file named /tmp/foo/bar/baz.c would<br>
  be created on the remote machine, preserv‐<br>
  ing  its full path.  These extra path ele‐<br>
  ments  are  called  "implied  directories"<br>
  (i.e. the "foo" and the "foo/bar" directo‐<br>
  ries in the above example).
</p>

<br>
<br>
<br>
<br>

<p>
  Beginning with rsync 3.0.0,  rsync  always<br>
  sends  these  implied  directories as real<br>
  directories in the file list,  even  if  a<br>
  path  element  is  really a symlink on the<br>
  sending side.  This prevents  some  really<br>
  unexpected behaviors when copying the full<br>
  path of a file that you didn’t realize had<br>
  a  symlink  in  its  path.  If you want to<br>
  duplicate a server-side  symlink,  include<br>
  both  the symlink via its path, and refer‐<br>
  ent  directory  via  its  real  path.   If<br>
  you’re  dealing with an older rsync on the<br>
  sending side, you  may  need  to  use  the<br>
  --no-implied-dirs option.
</p>

<br>
<br>
<br>
<br>

<p>
  It is also possible to limit the amount of<br>
  path information that is sent  as  implied<br>
  directories  for  each  path  you specify.<br>
  With a modern rsync on  the  sending  side<br>
  (beginning  with  2.6.7), you can insert a<br>
  dot and a slash into the source path, like<br>
  this:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync       -avR       /foo/./bar/baz.c
</p>

<br>

<p>
  remote:/tmp/
</p>

<br>
<br>
<br>
<br>

<p>
  That would create  /tmp/bar/baz.c  on  the<br>
  remote  machine.   (Note that the dot must<br>
  be followed by a slash, so "/foo/."  would<br>
  not be abbreviated.)  For older rsync ver‐<br>
  sions, you would need to use  a  chdir  to<br>
  limit  the source path.  For example, when<br>
  pushing files:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 (cd   /foo;   rsync   -avR    bar/baz.c
</p>

<br>

<p>
  remote:/tmp/)
</p>

<br>
<br>
<br>
<br>

<p>
  (Note that the parens put the two commands<br>
  into a sub-shell, so that the "cd" command<br>
  doesn’t  remain  in effect for future com‐<br>
  mands.)  If you’re pulling files  from  an<br>
  older  rsync, use this idiom (but only for<br>
  a non-daemon transfer):
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync   -avR   --rsync-path="cd   /foo;
</p>

<br>

<p>
  rsync" \
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 remote:bar/baz.c /tmp/
</p>

<br>
<br>
<br>
<br>

<p>
   --no-implied-dirs
</p>

<br>

<p>
  This  option  affects the default behavior<br>
  of the  --relative  option.   When  it  is<br>
  specified,  the  attributes of the implied<br>
  directories from the source names are  not<br>
  included in the transfer.  This means that<br>
  the corresponding  path  elements  on  the<br>
  destination  system  are left unchanged if<br>
  they exist, and any missing implied direc‐<br>
  tories    are    created    with   default<br>
  attributes.   This   even   allows   these<br>
  implied  path elements to have big differ‐<br>
  ences, such as being a symlink to a direc‐<br>
  tory on the receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  For  instance,  if a command-line arg or a<br>
  files-from entry told  rsync  to  transfer<br>
  the  file "path/foo/file", the directories<br>
  "path" and  "path/foo"  are  implied  when<br>
  --relative  is  used.   If "path/foo" is a<br>
  symlink to "bar" on the  destination  sys‐<br>
  tem,  the receiving rsync would ordinarily<br>
  delete "path/foo", recreate it as a direc‐<br>
  tory,  and  receive  the file into the new<br>
  directory.   With  --no-implied-dirs,  the<br>
  receiving  rsync  updates  "path/foo/file"<br>
  using the existing  path  elements,  which<br>
  means  that the file ends up being created<br>
  in "path/bar".  Another way to  accomplish<br>
  this  link  preservation  is  to  use  the<br>
  --keep-dirlinks option  (which  will  also<br>
  affect symlinks to directories in the rest<br>
  of the transfer).
</p>

<br>
<br>
<br>
<br>

<p>
  When pulling files  from  an  rsync  older<br>
  than  3.0.0,  you  may  need  to  use this<br>
  option if the sending side has  a  symlink<br>
  in  the  path you request and you wish the<br>
  implied directories to be  transferred  as<br>
  normal directories.
</p>

<br>
<br>
<br>
<br>

<p>
   -b, --backup
</p>

<br>

<p>
  With  this option, preexisting destination<br>
  files are renamed as each file  is  trans‐<br>
  ferred  or deleted.  You can control where<br>
  the backup file goes  and  what  (if  any)<br>
  suffix    gets    appended    using    the<br>
  --backup-dir and --suffix options.
</p>

<br>
<br>
<br>
<br>

<p>
  Note   that   if   you    don’t    specify<br>
  --backup-dir,   (1)  the  --omit-dir-times<br>
  option  will  be  implied,  and   (2)   if<br>
  --delete   is   also  in  effect  (without<br>
  --delete-excluded), rsync will add a "pro‐<br>
  tect" filter-rule for the backup suffix to<br>
  the end  of  all  your  existing  excludes<br>
  (e.g.  -f "P *~").  This will prevent pre‐<br>
  viously   backed-up   files   from   being<br>
  deleted.   Note  that if you are supplying<br>
  your own filter rules,  you  may  need  to<br>
  manually  insert  your own exclude/protect<br>
  rule somewhere higher up in  the  list  so<br>
  that  it  has a high enough priority to be<br>
  effective (e.g., if your rules  specify  a<br>
  trailing  inclusion/exclusion  of ’*’, the<br>
  auto-added rule would never be reached).
</p>

<br>
<br>
<br>
<br>

<p>
   --backup-dir=DIR
</p>

<br>

<p>
  In combination with the  --backup  option,<br>
  this  tells  rsync to store all backups in<br>
  the specified directory on  the  receiving<br>
  side.   This  can  be used for incremental<br>
  backups.  You can additionally  specify  a<br>
  backup  suffix  using  the --suffix option<br>
  (otherwise the  files  backed  up  in  the<br>
  specified directory will keep their origi‐<br>
  nal filenames).
</p>

<br>
<br>
<br>
<br>

<p>
  Note that if you specify a relative  path,<br>
  the  backup  directory will be relative to<br>
  the destination directory, so you probably<br>
  want to specify either an absolute path or<br>
  a path that  starts  with  "../".   If  an<br>
  rsync  daemon  is the receiver, the backup<br>
  dir cannot go outside  the  module’s  path<br>
  hierarchy,  so  take  extra  care  not  to<br>
  delete it or copy into it.
</p>

<br>
<br>
<br>
<br>

<p>
   --suffix=SUFFIX
</p>

<br>

<p>
  This option allows  you  to  override  the<br>
  default   backup   suffix  used  with  the<br>
  --backup (-b) option. The  default  suffix<br>
  is  a  ~ if no --backup-dir was specified,<br>
  otherwise it is an empty string.
</p>

<br>
<br>
<br>
<br>

<p>
   -u, --update
</p>

<br>

<p>
  This forces rsync to skip any files  which<br>
  exist  on the destination and have a modi‐<br>
  fied time that is newer  than  the  source<br>
  file.   (If  an  existing destination file<br>
  has  a  modification  time  equal  to  the<br>
  source  file’s,  it will be updated if the<br>
  sizes are different.)
</p>

<br>
<br>
<br>
<br>

<p>
  Note that this does not affect the copying<br>
  of dirs, symlinks, or other special files.<br>
  Also, a difference of file format  between<br>
  the  sender and receiver is always consid‐<br>
  ered to be important enough for an update,<br>
  no matter what date is on the objects.  In<br>
  other words, if the source has a directory<br>
  where  the  destination  has  a  file, the<br>
  transfer would  occur  regardless  of  the<br>
  timestamps.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  is  a  transfer rule, not an<br>
  exclude, so it  doesn’t  affect  the  data<br>
  that goes into the file-lists, and thus it<br>
  doesn’t affect deletions.  It just  limits<br>
  the files that the receiver requests to be<br>
  transferred.
</p>

<br>
<br>
<br>
<br>

<p>
   --inplace
</p>

<br>

<p>
  This option changes how rsync transfers  a<br>
  file  when  its  data needs to be updated:<br>
  instead of the default method of  creating<br>
  a  new copy of the file and moving it into<br>
  place when it is complete,  rsync  instead<br>
  writes  the  updated  data directly to the<br>
  destination file.
</p>

<br>
<br>
<br>
<br>

<p>
  This has several effects:
</p>

<br>
<br>
<br>
<br>

<p>
  o      Hard links are  not  broken.   This
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 means  the new data will be visible<br>
 through other  hard  links  to  the<br>
 destination     file.     Moreover,<br>
 attempts to copy  differing  source<br>
 files onto a multiply-linked desti‐<br>
 nation file will result in  a  "tug<br>
 of  war"  with the destination data<br>
 changing back and forth.
</p>

<br>
<br>
<br>
<br>

<p>
  o      In-use binaries cannot  be  updated
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 (either  the  OS  will prevent this<br>
 from happening,  or  binaries  that<br>
 attempt  to swap-in their data will<br>
 misbehave or crash).
</p>

<br>
<br>
<br>
<br>

<p>
  o      The  file’s  data  will  be  in  an
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 inconsistent   state   during   the<br>
 transfer and will be left that  way<br>
 if  the  transfer is interrupted or<br>
 if an update fails.
</p>

<br>
<br>
<br>
<br>

<p>
  o      A file that rsync cannot  write  to
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 cannot  be  updated.  While a super<br>
 user can update any file, a  normal<br>
 user needs to be granted write per‐<br>
 mission for the open  of  the  file<br>
 for writing to be successful.
</p>

<br>
<br>
<br>
<br>

<p>
  o      The     efficiency    of    rsync’s
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 delta-transfer  algorithm  may   be<br>
 reduced  if some data in the desti‐<br>
 nation file is  overwritten  before<br>
 it  can  be  copied  to  a position<br>
 later in the file.  This  does  not<br>
 apply  if  you  use --backup, since<br>
 rsync is smart enough  to  use  the<br>
 backup  file  as the basis file for<br>
 the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  WARNING: you should not use this option to<br>
  update  files  that  are being accessed by<br>
  others, so be careful when choosing to use<br>
  this for a copy.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  is  useful  for transferring<br>
  large files with  block-based  changes  or<br>
  appended  data,  and  also on systems that<br>
  are disk bound, not network bound.  It can<br>
  also  help keep a copy-on-write filesystem<br>
  snapshot from diverging  the  entire  con‐<br>
  tents  of  a  file  that  only  has  minor<br>
  changes.
</p>

<br>
<br>
<br>
<br>

<p>
  The option  implies  --partial  (since  an<br>
  interrupted  transfer  does not delete the<br>
  file), but  conflicts  with  --partial-dir<br>
  and --delay-updates.  Prior to rsync 2.6.4<br>
  --inplace  was  also   incompatible   with<br>
  --compare-dest and --link-dest.
</p>

<br>
<br>
<br>
<br>

<p>
   --append
</p>

<br>

<p>
  This  causes  rsync  to  update  a file by<br>
  appending data onto the end of  the  file,<br>
  which  presumes that the data that already<br>
  exists on the receiving side is  identical<br>
  with  the start of the file on the sending<br>
  side.  If a file needs to  be  transferred<br>
  and  its  size on the receiver is the same<br>
  or longer than the size on the sender, the<br>
  file  is skipped.  This does not interfere<br>
  with the updating of a file’s  non-content<br>
  attributes  (e.g.  permissions, ownership,<br>
  etc.) when the file does not  need  to  be<br>
  transferred, nor does it affect the updat‐<br>
  ing of  any  non-regular  files.   Implies<br>
  --inplace,  but  does  not  conflict  with<br>
  --sparse (since it is always  extending  a<br>
  file’s length).
</p>

<br>
<br>
<br>
<br>

<p>
  The  use  of  --append can be dangerous if<br>
  you aren’t 100% sure that the  files  that<br>
  are  longer have only grown by the append‐<br>
  ing of data onto the end.  You should thus<br>
  use include/exclude/filter rules to ensure<br>
  that such a  transfer  is  only  affecting<br>
  files  that  you  know  to  be growing via<br>
  appended data.
</p>

<br>
<br>
<br>
<br>

<p>
   --append-verify
</p>

<br>

<p>
  This works just like the --append  option,<br>
  but  the  existing  data  on the receiving<br>
  side is included in the full-file checksum<br>
  verification step, which will cause a file<br>
  to be resent  if  the  final  verification<br>
  step   fails   (rsync   uses   a   normal,<br>
  non-appending --inplace transfer  for  the<br>
  resend).
</p>

<br>
<br>
<br>
<br>

<p>
  Note:  prior  to rsync 3.0.0, the --append<br>
  option worked like --append-verify, so  if<br>
  you  are  interacting  with an older rsync<br>
  (or the transfer is using a protocol prior<br>
  to  30),  specifying  either append option<br>
  will initiate an --append-verify transfer.
</p>

<br>
<br>
<br>
<br>

<p>
   -d, --dirs
</p>

<br>

<p>
  Tell  the  sending  side  to  include  any<br>
  directories  that are encountered.  Unlike<br>
  --recursive, a  directory’s  contents  are<br>
  not copied unless the directory name spec‐<br>
  ified is "." or ends with a trailing slash<br>
  (e.g.  ".", "dir/.", "dir/", etc.).  With‐<br>
  out this option or the --recursive option,<br>
  rsync will skip all directories it encoun‐<br>
  ters (and output a message to that  effect<br>
  for each one).  If you specify both --dirs<br>
  and --recursive, --recursive takes  prece‐<br>
  dence.
</p>

<br>
<br>
<br>
<br>

<p>
  The   --dirs  option  is  implied  by  the<br>
  --files-from  option  or  the  --list-only<br>
  option  (including  an implied --list-only<br>
  usage) if --recursive wasn’t specified (so<br>
  that directories are seen in the listing).<br>
  Specify --no-dirs (or --no-d) if you  want<br>
  to turn this off.
</p>

<br>
<br>
<br>
<br>

<p>
  There  is  also  a  backward-compatibility<br>
  helper  option,  --old-dirs  (or  --old-d)<br>
  that  tells  rsync  to  use  a hack of "-r<br>
  --exclude=’/*/*’" to get an older rsync to<br>
  list a single directory without recursing.
</p>

<br>
<br>
<br>
<br>

<p>
   -l, --links
</p>

<br>

<p>
  When  symlinks  are  encountered, recreate<br>
  the symlink on the destination.
</p>

<br>
<br>
<br>
<br>

<p>
   -L, --copy-links
</p>

<br>

<p>
  When symlinks are  encountered,  the  item<br>
  that  they  point  to  (the  referent)  is<br>
  copied, rather than the symlink.  In older<br>
  versions  of  rsync,  this option also had<br>
  the side-effect of telling  the  receiving<br>
  side  to follow symlinks, such as symlinks<br>
  to directories.  In a modern rsync such as<br>
  this   one,   you’ll   need   to   specify<br>
  --keep-dirlinks (-K)  to  get  this  extra<br>
  behavior.   The  only  exception  is  when<br>
  sending files to an rsync that is too  old<br>
  to  understand  -K -- in that case, the -L<br>
  option will still have the side-effect  of<br>
  -K on that older receiving rsync.
</p>

<br>
<br>
<br>
<br>

<p>
   --copy-unsafe-links
</p>

<br>

<p>
  This  tells  rsync to copy the referent of<br>
  symbolic  links  that  point  outside  the<br>
  copied  tree.   Absolute symlinks are also<br>
  treated like ordinary files,  and  so  are<br>
  any  symlinks  in  the  source path itself<br>
  when --relative is used.  This option  has<br>
  no  additional  effect if --copy-links was<br>
  also specified.
</p>

<br>
<br>
<br>
<br>

<p>
   --safe-links
</p>

<br>

<p>
  This tells rsync to  ignore  any  symbolic<br>
  links which point outside the copied tree.<br>
  All absolute symlinks  are  also  ignored.<br>
  Using  this  option  in  conjunction  with<br>
  --relative may give unexpected results.
</p>

<br>
<br>
<br>
<br>

<p>
   --munge-links
</p>

<br>

<p>
  This option tells rsync to (1) modify  all<br>
  symlinks  on  the  receiving side in a way<br>
  that makes them unusable  but  recoverable<br>
  (see below), or (2) to unmunge symlinks on<br>
  the sending side that had been stored in a<br>
  munged state.  This is useful if you don’t<br>
  quite trust the source of the data to  not<br>
  try  to  slip in a symlink to a unexpected<br>
  place.
</p>

<br>
<br>
<br>
<br>

<p>
  The way rsync disables the use of symlinks<br>
  is  to  prefix  each  one  with the string<br>
  "/rsyncd-munged/".   This   prevents   the<br>
  links  from  being  used  as  long as that<br>
  directory  does  not  exist.   When   this<br>
  option  is  enabled,  rsync will refuse to<br>
  run if that path is a directory or a  sym‐<br>
  link to a directory.
</p>

<br>
<br>
<br>
<br>

<p>
  The option only affects the client side of<br>
  the transfer, so if you need it to  affect<br>
  the     server,     specify     it     via<br>
  --remote-option.  (Note that  in  a  local<br>
  transfer, the client side is the sender.)
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  has  no  affect on a daemon,<br>
  since the  daemon  configures  whether  it<br>
  wants  munged symlinks via its "munge sym‐<br>
  links"   parameter.     See    also    the<br>
  "munge-symlinks"  perl  script in the sup‐<br>
  port directory of the source code.
</p>

<br>
<br>
<br>
<br>

<p>
   -k, --copy-dirlinks
</p>

<br>

<p>
  This option causes  the  sending  side  to<br>
  treat  a  symlink to a directory as though<br>
  it were a real directory.  This is  useful<br>
  if you don’t want symlinks to non-directo‐<br>
  ries to be  affected,  as  they  would  be<br>
  using --copy-links.
</p>

<br>
<br>
<br>
<br>

<p>
  Without  this  option, if the sending side<br>
  has replaced a directory with a symlink to<br>
  a   directory,  the  receiving  side  will<br>
  delete anything that is in the way of  the<br>
  new symlink, including a directory hierar‐<br>
  chy (as long as --force or --delete is  in<br>
  effect).
</p>

<br>
<br>
<br>
<br>

<p>
  See  also --keep-dirlinks for an analogous<br>
  option for the receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  --copy-dirlinks applies to all symlinks to<br>
  directories in the source.  If you want to<br>
  follow only a few  specified  symlinks,  a<br>
  trick you can use is to pass them as addi‐<br>
  tional source args with a trailing  slash,<br>
  using  --relative  to make the paths match<br>
  up right.  For example:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync  -r  --relative  src/./   src/./fol‐<br>
  low-me/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  This works because rsync calls lstat(2) on<br>
  the source arg as given, and the  trailing<br>
  slash  makes  lstat(2) follow the symlink,<br>
  giving  rise  to  a   directory   in   the<br>
  file-list   which  overrides  the  symlink<br>
  found during the scan of "src/./".
</p>

<br>
<br>
<br>
<br>

<p>
   -K, --keep-dirlinks
</p>

<br>

<p>
  This option causes the receiving  side  to<br>
  treat  a  symlink to a directory as though<br>
  it were a real directory, but only  if  it<br>
  matches  a real directory from the sender.<br>
  Without this option, the  receiver’s  sym‐<br>
  link  would be deleted and replaced with a<br>
  real directory.
</p>

<br>
<br>
<br>
<br>

<p>
  For example, suppose you transfer a direc‐<br>
  tory  "foo"  that  contains a file "file",<br>
  but "foo" is a symlink to directory  "bar"<br>
  on the receiver.  Without --keep-dirlinks,<br>
  the receiver deletes symlink "foo", recre‐<br>
  ates  it  as a directory, and receives the<br>
  file  into  the   new   directory.    With<br>
  --keep-dirlinks,  the  receiver  keeps the<br>
  symlink and "file" ends up in "bar".
</p>

<br>
<br>
<br>
<br>

<p>
  One  note  of   caution:    if   you   use<br>
  --keep-dirlinks,  you  must  trust all the<br>
  symlinks in the copy!  If it  is  possible<br>
  for  an untrusted user to create their own<br>
  symlink to any directory, the  user  could<br>
  then  (on  a  subsequent copy) replace the<br>
  symlink with a real directory  and  affect<br>
  the content of whatever directory the sym‐<br>
  link references.  For backup  copies,  you<br>
  are better off using something like a bind<br>
  mount instead of a symlink to modify  your<br>
  receiving hierarchy.
</p>

<br>
<br>
<br>
<br>

<p>
  See  also --copy-dirlinks for an analogous<br>
  option for the sending side.
</p>

<br>
<br>
<br>
<br>

<p>
   -H, --hard-links
</p>

<br>

<p>
  This tells rsync to look  for  hard-linked<br>
  files  in the source and link together the<br>
  corresponding files  on  the  destination.<br>
  Without  this option, hard-linked files in<br>
  the source are treated as though they were<br>
  separate files.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  does  NOT necessarily ensure<br>
  that the pattern of hard links on the des‐<br>
  tination   exactly  matches  that  on  the<br>
  source.  Cases in  which  the  destination<br>
  may  end  up with extra hard links include<br>
  the following:
</p>

<br>
<br>
<br>
<br>

<p>
  o      If the destination contains  extra‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 neous hard-links (more linking than<br>
 what is present in the source  file<br>
 list),  the  copying algorithm will<br>
 not break  them  explicitly.   How‐<br>
 ever,  if  one or more of the paths<br>
 have content differences, the  nor‐<br>
 mal  file-update process will break<br>
 those extra links (unless  you  are<br>
 using the --inplace option).
</p>

<br>
<br>
<br>
<br>

<p>
  o      If you specify a --link-dest direc‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 tory that contains hard links,  the<br>
 linking  of  the  destination files<br>
 against the --link-dest  files  can<br>
 cause some paths in the destination<br>
 to become linked  together  due  to<br>
 the --link-dest associations.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that rsync can only detect hard links<br>
  between files that are inside the transfer<br>
  set.   If  rsync  updates  a file that has<br>
  extra hard-link connections to files  out‐<br>
  side  the  transfer,  that linkage will be<br>
  broken.  If you are  tempted  to  use  the<br>
  --inplace  option  to avoid this breakage,<br>
  be very careful that  you  know  how  your<br>
  files  are  being  updated so that you are<br>
  certain that no unintended changes  happen<br>
  due  to  lingering hard links (and see the<br>
  --inplace option for more caveats).
</p>

<br>
<br>
<br>
<br>

<p>
  If incremental recursion  is  active  (see<br>
  --recursive), rsync may transfer a missing<br>
  hard-linked  file  before  it  finds  that<br>
  another  link  for  that  contents  exists<br>
  elsewhere in the hierarchy.  This does not<br>
  affect  the accuracy of the transfer (i.e.<br>
  which  files  are  hard-linked  together),<br>
  just its efficiency (i.e. copying the data<br>
  for a new, early  copy  of  a  hard-linked<br>
  file  that  could have been found later in<br>
  the transfer  in  another  member  of  the<br>
  hard-linked  set  of  files).   One way to<br>
  avoid  this  inefficiency  is  to  disable<br>
  incremental     recursion     using    the<br>
  --no-inc-recursive option.
</p>

<br>
<br>
<br>
<br>

<p>
   -p, --perms
</p>

<br>

<p>
  This option causes the receiving rsync  to<br>
  set  the destination permissions to be the<br>
  same as the source permissions.  (See also<br>
  the  --chmod  option  for  a way to modify<br>
  what rsync considers to be the source per‐<br>
  missions.)
</p>

<br>
<br>
<br>
<br>

<p>
  When  this  option is off, permissions are<br>
  set as follows:
</p>

<br>
<br>
<br>
<br>

<p>
  o      Existing files  (including  updated
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 files)  retain  their existing per‐<br>
 missions, though the  --executabil‐<br>
 ity  option  might  change just the<br>
 execute permission for the file.
</p>

<br>
<br>
<br>
<br>

<p>
  o      New files get their  "normal"  per‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 mission  bits  set  to  the  source<br>
 file’s permissions masked with  the<br>
 receiving  directory’s default per‐<br>
 missions  (either   the   receiving<br>
 process’s umask, or the permissions<br>
 specified   via   the   destination<br>
 directory’s default ACL), and their<br>
 special  permission  bits  disabled<br>
 except  in  the  case  where  a new<br>
 directory  inherits  a  setgid  bit<br>
 from its parent directory.
</p>

<br>
<br>
<br>
<br>

<p>
  Thus, when --perms and --executability are<br>
  both disabled,  rsync’s  behavior  is  the<br>
  same as that of other file-copy utilities,<br>
  such as cp(1) and tar(1).
</p>

<br>
<br>
<br>
<br>

<p>
  In  summary:  to  give  destination  files<br>
  (both old and new) the source permissions,<br>
  use --perms.  To give new files the desti‐<br>
  nation-default  permissions (while leaving<br>
  existing files unchanged), make sure  that<br>
  the   --perms   option   is  off  and  use<br>
  --chmod=ugo=rwX (which  ensures  that  all<br>
  non-masked  bits  get  enabled).  If you’d<br>
  care to make this latter  behavior  easier<br>
  to type, you could define a popt alias for<br>
  it, such as putting this line in the  file<br>
  ~/.popt  (the  following  defines  the  -Z<br>
  option, and includes  --no-g  to  use  the<br>
  default group of the destination dir):
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync    alias    -Z    --no-p   --no-g
</p>

<br>

<p>
  --chmod=ugo=rwX
</p>

<br>
<br>
<br>
<br>

<p>
  You could then use this new  option  in  a<br>
  command such as this one:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync -avZ src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  (Caveat: make sure that -a does not follow<br>
  -Z, or it will re-enable the two  "--no-*"<br>
  options mentioned above.)
</p>

<br>
<br>
<br>
<br>

<p>
  The preservation of the destination’s set‐<br>
  gid bit on newly-created directories  when<br>
  --perms  is  off was added in rsync 2.6.7.<br>
  Older rsync versions erroneously preserved<br>
  the  three  special  permission  bits  for<br>
  newly-created files when --perms was  off,<br>
  while  overriding the destination’s setgid<br>
  bit setting on a newly-created  directory.<br>
  Default  ACL  observance  was added to the<br>
  ACL patch for rsync 2.6.7,  so  older  (or<br>
  non-ACL-enabled) rsyncs use the umask even<br>
  if default ACLs  are  present.   (Keep  in<br>
  mind that it is the version of the receiv‐<br>
  ing rsync that affects these behaviors.)
</p>

<br>
<br>
<br>
<br>

<p>
   -E, --executability
</p>

<br>

<p>
  This option causes rsync to  preserve  the<br>
  executability  (or  non-executability)  of<br>
  regular files when --perms is not enabled.<br>
  A  regular  file  is considered to be exe‐<br>
  cutable if at least one ’x’ is  turned  on<br>
  in its permissions.  When an existing des‐<br>
  tination file’s executability differs from<br>
  that  of  the  corresponding  source file,<br>
  rsync modifies the destination file’s per‐<br>
  missions as follows:
</p>

<br>
<br>
<br>
<br>

<p>
  o      To   make  a  file  non-executable,
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 rsync turns off all its ’x’ permis‐<br>
 sions.
</p>

<br>
<br>
<br>
<br>

<p>
  o      To  make  a  file executable, rsync
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 turns on each ’x’  permission  that<br>
 has  a corresponding ’r’ permission<br>
 enabled.
</p>

<br>
<br>
<br>
<br>

<p>
  If --perms  is  enabled,  this  option  is<br>
  ignored.
</p>

<br>
<br>
<br>
<br>

<p>
   -A, --acls
</p>

<br>

<p>
  This  option  causes  rsync  to update the<br>
  destination ACLs to be  the  same  as  the<br>
  source  ACLs.   The  option  also  implies<br>
  --perms.
</p>

<br>
<br>
<br>
<br>

<p>
  The source and  destination  systems  must<br>
  have   compatible  ACL  entries  for  this<br>
  option  to   work   properly.    See   the<br>
  --fake-super  option  for  a way to backup<br>
  and restore ACLs that are not compatible.
</p>

<br>
<br>
<br>
<br>

<p>
   -X, --xattrs
</p>

<br>

<p>
  This option causes  rsync  to  update  the<br>
  destination  extended attributes to be the<br>
  same as the source ones.
</p>

<br>
<br>
<br>
<br>

<p>
  For       systems       that       support<br>
  extended-attribute   namespaces,   a  copy<br>
  being done  by  a  super-user  copies  all<br>
  namespaces except system.*.  A normal user<br>
  only copies the user.* namespace.   To  be<br>
  able to backup and restore non-user names‐<br>
  paces  as   a   normal   user,   see   the<br>
  --fake-super option.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that this option does not copy rsyncs<br>
  special xattr values (e.g. those  used  by<br>
  --fake-super) unless you repeat the option<br>
  (e.g. -XX).  This "copy all  xattrs"  mode<br>
  cannot be used with --fake-super.
</p>

<br>
<br>
<br>
<br>

<p>
   --chmod
</p>

<br>

<p>
  This  option  tells  rsync to apply one or<br>
  more comma-separated "chmod" modes to  the<br>
  permission  of  the files in the transfer.<br>
  The resulting value is treated  as  though<br>
  it  were  the permissions that the sending<br>
  side supplied for the  file,  which  means<br>
  that  this  option  can  seem  to  have no<br>
  effect on existing files if --perms is not<br>
  enabled.
</p>

<br>
<br>
<br>
<br>

<p>
  In  addition  to  the normal parsing rules<br>
  specified in the chmod(1) manpage, you can<br>
  specify  an item that should only apply to<br>
  a directory by prefixing it with a ’D’, or<br>
  specify  an item that should only apply to<br>
  a file by prefixing it with  a  ’F’.   For<br>
  example,  the  following  will ensure that<br>
  all directories get marked  set-gid,  that<br>
  no files are other-writable, that both are<br>
  user-writable and group-writable, and that<br>
  both  have consistent executability across<br>
  all bits:
</p>

<br>
<br>
<br>
<br>

<p>
  --chmod=Dg+s,ug+w,Fo-w,+X
</p>

<br>
<br>
<br>
<br>

<p>
  Using octal mode numbers is also allowed:
</p>

<br>
<br>
<br>
<br>

<p>
  --chmod=D2775,F664
</p>

<br>
<br>
<br>
<br>

<p>
  It  is  also  legal  to  specify  multiple<br>
  --chmod options, as each additional option<br>
  is just appended to the list of changes to<br>
  make.
</p>

<br>
<br>
<br>
<br>

<p>
  See   the   --perms   and  --executability<br>
  options for how the  resulting  permission<br>
  value  can  be applied to the files in the<br>
  transfer.
</p>

<br>
<br>
<br>
<br>

<p>
   -o, --owner
</p>

<br>

<p>
  This option causes rsync to set the  owner<br>
  of  the destination file to be the same as<br>
  the source file, but only if the receiving<br>
  rsync  is being run as the super-user (see<br>
  also   the   --super   and    --fake-super<br>
  options).   Without this option, the owner<br>
  of new and/or transferred files are set to<br>
  the invoking user on the receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  The  preservation  of ownership will asso‐<br>
  ciate matching names by default,  but  may<br>
  fall  back  to using the ID number in some<br>
  circumstances (see also the  --numeric-ids<br>
  option for a full discussion).
</p>

<br>
<br>
<br>
<br>

<p>
   -g, --group
</p>

<br>

<p>
  This  option causes rsync to set the group<br>
  of the destination file to be the same  as<br>
  the source file.  If the receiving program<br>
  is not running as the  super-user  (or  if<br>
  --no-super  was  specified),  only  groups<br>
  that the invoking user  on  the  receiving<br>
  side  is  a  member  of will be preserved.<br>
  Without this option, the group is  set  to<br>
  the  default group of the invoking user on<br>
  the receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  The preservation of group information will<br>
  associate  matching  names by default, but<br>
  may fall back to using the  ID  number  in<br>
  some    circumstances    (see   also   the<br>
  --numeric-ids option for  a  full  discus‐<br>
  sion).
</p>

<br>
<br>
<br>
<br>

<p>
   --devices
</p>

<br>

<p>
  This option causes rsync to transfer char‐<br>
  acter and block device files to the remote<br>
  system  to  recreate  these devices.  This<br>
  option has  no  effect  if  the  receiving<br>
  rsync  is  not  run as the super-user (see<br>
  also   the   --super   and    --fake-super<br>
  options).
</p>

<br>
<br>
<br>
<br>

<p>
   --specials
</p>

<br>

<p>
  This  option causes rsync to transfer spe‐<br>
  cial  files  such  as  named  sockets  and<br>
  fifos.
</p>

<br>
<br>
<br>
<br>

<p>
   -D     The  -D  option is equivalent to --devices
</p>

<br>

<p>
  --specials.
</p>

<br>
<br>
<br>
<br>

<p>
   -t, --times
</p>

<br>

<p>
  This tells rsync to transfer  modification<br>
  times along with the files and update them<br>
  on the remote system.  Note that  if  this<br>
  option  is not used, the optimization that<br>
  excludes files that have not been modified<br>
  cannot  be  effective;  in  other words, a<br>
  missing -t  or  -a  will  cause  the  next<br>
  transfer to behave as if it used -I, caus‐<br>
  ing  all  files  to  be  updated   (though<br>
  rsync’s delta-transfer algorithm will make<br>
  the update fairly efficient if  the  files<br>
  haven’t actually changed, you’re much bet‐<br>
  ter off using -t).
</p>

<br>
<br>
<br>
<br>

<p>
   -O, --omit-dir-times
</p>

<br>

<p>
  This tells rsync to omit directories  when<br>
  it  is  preserving modification times (see<br>
  --times).  If NFS is sharing the  directo‐<br>
  ries  on  the receiving side, it is a good<br>
  idea to use -O.  This option  is  inferred<br>
  if you use --backup without --backup-dir.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  also  has the side-effect of<br>
  avoiding early creation of directories  in<br>
  incremental recursion copies.  The default<br>
  --inc-recursive copying normally  does  an<br>
  early-create  pass of all the sub-directo‐<br>
  ries in a parent directory in order for it<br>
  to  be able to then set the modify time of<br>
  the parent directory right  away  (without<br>
  having  to  delay  that  until  a bunch of<br>
  recursive  copying  has  finished).   This<br>
  early-create  idiom  is  not  necessary if<br>
  directory modify times are not being  pre‐<br>
  served,   so   it   is   skipped.    Since<br>
  early-create directories don’t have  accu‐<br>
  rate mode, mtime, or ownership, the use of<br>
  this option can help when someone wants to<br>
  avoid  these  partially-finished  directo‐<br>
  ries.
</p>

<br>
<br>
<br>
<br>

<p>
   -J, --omit-link-times
</p>

<br>

<p>
  This tells rsync to omit symlinks when  it<br>
  is   preserving  modification  times  (see<br>
  --times).
</p>

<br>
<br>
<br>
<br>

<p>
   --super
</p>

<br>

<p>
  This tells the receiving side  to  attempt<br>
  super-user  activities even if the receiv‐<br>
  ing rsync wasn’t run  by  the  super-user.<br>
  These activities include: preserving users<br>
  via the  --owner  option,  preserving  all<br>
  groups   (not   just  the  current  user’s<br>
  groups) via the --groups option, and copy‐<br>
  ing  devices  via  the  --devices  option.<br>
  This is useful for systems that allow such<br>
  activities  without  being the super-user,<br>
  and also for ensuring that  you  will  get<br>
  errors  if  the receiving side isn’t being<br>
  run  as  the  super-user.   To  turn   off<br>
  super-user  activities, the super-user can<br>
  use --no-super.
</p>

<br>
<br>
<br>
<br>

<p>
   --fake-super
</p>

<br>

<p>
  When this option is enabled,  rsync  simu‐<br>
  lates   super-user   activities   by  sav‐<br>
  ing/restoring  the  privileged  attributes<br>
  via  special  extended attributes that are<br>
  attached to each file (as  needed).   This<br>
  includes the file’s owner and group (if it<br>
  is not the  default),  the  file’s  device<br>
  info  (device  &amp;amp; special files are created<br>
  as empty text files), and  any  permission<br>
  bits  that we won’t allow to be set on the<br>
  real  file  (e.g.   the  real  file   gets<br>
  u-s,g-s,o-t  for  safety)  or  that  would<br>
  limit the owner’s access (since  the  real<br>
  super-user   can  always  access/change  a<br>
  file, the files we create  can  always  be<br>
  accessed/changed  by  the  creating user).<br>
  This option also handles ACLs  (if  --acls<br>
  was   specified)   and  non-user  extended<br>
  attributes (if --xattrs was specified).
</p>

<br>
<br>
<br>
<br>

<p>
  This is a good way to backup data  without<br>
  using a super-user, and to store ACLs from<br>
  incompatible systems.
</p>

<br>
<br>
<br>
<br>

<p>
  The --fake-super option only  affects  the<br>
  side  where the option is used.  To affect<br>
  the remote side of a remote-shell  connec‐<br>
  tion, use the --remote-option (-M) option:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
rsync     -av    -M--fake-super    /src/
</p>

<br>

<p>
  host:/dest/
</p>

<br>
<br>
<br>
<br>

<p>
  For a local copy, this option affects both<br>
  the  source  and  the destination.  If you<br>
  wish a local copy to  enable  this  option<br>
  just  for  the  destination files, specify<br>
  -M--fake-super.  If you wish a local  copy<br>
  to  enable this option just for the source<br>
  files,    combine    --fake-super     with<br>
  -M--super.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option is overridden by both --super<br>
  and --no-super.
</p>

<br>
<br>
<br>
<br>

<p>
  See also the "fake super" setting  in  the<br>
  daemon’s rsyncd.conf file.
</p>

<br>
<br>
<br>
<br>

<p>
   -S, --sparse
</p>

<br>

<p>
  Try  to handle sparse files efficiently so<br>
  they take up less space  on  the  destina‐<br>
  tion.   Conflicts  with  --inplace because<br>
  it’s not possible to overwrite data  in  a<br>
  sparse fashion.
</p>

<br>
<br>
<br>
<br>

<p>
   --preallocate
</p>

<br>

<p>
  This  tells  the receiver to allocate each<br>
  destination  file  to  its  eventual  size<br>
  before  writing  data  to the file.  Rsync<br>
  will only use  the  real  filesystem-level<br>
  preallocation  support provided by Linux’s<br>
  fallocate(2)  system  call   or   Cygwin’s<br>
  posix_fallocate(3),  not  the  slow  glibc<br>
  implementation that  writes  a  zero  byte<br>
  into each block.
</p>

<br>
<br>
<br>
<br>

<p>
  Without  this option, larger files may not<br>
  be entirely contiguous on the  filesystem,<br>
  but  with  this option rsync will probably<br>
  copy more slowly.  If the  destination  is<br>
  not  an extent-supporting filesystem (such<br>
  as ext4, xfs, NTFS, etc.), this option may<br>
  have no positive effect at all.
</p>

<br>
<br>
<br>
<br>

<p>
   -n, --dry-run
</p>

<br>

<p>
  This  makes rsync perform a trial run that<br>
  doesn’t make  any  changes  (and  produces<br>
  mostly the same output as a real run).  It<br>
  is most commonly used in combination  with<br>
  the   -v,  --verbose  and/or  -i,  --item‐<br>
  ize-changes options to see what  an  rsync<br>
  command is going to do before one actually<br>
  runs it.
</p>

<br>
<br>
<br>
<br>

<p>
  The output of  --itemize-changes  is  sup‐<br>
  posed  to be exactly the same on a dry run<br>
  and a subsequent real run (barring  inten‐<br>
  tional trickery and system call failures);<br>
  if it isn’t, that’s a bug.   Other  output<br>
  should be mostly unchanged, but may differ<br>
  in some areas.  Notably, a  dry  run  does<br>
  not  send  the actual data for file trans‐<br>
  fers, so --progress  has  no  effect,  the<br>
  "bytes  sent",  "bytes received", "literal<br>
  data", and "matched data"  statistics  are<br>
  too  small,  and  the  "speedup"  value is<br>
  equivalent to a run where no  file  trans‐<br>
  fers were needed.
</p>

<br>
<br>
<br>
<br>

<p>
   -W, --whole-file
</p>

<br>

<p>
  With  this  option  rsync’s delta-transfer<br>
  algorithm is not used and the  whole  file<br>
  is  sent  as-is instead.  The transfer may<br>
  be faster if this option is used when  the<br>
  bandwidth  between the source and destina‐<br>
  tion machines is higher than the bandwidth<br>
  to  disk  (especially  when  the "disk" is<br>
  actually a networked filesystem).  This is<br>
  the  default when both the source and des‐<br>
  tination are specified as local paths, but<br>
  only  if  no  batch-writing  option  is in<br>
  effect.
</p>

<br>
<br>
<br>
<br>

<p>
   -x, --one-file-system
</p>

<br>

<p>
  This  tells  rsync  to  avoid  crossing  a<br>
  filesystem  boundary when recursing.  This<br>
  does not limit the user’s ability to spec‐<br>
  ify  items  to copy from multiple filesys‐<br>
  tems, just rsync’s recursion  through  the<br>
  hierarchy  of each directory that the user<br>
  specified, and also the  analogous  recur‐<br>
  sion  on  the  receiving side during dele‐<br>
  tion.  Also keep in mind that rsync treats<br>
  a "bind" mount to the same device as being<br>
  on the same filesystem.
</p>

<br>
<br>
<br>
<br>

<p>
  If this option is  repeated,  rsync  omits<br>
  all mount-point directories from the copy.<br>
  Otherwise, it includes an empty  directory<br>
  at  each  mount-point it encounters (using<br>
  the attributes of  the  mounted  directory<br>
  because    those    of    the   underlying<br>
  mount-point directory are inaccessible).
</p>

<br>
<br>
<br>
<br>

<p>
  If rsync has been told  to  collapse  sym‐<br>
  links       (via      --copy-links      or<br>
  --copy-unsafe-links),  a  symlink   to   a<br>
  directory  on  another  device  is treated<br>
  like   a   mount-point.     Symlinks    to<br>
  non-directories  are  unaffected  by  this<br>
  option.
</p>

<br>
<br>
<br>
<br>

<p>
   --existing, --ignore-non-existing
</p>

<br>

<p>
  This tells rsync to  skip  creating  files<br>
  (including  directories) that do not exist<br>
  yet on the destination.  If this option is<br>
  combined    with   the   --ignore-existing<br>
  option, no files will  be  updated  (which<br>
  can  be  useful  if  all you want to do is<br>
  delete extraneous files).
</p>

<br>
<br>
<br>
<br>

<p>
  This option is a  transfer  rule,  not  an<br>
  exclude,  so  it  doesn’t  affect the data<br>
  that goes into the file-lists, and thus it<br>
  doesn’t  affect deletions.  It just limits<br>
  the files that the receiver requests to be<br>
  transferred.
</p>

<br>
<br>
<br>
<br>

<p>
   --ignore-existing
</p>

<br>

<p>
  This  tells  rsync  to skip updating files<br>
  that  already  exist  on  the  destination<br>
  (this  does  not  ignore existing directo‐<br>
  ries, or nothing  would  get  done).   See<br>
  also --existing.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  is  a  transfer rule, not an<br>
  exclude, so it  doesn’t  affect  the  data<br>
  that goes into the file-lists, and thus it<br>
  doesn’t affect deletions.  It just  limits<br>
  the files that the receiver requests to be<br>
  transferred.
</p>

<br>
<br>
<br>
<br>

<p>
  This option can be useful for those  doing<br>
  backups  using the --link-dest option when<br>
  they need to continue a  backup  run  that<br>
  got  interrupted.  Since a --link-dest run<br>
  is copied into a new  directory  hierarchy<br>
  (when it is used properly), using --ignore<br>
  existing will ensure that the already-han‐<br>
  dled files don’t get tweaked (which avoids<br>
  a change in permissions on the hard-linked<br>
  files).   This  does mean that this option<br>
  is only looking at the existing  files  in<br>
  the destination hierarchy itself.
</p>

<br>
<br>
<br>
<br>

<p>
   --remove-source-files
</p>

<br>

<p>
  This  tells rsync to remove from the send‐<br>
  ing side the files  (meaning  non-directo‐<br>
  ries)  that are a part of the transfer and<br>
  have been successfully duplicated  on  the<br>
  receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that you should only use this option<br>
  on source files that  are  quiescent.   If<br>
  you are using this to move files that show<br>
  up  in  a  particular  directory  over  to<br>
  another  host, make sure that the finished<br>
  files get renamed into the  source  direc‐<br>
  tory,  not  directly  written  into it, so<br>
  that rsync can’t possibly transfer a  file<br>
  that  is  not  yet  fully written.  If you<br>
  can’t first write the files into a differ‐<br>
  ent  directory,  you  should  use a naming<br>
  idiom that lets rsync  avoid  transferring<br>
  files that are not yet finished (e.g. name<br>
  the file "foo.new"  when  it  is  written,<br>
  rename  it  to  "foo" when it is done, and<br>
  then use the option --exclude='*.new'  for<br>
  the rsync transfer).
</p>

<br>
<br>
<br>
<br>

<p>
  Starting  with  3.1.0, rsync will skip the<br>
  sender-side removal (and output an  error)<br>
  if  the file’s size or modify time has not<br>
  stayed unchanged.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete
</p>

<br>

<p>
  This  tells  rsync  to  delete  extraneous<br>
  files  from  the receiving side (ones that<br>
  aren’t on the sending side), but only  for<br>
  the  directories  that  are being synchro‐<br>
  nized.  You must have asked rsync to  send<br>
  the whole directory (e.g. "dir" or "dir/")<br>
  without using a wildcard  for  the  direc‐<br>
  tory’s  contents  (e.g. "dir/*") since the<br>
  wildcard is  expanded  by  the  shell  and<br>
  rsync  thus  gets  a  request  to transfer<br>
  individual files, not  the  files’  parent<br>
  directory.   Files  that are excluded from<br>
  the transfer are also excluded from  being<br>
  deleted     unless     you     use     the<br>
  --delete-excluded option or mark the rules<br>
  as  only matching on the sending side (see<br>
  the include/exclude modifiers in the  FIL‐<br>
  TER RULES section).
</p>

<br>
<br>
<br>
<br>

<p>
  Prior  to  rsync  2.6.7, this option would<br>
  have  no  effect  unless  --recursive  was<br>
  enabled.   Beginning with 2.6.7, deletions<br>
  will  also  occur  when  --dirs  (-d)   is<br>
  enabled,  but  only  for directories whose<br>
  contents are being copied.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  can  be  dangerous  if  used<br>
  incorrectly!   It  is  a very good idea to<br>
  first try a run using the --dry-run option<br>
  (-n)  to  see  what  files are going to be<br>
  deleted.
</p>

<br>
<br>
<br>
<br>

<p>
  If  the  sending  side  detects  any   I/O<br>
  errors,  then the deletion of any files at<br>
  the destination will be automatically dis‐<br>
  abled.   This   is  to  prevent  temporary<br>
  filesystem failures (such as  NFS  errors)<br>
  on the sending side from causing a massive<br>
  deletion of files on the destination.  You<br>
  can override this with the --ignore-errors<br>
  option.
</p>

<br>
<br>
<br>
<br>

<p>
  The --delete option may be  combined  with<br>
  one  of  the --delete-WHEN options without<br>
  conflict, as  well  as  --delete-excluded.<br>
  However,  if  none  of  the  --delete-WHEN<br>
  options are specified, rsync  will  choose<br>
  the --delete-during algorithm when talking<br>
  to  rsync  3.0.0   or   newer,   and   the<br>
  --delete-before  algorithm when talking to<br>
  an older rsync.  See  also  --delete-delay<br>
  and --delete-after.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-before
</p>

<br>

<p>
  Request  that  the  file-deletions  on the<br>
  receiving side be done before the transfer<br>
  starts.   See  --delete (which is implied)<br>
  for more details on file-deletion.
</p>

<br>
<br>
<br>
<br>

<p>
  Deleting before the transfer is helpful if<br>
  the  filesystem  is  tight  for  space and<br>
  removing extraneous files  would  help  to<br>
  make  the  transfer possible.  However, it<br>
  does introduce a delay before the start of<br>
  the  transfer,  and this delay might cause<br>
  the transfer to timeout (if --timeout  was<br>
  specified).   It  also forces rsync to use<br>
  the old, non-incremental  recursion  algo‐<br>
  rithm  that requires rsync to scan all the<br>
  files in the transfer into memory at  once<br>
  (see --recursive).
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-during, --del
</p>

<br>

<p>
  Request  that  the  file-deletions  on the<br>
  receiving side be  done  incrementally  as<br>
  the  transfer  happens.  The per-directory<br>
  delete scan  is  done  right  before  each<br>
  directory  is  checked  for updates, so it<br>
  behaves    like    a    more     efficient<br>
  --delete-before, including doing the dele‐<br>
  tions prior to  any  per-directory  filter<br>
  files  being  updated.   This  option  was<br>
  first added in rsync version  2.6.4.   See<br>
  --delete   (which  is  implied)  for  more<br>
  details on file-deletion.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-delay
</p>

<br>

<p>
  Request that  the  file-deletions  on  the<br>
  receiving  side  be  computed  during  the<br>
  transfer (like --delete-during), and  then<br>
  removed   after  the  transfer  completes.<br>
  This  is   useful   when   combined   with<br>
  --delay-updates  and/or  --fuzzy,  and  is<br>
  more efficient than  using  --delete-after<br>
  (but   can   behave   differently,   since<br>
  --delete-after computes the deletions in a<br>
  separate pass after all updates are done).<br>
  If the number of removed  files  overflows<br>
  an  internal buffer, a temporary file will<br>
  be created on the receiving side  to  hold<br>
  the  names  (it  is removed while open, so<br>
  you shouldn’t see it during the transfer).<br>
  If  the  creation  of  the  temporary file<br>
  fails, rsync will  try  to  fall  back  to<br>
  using  --delete-after  (which it cannot do<br>
  if --recursive  is  doing  an  incremental<br>
  scan).   See  --delete  (which is implied)<br>
  for more details on file-deletion.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-after
</p>

<br>

<p>
  Request that  the  file-deletions  on  the<br>
  receiving  side be done after the transfer<br>
  has completed.  This is useful if you  are<br>
  sending new per-directory merge files as a<br>
  part of the transfer and  you  want  their<br>
  exclusions  to  take effect for the delete<br>
  phase of the current  transfer.   It  also<br>
  forces rsync to use the old, non-incremen‐<br>
  tal  recursion  algorithm  that   requires<br>
  rsync  to scan all the files in the trans‐<br>
  fer into memory at once (see --recursive).<br>
  See  --delete  (which is implied) for more<br>
  details on file-deletion.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-excluded
</p>

<br>

<p>
  In addition to deleting the files  on  the<br>
  receiving side that are not on the sending<br>
  side, this tells rsync to also delete  any<br>
  files  on  the  receiving  side  that  are<br>
  excluded (see --exclude).  See the  FILTER<br>
  RULES section for a way to make individual<br>
  exclusions  behave   this   way   on   the<br>
  receiver,  and  for a way to protect files<br>
  from  --delete-excluded.    See   --delete<br>
  (which  is  implied)  for  more details on<br>
  file-deletion.
</p>

<br>
<br>
<br>
<br>

<p>
   --ignore-missing-args
</p>

<br>

<p>
  When rsync is first processing the explic‐<br>
  itly  requested  source  files  (e.g. com‐<br>
  mand-line   arguments   or    --files-from<br>
  entries),  it  is normally an error if the<br>
  file cannot be found.   This  option  sup‐<br>
  presses  that  error,  and does not try to<br>
  transfer the file.  This does  not  affect<br>
  subsequent  vanished-file errors if a file<br>
  was initially  found  to  be  present  and<br>
  later is no longer there.
</p>

<br>
<br>
<br>
<br>

<p>
   --delete-missing-args
</p>

<br>

<p>
  This  option  takes  the  behavior of (the<br>
  implied)  --ignore-missing-args  option  a<br>
  step   farther:   each  missing  arg  will<br>
  become a deletion request  of  the  corre‐<br>
  sponding destination file on the receiving<br>
  side (should it exist).  If  the  destina‐<br>
  tion  file  is  a  non-empty directory, it<br>
  will  only  be  successfully  deleted   if<br>
  --force  or --delete are in effect.  Other<br>
  than that, this option is  independent  of<br>
  any other type of delete processing.
</p>

<br>
<br>
<br>
<br>

<p>
  The  missing  source files are represented<br>
  by special file-list entries which display<br>
  as  a  "*missing" entry in the --list-only<br>
  output.
</p>

<br>
<br>
<br>
<br>

<p>
   --ignore-errors
</p>

<br>

<p>
  Tells --delete  to  go  ahead  and  delete<br>
  files even when there are I/O errors.
</p>

<br>
<br>
<br>
<br>

<p>
   --force
</p>

<br>

<p>
  This   option  tells  rsync  to  delete  a<br>
  non-empty  directory  when  it  is  to  be<br>
  replaced by a non-directory.  This is only<br>
  relevant if deletions are not active  (see<br>
  --delete for details).
</p>

<br>
<br>
<br>
<br>

<p>
  Note  for  older  rsync  versions: --force<br>
  used  to  still  be  required  when  using<br>
  --delete-after,   and   it   used   to  be<br>
  non-functional  unless   the   --recursive<br>
  option was also enabled.
</p>

<br>
<br>
<br>
<br>

<p>
   --max-delete=NUM
</p>

<br>

<p>
  This  tells  rsync not to delete more than<br>
  NUM files or directories.  If  that  limit<br>
  is  exceeded,  all  further  deletions are<br>
  skipped through the end of  the  transfer.<br>
  At   the  end,  rsync  outputs  a  warning<br>
  (including a count of  the  skipped  dele‐<br>
  tions)  and exits with an error code of 25<br>
  (unless some more important  error  condi‐<br>
  tion also occurred).
</p>

<br>
<br>
<br>
<br>

<p>
  Beginning  with  version  3.0.0,  you  may<br>
  specify --max-delete=0 to be warned  about<br>
  any  extraneous  files  in the destination<br>
  without  removing  any  of  them.    Older<br>
  clients  interpreted  this as "unlimited",<br>
  so if you  don’t  know  what  version  the<br>
  client  is,  you  can use the less obvious<br>
  --max-delete=-1 as  a  backward-compatible<br>
  way   to  specify  that  no  deletions  be<br>
  allowed (though really old versions didn’t<br>
  warn when the limit was exceeded).
</p>

<br>
<br>
<br>
<br>

<p>
   --max-size=SIZE
</p>

<br>

<p>
  This tells rsync to avoid transferring any<br>
  file that is  larger  than  the  specified<br>
  SIZE.  The SIZE value can be suffixed with<br>
  a string to indicate  a  size  multiplier,<br>
  and   may  be  a  fractional  value  (e.g.<br>
  "--max-size=1.5m").
</p>

<br>
<br>
<br>
<br>

<p>
  This option is a  transfer  rule,  not  an<br>
  exclude,  so  it  doesn’t  affect the data<br>
  that goes into the file-lists, and thus it<br>
  doesn’t  affect deletions.  It just limits<br>
  the files that the receiver requests to be<br>
  transferred.
</p>

<br>
<br>
<br>
<br>

<p>
  The  suffixes  are  as  follows:  "K"  (or<br>
  "KiB")  is  a  kibibyte  (1024),  "M"  (or<br>
  "MiB")  is a mebibyte (1024*1024), and "G"<br>
  (or "GiB") is a gibibyte (1024*1024*1024).<br>
  If  you  want  the  multiplier  to be 1000<br>
  instead of 1024, use "KB", "MB", or  "GB".<br>
  (Note: lower-case is also accepted for all<br>
  values.)  Finally, if the suffix  ends  in<br>
  either  "+1"  or  "-1",  the value will be<br>
  offset by one byte in the indicated direc‐<br>
  tion.
</p>

<br>
<br>
<br>
<br>

<p>
  Examples:  --max-size=1.5mb-1  is  1499999<br>
  bytes, and --max-size=2g+1  is  2147483649<br>
  bytes.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  rsync  versions prior to 3.1.0<br>
  did not allow --max-size=0.
</p>

<br>
<br>
<br>
<br>

<p>
   --min-size=SIZE
</p>

<br>

<p>
  This tells rsync to avoid transferring any<br>
  file  that  is  smaller than the specified<br>
  SIZE, which can help in  not  transferring<br>
  small,  junk  files.   See  the --max-size<br>
  option for a description of SIZE and other<br>
  information.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  rsync  versions prior to 3.1.0<br>
  did not allow --min-size=0.
</p>

<br>
<br>
<br>
<br>

<p>
   -B, --block-size=BLOCKSIZE
</p>

<br>

<p>
  This forces the block size used in rsync’s<br>
  delta-transfer algorithm to a fixed value.<br>
  It is normally selected based on the  size<br>
  of each file being updated.  See the tech‐<br>
  nical report for details.
</p>

<br>
<br>
<br>
<br>

<p>
   -e, --rsh=COMMAND
</p>

<br>

<p>
  This option allows you to choose an alter‐<br>
  native  remote  shell  program  to use for<br>
  communication between the local and remote<br>
  copies  of rsync. Typically, rsync is con‐<br>
  figured to use ssh by default, but you may<br>
  prefer to use rsh on a local network.
</p>

<br>
<br>
<br>
<br>

<p>
  If    this    option    is    used    with<br>
  [user@]host::module/path, then the  remote<br>
  shell COMMAND will be used to run an rsync<br>
  daemon on the remote host,  and  all  data<br>
  will  be  transmitted  through that remote<br>
  shell connection, rather  than  through  a<br>
  direct  socket  connection  to  a  running<br>
  rsync daemon on the remote host.  See  the<br>
  section "USING RSYNC-DAEMON FEATURES VIA A<br>
  REMOTE-SHELL CONNECTION" above.
</p>

<br>
<br>
<br>
<br>

<p>
  Command-line arguments  are  permitted  in<br>
  COMMAND provided that COMMAND is presented<br>
  to rsync as a single argument.   You  must<br>
  use  spaces (not tabs or other whitespace)<br>
  to separate the command and args from each<br>
  other, and you can use single- and/or dou‐<br>
  ble-quotes to preserve spaces in an  argu‐<br>
  ment  (but  not  backslashes).   Note that<br>
  doubling  a  single-quote  inside  a  sin‐<br>
  gle-quoted   string   gives   you  a  sin‐<br>
  gle-quote;  likewise   for   double-quotes<br>
  (though you need to pay attention to which<br>
  quotes your shell  is  parsing  and  which<br>
  quotes rsync is parsing).  Some examples:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  -e 'ssh -p 2234'<br>
  -e  'ssh  -o  "ProxyCommand  nohup ssh
</p>

<br>

<p>
  firewall nc -w1 %h %p"'
</p>

<br>
<br>
<br>
<br>

<p>
  (Note that ssh users can alternately  cus‐<br>
  tomize  site-specific  connect  options in<br>
  their .ssh/config file.)
</p>

<br>
<br>
<br>
<br>

<p>
  You can also choose the remote shell  pro‐<br>
  gram using the RSYNC_RSH environment vari‐<br>
  able, which accepts the same range of val‐<br>
  ues as -e.
</p>

<br>
<br>
<br>
<br>

<p>
  See also the --blocking-io option which is<br>
  affected by this option.
</p>

<br>
<br>
<br>
<br>

<p>
   --rsync-path=PROGRAM
</p>

<br>

<p>
  Use this to specify what program is to  be<br>
  run  on  the  remote  machine  to start-up<br>
  rsync.  Often used when rsync  is  not  in<br>
  the   default  remote-shell’s  path  (e.g.<br>
  --rsync-path=/usr/local/bin/rsync).   Note<br>
  that  PROGRAM  is  run  with the help of a<br>
  shell, so it can be any  program,  script,<br>
  or  command sequence you’d care to run, so<br>
  long as it  does  not  corrupt  the  stan‐<br>
  dard-in &amp;amp; standard-out that rsync is using<br>
  to communicate.
</p>

<br>
<br>
<br>
<br>

<p>
  One tricky example is to set  a  different<br>
  default  directory  on  the remote machine<br>
  for use with the --relative  option.   For<br>
  instance:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync  -avR  --rsync-path="cd  /a/b &amp;amp;&amp;amp;
</p>

<br>

<p>
  rsync" host:c/d /e/
</p>

<br>
<br>
<br>
<br>

<p>
   -M, --remote-option=OPTION
</p>

<br>

<p>
  This option is used for more advanced sit‐<br>
  uations  where you want certain effects to<br>
  be limited to one  side  of  the  transfer<br>
  only.   For  instance, if you want to pass<br>
  --log-file=FILE and  --fake-super  to  the<br>
  remote system, specify it like this:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync     -av     -M    --log-file=foo
</p>

<br>

<p>
  -M--fake-super src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  If you want to have an option affect  only<br>
  the  local side of a transfer when it nor‐<br>
  mally affects both sides, send  its  nega‐<br>
  tion to the remote side.  Like this:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync -av -x -M--no-x src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  Be  cautious using this, as it is possible<br>
  to toggle an option that will cause  rsync<br>
  to  have  a different idea about what data<br>
  to expect next over the socket,  and  that<br>
  will make it fail in a cryptic fashion.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  it  is  best to use a separate<br>
  --remote-option for each option  you  want<br>
  to  pass.  This makes your useage compati‐<br>
  ble with the  --protect-args  option.   If<br>
  that  option  is  off,  any spaces in your<br>
  remote options will be split by the remote<br>
  shell  unless  you  take  steps to protect<br>
  them.
</p>

<br>
<br>
<br>
<br>

<p>
  When  performing  a  local  transfer,  the<br>
  "local"   side   is  the  sender  and  the<br>
  "remote" side is the receiver.
</p>

<br>
<br>
<br>
<br>

<p>
  Note   some   versions   of    the    popt<br>
  option-parsing  library have a bug in them<br>
  that prevents you from using  an  adjacent<br>
  arg  with  an  equal in it next to a short<br>
  option letter (e.g. -M--log-file=/tmp/foo.<br>
  If  this bug affects your version of popt,<br>
  you can use the version of  popt  that  is<br>
  included with rsync.
</p>

<br>
<br>
<br>
<br>

<p>
   -C, --cvs-exclude
</p>

<br>

<p>
  This is a useful shorthand for excluding a<br>
  broad range of files that you often  don’t<br>
  want  to transfer between systems. It uses<br>
  a similar algorithm to CVS to determine if<br>
  a file should be ignored.
</p>

<br>
<br>
<br>
<br>

<p>
  The exclude list is initialized to exclude<br>
  the following items (these  initial  items<br>
  are marked as perishable -- see the FILTER<br>
  RULES section):
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 RCS SCCS CVS  CVS.adm  RCSLOG  cvs‐<br>
 log.*    tags    TAGS   .make.state<br>
 .nse_depinfo *~ #* .#*  ,*  _$*  *$<br>
 *.old   *.bak  *.BAK  *.orig  *.rej<br>
 .del-* *.a  *.olb  *.o  *.obj  *.so<br>
 *.exe  *.Z  *.elc  *.ln  core .svn/<br>
 .git/ .hg/ .bzr/
</p>

<br>
<br>
<br>
<br>

<p>
  then, files listed in  a  $HOME/.cvsignore<br>
  are added to the list and any files listed<br>
  in the CVSIGNORE environment variable (all<br>
  cvsignore  names  are  delimited by white‐<br>
  space).
</p>

<br>
<br>
<br>
<br>

<p>
  Finally, any file is ignored if it  is  in<br>
  the  same  directory  as a .cvsignore file<br>
  and matches one  of  the  patterns  listed<br>
  therein.   Unlike  rsync’s  filter/exclude<br>
  files, these patterns are split on  white‐<br>
  space.   See  the  cvs(1)  manual for more<br>
  information.
</p>

<br>
<br>
<br>
<br>

<p>
  If  you’re  combining  -C  with  your  own<br>
  --filter rules, you should note that these<br>
  CVS excludes are appended at  the  end  of<br>
  your own rules, regardless of where the -C<br>
  was  placed  on  the  command-line.   This<br>
  makes them a lower priority than any rules<br>
  you specified explicitly.  If you want  to<br>
  control   where  these  CVS  excludes  get<br>
  inserted  into  your  filter  rules,   you<br>
  should  omit  the  -C  as  a  command-line<br>
  option and use  a  combination  of  --fil‐<br>
  ter=:C  and  --filter=-C  (either  on your<br>
  command-line or by putting  the  ":C"  and<br>
  "-C"  rules  into  a filter file with your<br>
  other rules).  The first option  turns  on<br>
  the per-directory scanning for the .cvsig‐<br>
  nore  file.   The  second  option  does  a<br>
  one-time  import  of the CVS excludes men‐<br>
  tioned above.
</p>

<br>
<br>
<br>
<br>

<p>
   -f, --filter=RULE
</p>

<br>

<p>
  This option allows you  to  add  rules  to<br>
  selectively exclude certain files from the<br>
  list of files to be transferred.  This  is<br>
  most  useful  in combination with a recur‐<br>
  sive transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  You may use as many  --filter  options  on<br>
  the  command  line as you like to build up<br>
  the list of files to exclude.  If the fil‐<br>
  ter  contains whitespace, be sure to quote<br>
  it so that the shell  gives  the  rule  to<br>
  rsync  as  a  single  argument.   The text<br>
  below also mentions that you  can  use  an<br>
  underscore to replace the space that sepa‐<br>
  rates a rule from its arg.
</p>

<br>
<br>
<br>
<br>

<p>
  See the FILTER RULES section for  detailed<br>
  information on this option.
</p>

<br>
<br>
<br>
<br>

<p>
   -F     The  -F  option  is a shorthand for adding
</p>

<br>

<p>
  two --filter rules to your  command.   The<br>
  first  time  it is used is a shorthand for<br>
  this rule:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 --filter='dir-merge /.rsync-filter'
</p>

<br>
<br>
<br>
<br>

<p>
  This tells rsync to look for per-directory<br>
  .rsync-filter  files that have been sprin‐<br>
  kled through the hierarchy and  use  their<br>
  rules to filter the files in the transfer.<br>
  If -F is repeated, it is a  shorthand  for<br>
  this rule:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 --filter='exclude .rsync-filter'
</p>

<br>
<br>
<br>
<br>

<p>
  This  filters  out the .rsync-filter files<br>
  themselves from the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  See the FILTER RULES section for  detailed<br>
  information on how these options work.
</p>

<br>
<br>
<br>
<br>

<p>
   --exclude=PATTERN
</p>

<br>

<p>
  This  option  is  a simplified form of the<br>
  --filter  option  that  defaults   to   an<br>
  exclude  rule  and does not allow the full<br>
  rule-parsing  syntax  of   normal   filter<br>
  rules.
</p>

<br>
<br>
<br>
<br>

<p>
  See  the FILTER RULES section for detailed<br>
  information on this option.
</p>

<br>
<br>
<br>
<br>

<p>
   --exclude-from=FILE
</p>

<br>

<p>
  This option is related  to  the  --exclude<br>
  option,  but it specifies a FILE that con‐<br>
  tains exclude  patterns  (one  per  line).<br>
  Blank lines in the file and lines starting<br>
  with ’;’ or ’#’ are ignored.  If  FILE  is<br>
  -,  the  list  will  be read from standard<br>
  input.
</p>

<br>
<br>
<br>
<br>

<p>
   --include=PATTERN
</p>

<br>

<p>
  This option is a simplified  form  of  the<br>
  --filter   option   that  defaults  to  an<br>
  include rule and does not allow  the  full<br>
  rule-parsing   syntax   of  normal  filter<br>
  rules.
</p>

<br>
<br>
<br>
<br>

<p>
  See the FILTER RULES section for  detailed<br>
  information on this option.
</p>

<br>
<br>
<br>
<br>

<p>
   --include-from=FILE
</p>

<br>

<p>
  This  option  is  related to the --include<br>
  option, but it specifies a FILE that  con‐<br>
  tains  include  patterns  (one  per line).<br>
  Blank lines in the file and lines starting<br>
  with  ’;’  or ’#’ are ignored.  If FILE is<br>
  -, the list will  be  read  from  standard<br>
  input.
</p>

<br>
<br>
<br>
<br>

<p>
   --files-from=FILE
</p>

<br>

<p>
  Using  this  option  allows you to specify<br>
  the exact list of files  to  transfer  (as<br>
  read  from  the  specified  FILE  or - for<br>
  standard  input).   It  also  tweaks   the<br>
  default  behavior  of rsync to make trans‐<br>
  ferring  just  the  specified  files   and<br>
  directories easier:
</p>

<br>
<br>
<br>
<br>

<p>
  o      The   --relative   (-R)  option  is
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 implied, which preserves  the  path<br>
 information  that  is specified for<br>
 each  item   in   the   file   (use<br>
 --no-relative or --no-R if you want<br>
 to turn that off).
</p>

<br>
<br>
<br>
<br>

<p>
  o      The --dirs (-d) option is  implied,
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 which will create directories spec‐<br>
 ified in the list on  the  destina‐<br>
 tion  rather  than noisily skipping<br>
 them (use --no-dirs  or  --no-d  if<br>
 you want to turn that off).
</p>

<br>
<br>
<br>
<br>

<p>
  o      The  --archive (-a) option’s behav‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 ior  does  not  imply   --recursive<br>
 (-r),  so specify it explicitly, if<br>
 you want it.
</p>

<br>
<br>
<br>
<br>

<p>
  o      These   side-effects   change   the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 default  state  of  rsync,  so  the<br>
 position of the --files-from option<br>
 on  the command-line has no bearing<br>
 on how  other  options  are  parsed<br>
 (e.g.  -a  works the same before or<br>
 after --files-from, as does  --no-R<br>
 and all other options).
</p>

<br>
<br>
<br>
<br>

<p>
  The  filenames that are read from the FILE<br>
  are all relative to the source dir --  any<br>
  leading  slashes  are  removed and no ".."<br>
  references are allowed to go  higher  than<br>
  the  source  dir.   For example, take this<br>
  command:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync  -a  --files-from=/tmp/foo   /usr
</p>

<br>

<p>
  remote:/backup
</p>

<br>
<br>
<br>
<br>

<p>
  If  /tmp/foo contains the string "bin" (or<br>
  even "/bin"), the /usr/bin directory  will<br>
  be  created  as  /backup/bin on the remote<br>
  host.  If it  contains  "bin/"  (note  the<br>
  trailing slash), the immediate contents of<br>
  the directory would also be sent  (without<br>
  needing  to be explicitly mentioned in the<br>
  file -- this began in version 2.6.4).   In<br>
  both  cases, if the -r option was enabled,<br>
  that dir’s entire hierarchy would also  be<br>
  transferred (keep in mind that -r needs to<br>
  be specified explicitly with --files-from,<br>
  since it is not implied by -a).  Also note<br>
  that  the  effect  of  the   (enabled   by<br>
  default) --relative option is to duplicate<br>
  only the path info that is read  from  the<br>
  file  -- it does not force the duplication<br>
  of the  source-spec  path  (/usr  in  this<br>
  case).
</p>

<br>
<br>
<br>
<br>

<p>
  In  addition, the --files-from file can be<br>
  read from the remote host instead  of  the<br>
  local  host  if  you  specify a "host:" in<br>
  front of the file (the host must match one<br>
  end of the transfer).  As a short-cut, you<br>
  can specify just a prefix of ":"  to  mean<br>
  "use the remote end of the transfer".  For<br>
  example:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
 rsync -a  --files-from=:/path/file-list
</p>

<br>

<p>
  src:/ /tmp/copy
</p>

<br>
<br>
<br>
<br>

<p>
  This would copy all the files specified in<br>
  the /path/file-list file that was  located<br>
  on the remote "src" host.
</p>

<br>
<br>
<br>
<br>

<p>
  If  the --iconv and --protect-args options<br>
  are specified and the  --files-from  file‐<br>
  names  are  being  sent  from  one host to<br>
  another, the filenames will be  translated<br>
  from  the  sending  host’s  charset to the<br>
  receiving host’s charset.
</p>

<br>
<br>
<br>
<br>

<p>
  NOTE: sorting the list  of  files  in  the<br>
  --files-from  input helps rsync to be more<br>
  efficient, as it  will  avoid  re-visiting<br>
  the  path elements that are shared between<br>
  adjacent entries.  If  the  input  is  not<br>
  sorted, some path elements (implied direc‐<br>
  tories) may end up being scanned  multiple<br>
  times,  and rsync will eventually undupli‐<br>
  cate  them  after  they  get  turned  into<br>
  file-list elements.
</p>

<br>
<br>
<br>
<br>

<p>
   -0, --from0
</p>

<br>

<p>
  This  tells rsync that the rules/filenames<br>
  it reads from a file are terminated  by  a<br>
  null  (’\0’)  character,  not a NL, CR, or<br>
  CR+LF.    This   affects   --exclude-from,<br>
  --include-from,   --files-from,   and  any<br>
  merged files specified in a --filter rule.<br>
  It  does  not  affect --cvs-exclude (since<br>
  all names read from a .cvsignore file  are<br>
  split on whitespace).
</p>

<br>
<br>
<br>
<br>

<p>
   -s, --protect-args
</p>

<br>

<p>
  This  option  sends all filenames and most<br>
  options to the remote rsync without allow‐<br>
  ing  the  remote  shell to interpret them.<br>
  This means that spaces are  not  split  in<br>
  names,  and any non-wildcard special char‐<br>
  acters are not translated (such as  ~,  $,<br>
  ;,  &amp;amp;,  etc.).   Wildcards are expanded on<br>
  the remote host by rsync (instead  of  the<br>
  shell doing it).
</p>

<br>
<br>
<br>
<br>

<p>
  If  you  use this option with --iconv, the<br>
  args related to the remote side will  also<br>
  be translated from the local to the remote<br>
  character-set.   The  translation  happens<br>
  before  wild-cards are expanded.  See also<br>
  the --files-from option.
</p>

<br>
<br>
<br>
<br>

<p>
  You may also control this option  via  the<br>
  RSYNC_PROTECT_ARGS  environment  variable.<br>
  If this variable  has  a  non-zero  value,<br>
  this  option  will  be enabled by default,<br>
  otherwise it will be disabled by  default.<br>
  Either  state  is overridden by a manually<br>
  specified positive or negative version  of<br>
  this   option   (note   that   --no-s  and<br>
  --no-protect-args are  the  negative  ver‐<br>
  sions).    Since  this  option  was  first<br>
  introduced in 3.0.0, you’ll need  to  make<br>
  sure  it’s  disabled  if  you ever need to<br>
  interact with a remote rsync that is older<br>
  than that.
</p>

<br>
<br>
<br>
<br>

<p>
  Rsync  can  also  be  configured (at build<br>
  time)  to  have  this  option  enabled  by<br>
  default  (with  is  overridden by both the<br>
  environment and the  command-line).   This<br>
  option   will   eventually  become  a  new<br>
  default setting  at  some  as-yet-undeter‐<br>
  mined point in the future.
</p>

<br>
<br>
<br>
<br>

<p>
   -T, --temp-dir=DIR
</p>

<br>

<p>
  This  option instructs rsync to use DIR as<br>
  a scratch directory when  creating  tempo‐<br>
  rary  copies  of  the files transferred on<br>
  the receiving side.  The default  behavior<br>
  is  to  create  each temporary file in the<br>
  same directory as the associated  destina‐<br>
  tion  file.   Beginning  with rsync 3.1.1,<br>
  the temp-file names inside  the  specified<br>
  DIR will not be prefixed with an extra dot<br>
  (though they will still have a random suf‐<br>
  fix added).
</p>

<br>
<br>
<br>
<br>

<p>
  This  option  is  most often used when the<br>
  receiving disk  partition  does  not  have<br>
  enough  free  space  to hold a copy of the<br>
  largest file in  the  transfer.   In  this<br>
  case  (i.e.  when the scratch directory is<br>
  on a different disk partition), rsync will<br>
  not be able to rename each received tempo‐<br>
  rary file over the top of  the  associated<br>
  destination file, but instead must copy it<br>
  into place.  Rsync does  this  by  copying<br>
  the  file  over the top of the destination<br>
  file, which  means  that  the  destination<br>
  file  will  contain  truncated data during<br>
  this copy.  If this were not done this way<br>
  (even  if  the destination file were first<br>
  removed, the data locally copied to a tem‐<br>
  porary  file in the destination directory,<br>
  and then renamed into place) it  would  be<br>
  possible for the old file to continue tak‐<br>
  ing up  disk  space  (if  someone  had  it<br>
  open),  and thus there might not be enough<br>
  room to fit the new version on the disk at<br>
  the same time.
</p>

<br>
<br>
<br>
<br>

<p>
  If  you  are using this option for reasons<br>
  other than a shortage of disk  space,  you<br>
  may   wish   to   combine   it   with  the<br>
  --delay-updates option, which will  ensure<br>
  that  all copied files get put into subdi‐<br>
  rectories in  the  destination  hierarchy,<br>
  awaiting  the end of the transfer.  If you<br>
  don’t have enough room  to  duplicate  all<br>
  the arriving files on the destination par‐<br>
  tition, another way to tell rsync that you<br>
  aren’t  overly  concerned about disk space<br>
  is to use the --partial-dir option with  a<br>
  relative  path;  because  this tells rsync<br>
  that it is OK to stash off  a  copy  of  a<br>
  single file in a subdir in the destination<br>
  hierarchy, rsync will use the  partial-dir<br>
  as a staging area to bring over the copied<br>
  file, and then rename it into  place  from<br>
  there. (Specifying a --partial-dir with an<br>
  absolute   path   does   not   have   this<br>
  side-effect.)
</p>

<br>
<br>
<br>
<br>

<p>
   -y, --fuzzy
</p>

<br>

<p>
  This  option  tells  rsync  that it should<br>
  look for a basis file for any  destination<br>
  file  that  is missing.  The current algo‐<br>
  rithm looks in the same directory  as  the<br>
  destination  file  for  either a file that<br>
  has an identical size  and  modified-time,<br>
  or  a  similarly-named  file.   If  found,<br>
  rsync uses the fuzzy basis file to try  to<br>
  speed up the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  If  the option is repeated, the fuzzy scan<br>
  will also be done in any  matching  alter‐<br>
  nate   destination  directories  that  are<br>
  specified via --compare-dest, --copy-dest,<br>
  or --link-dest.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  the use of the --delete option<br>
  might get rid of any potential fuzzy-match<br>
  files,  so  either  use  --delete-after or<br>
  specify some filename  exclusions  if  you<br>
  need to prevent this.
</p>

<br>
<br>
<br>
<br>

<p>
   --compare-dest=DIR
</p>

<br>

<p>
  This  option instructs rsync to use DIR on<br>
  the destination machine as  an  additional<br>
  hierarchy  to  compare  destination  files<br>
  against doing transfers (if the files  are<br>
  missing in the destination directory).  If<br>
  a file is found in DIR that  is  identical<br>
  to the sender’s file, the file will NOT be<br>
  transferred to the destination  directory.<br>
  This  is  useful  for  creating  a  sparse<br>
  backup of just  files  that  have  changed<br>
  from  an  earlier  backup.  This option is<br>
  typically used to copy into an  empty  (or<br>
  newly created) directory.
</p>

<br>
<br>
<br>
<br>

<p>
  Beginning   in   version  2.6.4,  multiple<br>
  --compare-dest  directories  may  be  pro‐<br>
  vided,  which  will  cause rsync to search<br>
  the list in the  order  specified  for  an<br>
  exact  match.   If  a  match is found that<br>
  differs only in attributes, a  local  copy<br>
  is  made and the attributes updated.  If a<br>
  match is not found, a basis file from  one<br>
  of  the  DIRs  will  be selected to try to<br>
  speed up the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  If DIR is a relative path, it is  relative<br>
  to  the  destination  directory.  See also<br>
  --copy-dest and --link-dest.
</p>

<br>
<br>
<br>
<br>

<p>
  NOTE: beginning with version 3.1.0,  rsync<br>
  will remove a file from a non-empty desti‐<br>
  nation hierarchy  if  an  exact  match  is<br>
  found  in  one of the compare-dest hierar‐<br>
  chies (making the end result more  closely<br>
  match a fresh copy).
</p>

<br>
<br>
<br>
<br>

<p>
   --copy-dest=DIR
</p>

<br>

<p>
  This  option  behaves like --compare-dest,<br>
  but rsync will also copy  unchanged  files<br>
  found  in DIR to the destination directory<br>
  using a local copy.  This  is  useful  for<br>
  doing transfers to a new destination while<br>
  leaving existing files  intact,  and  then<br>
  doing  a flash-cutover when all files have<br>
  been successfully transferred.
</p>

<br>
<br>
<br>
<br>

<p>
  Multiple --copy-dest  directories  may  be<br>
  provided, which will cause rsync to search<br>
  the list in the  order  specified  for  an<br>
  unchanged  file.  If a match is not found,<br>
  a basis file from one of the DIRs will  be<br>
  selected to try to speed up the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  If  DIR is a relative path, it is relative<br>
  to the destination  directory.   See  also<br>
  --compare-dest and --link-dest.
</p>

<br>
<br>
<br>
<br>

<p>
   --link-dest=DIR
</p>

<br>

<p>
  This  option behaves like --copy-dest, but<br>
  unchanged files are hard linked  from  DIR<br>
  to  the  destination directory.  The files<br>
  must  be  identical   in   all   preserved<br>
  attributes   (e.g.  permissions,  possibly<br>
  ownership) in order for the  files  to  be<br>
  linked together.  An example:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
rsync   -av   --link-dest=$PWD/prior_dir
</p>

<br>

<p>
  host:src_dir/ new_dir/
</p>

<br>
<br>
<br>
<br>

<p>
  If  file’s  aren’t  linking,  double-check<br>
  their  attributes.   Also  check  if  some<br>
  attributes are getting forced  outside  of<br>
  rsync’s  control, such a mount option that<br>
  squishes root to a single user, or  mounts<br>
  a  removable  drive with generic ownership<br>
  (such as OS X’s "Ignore ownership on  this<br>
  volume" option).
</p>

<br>
<br>
<br>
<br>

<p>
  Beginning   in   version  2.6.4,  multiple<br>
  --link-dest directories may  be  provided,<br>
  which  will cause rsync to search the list<br>
  in the order specified for an exact match.<br>
  If  a  match is found that differs only in<br>
  attributes, a local copy is made  and  the<br>
  attributes  updated.   If  a  match is not<br>
  found, a basis file from one of  the  DIRs<br>
  will  be  selected  to try to speed up the<br>
  transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  This option works best when  copying  into<br>
  an  empty destination hierarchy, as exist‐<br>
  ing  files  may   get   their   attributes<br>
  tweaked,  and  that  can  affect alternate<br>
  destination files via  hard-links.   Also,<br>
  itemizing  of  changes  can get a bit mud‐<br>
  dled.  Note that prior to  version  3.1.0,<br>
  an  alternate-directory  exact match would<br>
  never be found (nor linked into the desti‐<br>
  nation)  when  a  destination file already<br>
  exists.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that if you combine this option  with<br>
  --ignore-times,  rsync  will  not link any<br>
  files together because it only links iden‐<br>
  tical  files  together as a substitute for<br>
  transferring the file, never as  an  addi‐<br>
  tional check after the file is updated.
</p>

<br>
<br>
<br>
<br>

<p>
  If  DIR is a relative path, it is relative<br>
  to the destination  directory.   See  also<br>
  --compare-dest and --copy-dest.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  rsync  versions prior to 2.6.1<br>
  had a bug that could  prevent  --link-dest<br>
  from working properly for a non-super-user<br>
  when -o was specified (or implied by  -a).<br>
  You  can  work-around this bug by avoiding<br>
  the -o  option  when  sending  to  an  old<br>
  rsync.
</p>

<br>
<br>
<br>
<br>

<p>
   -z, --compress
</p>

<br>

<p>
  With  this  option,  rsync  compresses the<br>
  file data as it is sent to the destination<br>
  machine,  which reduces the amount of data<br>
  being transmitted  --  something  that  is<br>
  useful over a slow connection.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  this option typically achieves<br>
  better  compression  ratios  than  can  be<br>
  achieved  by  using  a  compressing remote<br>
  shell or a compressing  transport  because<br>
  it  takes advantage of the implicit infor‐<br>
  mation in the matching  data  blocks  that<br>
  are  not  explicitly sent over the connec‐<br>
  tion.   This   matching-data   compression<br>
  comes at a cost of CPU, though, and can be<br>
  disabled by repeating the -z  option,  but<br>
  only  if  both  sides are at least version<br>
  3.1.1.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that if your  version  of  rsync  was<br>
  compiled with an external zlib (instead of<br>
  the zlib that comes packaged  with  rsync)<br>
  then  it  will  not  support the old-style<br>
  compression,    only     the     new-style<br>
  (repeated-option)   compression.   In  the<br>
  future  this  new-style  compression  will<br>
  likely become the default.
</p>

<br>
<br>
<br>
<br>

<p>
  The  client  rsync requests new-style com‐<br>
  pression on the server via the  --new-com‐<br>
  press  option,  so  if you see that option<br>
  rejected it means that the server  is  not<br>
  new  enough  to  support  -zz.  Rsync also<br>
  accepts the --old-compress  option  for  a<br>
  future  time  when  new-style  compression<br>
  becomes the default.
</p>

<br>
<br>
<br>
<br>

<p>
  See the  --skip-compress  option  for  the<br>
  default  list  of  file suffixes that will<br>
  not be compressed.
</p>

<br>
<br>
<br>
<br>

<p>
   --compress-level=NUM
</p>

<br>

<p>
  Explicitly set the  compression  level  to<br>
  use (see --compress) instead of letting it<br>
  default.   Allowed  values  for  NUM   are<br>
  between  0  and 9; default when --compress<br>
  option is  specified  is  6.   If  NUM  is<br>
  non-zero,   the   --compress   option   is<br>
  implied.
</p>

<br>
<br>
<br>
<br>

<p>
   --skip-compress=LIST
</p>

<br>

<p>
  Override the list of  file  suffixes  that<br>
  will  not  be compressed.  The LIST should<br>
  be one or more file suffixes (without  the<br>
  dot) separated by slashes (/).
</p>

<br>
<br>
<br>
<br>

<p>
  You  may  specify an empty string to indi‐<br>
  cate that no file should be skipped.
</p>

<br>
<br>
<br>
<br>

<p>
  Simple character-class  matching  is  sup‐<br>
  ported:  each  must  consist  of a list of<br>
  letters inside the square  brackets  (e.g.<br>
  no  special  classes, such as "[:alpha:]",<br>
  are supported,  and  ’-’  has  no  special<br>
  meaning).
</p>

<br>
<br>
<br>
<br>

<p>
  The  characters  asterisk  (*)  and  ques‐<br>
  tion-mark (?) have no special meaning.
</p>

<br>
<br>
<br>
<br>

<p>
  Here’s an example that  specifies  6  suf‐<br>
  fixes  to  skip  (since  1  of the 5 rules<br>
  matches 2 suffixes):
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  --skip-compress=gz/jpg/mp[34]/7z/bz2
</p>

<br>
<br>
<br>
<br>

<p>
  The default list of suffixes that will not<br>
  be  compressed is this (in this version of<br>
  rsync):
</p>

<br>
<br>
<br>
<br>

<p>
  7z ace avi bz2 deb gpg gz iso jpeg jpg  lz<br>
  lzma  lzo mov mp3 mp4 ogg png rar rpm rzip<br>
  tbz tgz tlz txz xz z zip
</p>

<br>
<br>
<br>
<br>

<p>
  This  list  will  be  replaced   by   your<br>
  --skip-compress list in all but one situa‐<br>
  tion: a copy from a daemon rsync will  add<br>
  your  skipped  suffixes  to  its  list  of<br>
  non-compressing files (and its list may be<br>
  configured to a different default).
</p>

<br>
<br>
<br>
<br>

<p>
   --numeric-ids
</p>

<br>

<p>
  With   this  option  rsync  will  transfer<br>
  numeric group and  user  IDs  rather  than<br>
  using  user  and  group  names and mapping<br>
  them at both ends.
</p>

<br>
<br>
<br>
<br>

<p>
  By default rsync will use the username and<br>
  groupname  to  determine what ownership to<br>
  give files. The special uid 0 and the spe‐<br>
  cial   group   0   are  never  mapped  via<br>
  user/group names even if the --numeric-ids<br>
  option is not specified.
</p>

<br>
<br>
<br>
<br>

<p>
  If  a  user  or  group  has no name on the<br>
  source system or it has no  match  on  the<br>
  destination  system,  then  the numeric ID<br>
  from the source system  is  used  instead.<br>
  See  also the comments on the "use chroot"<br>
  setting in  the  rsyncd.conf  manpage  for<br>
  information  on  how  the  chroot  setting<br>
  affects rsync’s ability  to  look  up  the<br>
  names of the users and groups and what you<br>
  can do about it.
</p>

<br>
<br>
<br>
<br>

<p>
   --usermap=STRING, --groupmap=STRING
</p>

<br>

<p>
  These options allow you to  specify  users<br>
  and  groups that should be mapped to other<br>
  values by the receiving side.  The  STRING<br>
  is  one  or  more  FROM:TO pairs of values<br>
  separated by commas.   Any  matching  FROM<br>
  value  from  the sender is replaced with a<br>
  TO value from the receiver.  You may spec‐<br>
  ify usernames or user IDs for the FROM and<br>
  TO values, and the FROM value may also  be<br>
  a  wild-card string, which will be matched<br>
  against the sender’s names (wild-cards  do<br>
  NOT  match  against ID numbers, though see<br>
  below for why a ’*’  matches  everything).<br>
  You may instead specify a range of ID num‐<br>
  bers via  an  inclusive  range:  LOW-HIGH.<br>
  For example:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
--usermap=0-99:nobody,wayne:admin,*:normal --groupmap=usr:1,1:usr
</p>

<br>
<br>
<br>
<br>

<p>
  The  first  match  in  the list is the one<br>
  that is used.  You should specify all your<br>
  user  mappings  using  a  single --usermap<br>
  option, and/or  all  your  group  mappings<br>
  using a single --groupmap option.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that the sender’s name for the 0 user<br>
  and  group  are  not  transmitted  to  the<br>
  receiver, so you should either match these<br>
  values using a 0,  or  use  the  names  in<br>
  effect  on  the  receiving side (typically<br>
  "root").  All other FROM names match those<br>
  in  use on the sending side.  All TO names<br>
  match those in use on the receiving side.
</p>

<br>
<br>
<br>
<br>

<p>
  Any IDs that do not have  a  name  on  the<br>
  sending  side  are  treated  as  having an<br>
  empty name for the  purpose  of  matching.<br>
  This  allows  them to be matched via a "*"<br>
  or using an empty name.  For instance:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
--usermap=:nobody --groupmap=*:nobody
</p>

<br>
<br>
<br>
<br>

<p>
  When the --numeric-ids option is used, the<br>
  sender does not send any names, so all the<br>
  IDs are treated as having an  empty  name.<br>
  This  means  that you will need to specify<br>
  numeric FROM values if  you  want  to  map<br>
  these nameless IDs to different values.
</p>

<br>
<br>
<br>
<br>

<p>
  For  the  --usermap  option  to  have  any<br>
  effect, the -o (--owner)  option  must  be<br>
  used  (or  implied), and the receiver will<br>
  need to be running as  a  super-user  (see<br>
  also  the  --fake-super  option).  For the<br>
  --groupmap option to have any effect,  the<br>
  -g  (--groups)  option  must  be  used (or<br>
  implied), and the receiver  will  need  to<br>
  have permissions to set that group.
</p>

<br>
<br>
<br>
<br>

<p>
   --chown=USER:GROUP
</p>

<br>

<p>
  This  option  forces all files to be owned<br>
  by USER with group GROUP.  This is a  sim‐<br>
  pler  interface  than  using --usermap and<br>
  --groupmap directly, but it is implemented<br>
  using  those  options  internally,  so you<br>
  cannot mix them.  If either  the  USER  or<br>
  GROUP is empty, no mapping for the omitted<br>
  user/group will occur.  If GROUP is empty,<br>
  the  trailing colon may be omitted, but if<br>
  USER is empty, a  leading  colon  must  be<br>
  supplied.
</p>

<br>
<br>
<br>
<br>

<p>
  If  you  specify "--chown=foo:bar, this is<br>
  exactly    the    same    as    specifying<br>
  "--usermap=*:foo  --groupmap=*:bar",  only<br>
  easier.
</p>

<br>
<br>
<br>
<br>

<p>
   --timeout=TIMEOUT
</p>

<br>

<p>
  This option allows you to  set  a  maximum<br>
  I/O  timeout  in  seconds.  If  no data is<br>
  transferred for the  specified  time  then<br>
  rsync  will  exit. The default is 0, which<br>
  means no timeout.
</p>

<br>
<br>
<br>
<br>

<p>
   --contimeout
</p>

<br>

<p>
  This option allows you to set  the  amount<br>
  of  time that rsync will wait for its con‐<br>
  nection to an rsync daemon to succeed.  If<br>
  the  timeout  is reached, rsync exits with<br>
  an error.
</p>

<br>
<br>
<br>
<br>

<p>
   --address
</p>

<br>

<p>
  By default rsync will bind to the wildcard<br>
  address  when  connecting to an rsync dae‐<br>
  mon.  The --address option allows  you  to<br>
  specify  a  specific  IP address (or host‐<br>
  name) to bind to.  See also this option in<br>
  the --daemon mode section.
</p>

<br>
<br>
<br>
<br>

<p>
   --port=PORT
</p>

<br>

<p>
  This  specifies an alternate TCP port num‐<br>
  ber to use rather than the default of 873.<br>
  This  is  only needed if you are using the<br>
  double-colon (::) syntax to  connect  with<br>
  an  rsync daemon (since the URL syntax has<br>
  a way to specify the port as a part of the<br>
  URL).   See also this option in the --dae‐<br>
  mon mode section.
</p>

<br>
<br>
<br>
<br>

<p>
   --sockopts
</p>

<br>

<p>
  This option can provide  endless  fun  for<br>
  people  who  like to tune their systems to<br>
  the utmost degree. You can set  all  sorts<br>
  of socket options which may make transfers<br>
  faster (or slower!). Read the man page for<br>
  the  setsockopt()  system call for details<br>
  on some of the options you may be able  to<br>
  set.  By default no special socket options<br>
  are set. This only affects  direct  socket<br>
  connections  to  a  remote  rsync  daemon.<br>
  This option also exists  in  the  --daemon<br>
  mode section.
</p>

<br>
<br>
<br>
<br>

<p>
   --blocking-io
</p>

<br>

<p>
  This  tells rsync to use blocking I/O when<br>
  launching a remote  shell  transport.   If<br>
  the  remote  shell is either rsh or remsh,<br>
  rsync defaults to using blocking I/O, oth‐<br>
  erwise  it  defaults to using non-blocking<br>
  I/O.  (Note that ssh prefers  non-blocking<br>
  I/O.)
</p>

<br>
<br>
<br>
<br>

<p>
   --outbuf=MODE
</p>

<br>

<p>
  This  sets the output buffering mode.  The<br>
  mode can be None (aka  Unbuffered),  Line,<br>
  or  Block  (aka Full).  You may specify as<br>
  little as a single letter  for  the  mode,<br>
  and use upper or lower case.
</p>

<br>
<br>
<br>
<br>

<p>
  The  main  use of this option is to change<br>
  Full  buffering  to  Line  buffering  when<br>
  rsync’s output is going to a file or pipe.
</p>

<br>
<br>
<br>
<br>

<p>
   -i, --itemize-changes
</p>

<br>

<p>
  Requests  a  simple  itemized  list of the<br>
  changes that are being made to each  file,<br>
  including   attribute  changes.   This  is<br>
  exactly the same as specifying  --out-for‐<br>
  mat='%i  %n%L'.  If you repeat the option,<br>
  unchanged files will also be  output,  but<br>
  only  if  the  receiving rsync is at least<br>
  version 2.6.7 (you can use -vv with  older<br>
  versions  of rsync, but that also turns on<br>
  the output of other verbose messages).
</p>

<br>
<br>
<br>
<br>

<p>
  The "%i" escape has a cryptic output  that<br>
  is 11 letters long.  The general format is<br>
  like the string YXcstpoguax,  where  Y  is<br>
  replaced by the type of update being done,<br>
  X is replaced by the  file-type,  and  the<br>
  other  letters  represent  attributes that<br>
  may be output if they are being modified.
</p>

<br>
<br>
<br>
<br>

<p>
  The update types that replace the Y are as<br>
  follows:
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  &lt;  means  that  a  file is being
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 transferred  to  the  remote   host<br>
 (sent).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  &gt;  means  that  a  file is being
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 transferred  to  the   local   host<br>
 (received).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  c means that a local change/cre‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 ation is  occurring  for  the  item<br>
 (such  as  the creation of a direc‐<br>
 tory or the changing of a  symlink,<br>
 etc.).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  h  means that the item is a hard
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 link  to  another  item   (requires<br>
 --hard-links).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  .  means  that  the  item is not
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 being updated (though it might have<br>
 attributes  that  are  being  modi‐<br>
 fied).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A * means  that  the  rest  of  the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 itemized-output   area  contains  a<br>
 message (e.g. "deleting").
</p>

<br>
<br>
<br>
<br>

<p>
  The file-types that replace the X  are:  f<br>
  for  a file, a d for a directory, an L for<br>
  a symlink, a D for a device, and a S for a<br>
  special   file  (e.g.  named  sockets  and<br>
  fifos).
</p>

<br>
<br>
<br>
<br>

<p>
  The other letters in the string above  are<br>
  the  actual letters that will be output if<br>
  the associated attribute for the  item  is<br>
  being  updated  or  a  "."  for no change.<br>
  Three exceptions to this are: (1) a  newly<br>
  created  item  replaces each letter with a<br>
  "+", (2) an identical  item  replaces  the<br>
  dots  with  spaces,  and  (3)  an  unknown<br>
  attribute replaces each letter with a  "?"<br>
  (this  can happen when talking to an older<br>
  rsync).
</p>

<br>
<br>
<br>
<br>

<p>
  The attribute that is associated with each<br>
  letter is as follows:
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  c  means  either  that a regular
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 file  has  a   different   checksum<br>
 (requires  --checksum)  or  that  a<br>
 symlink, device,  or  special  file<br>
 has  a changed value.  Note that if<br>
 you are sending files to  an  rsync<br>
 prior  to  3.0.1,  this change flag<br>
 will be  present  only  for  check‐<br>
 sum-differing regular files.
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  s  means  the  size of a regular
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 file  is  different  and  will   be<br>
 updated by the file transfer.
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  t means the modification time is
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 different and is being  updated  to<br>
 the    sender’s   value   (requires<br>
 --times).  An alternate value of  T<br>
 means  that  the  modification time<br>
 will be set to the  transfer  time,<br>
 which   happens  when  a  file/sym‐<br>
 link/device  is   updated   without<br>
 --times   and  when  a  symlink  is<br>
 changed and the receiver can’t  set<br>
 its  time.   (Note:  when  using an<br>
 rsync 3.0.0 client, you  might  see<br>
 the  s flag combined with t instead<br>
 of  the  proper  T  flag  for  this<br>
 time-setting failure.)
</p>

<br>
<br>
<br>
<br>

<p>
  o      A  p means the permissions are dif‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 ferent and are being updated to the<br>
 sender’s value (requires --perms).
</p>

<br>
<br>
<br>
<br>

<p>
  o      An  o  means the owner is different
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 and  is  being   updated   to   the<br>
 sender’s  value  (requires  --owner<br>
 and super-user privileges).
</p>

<br>
<br>
<br>
<br>

<p>
  o      A g means the  group  is  different
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 and   is   being   updated  to  the<br>
 sender’s  value  (requires  --group<br>
 and   the   authority  to  set  the<br>
 group).
</p>

<br>
<br>
<br>
<br>

<p>
  o      The u slot is reserved  for  future
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 use.
</p>

<br>
<br>
<br>
<br>

<p>
  o      The  a  means that the ACL informa‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 tion changed.
</p>

<br>
<br>
<br>
<br>

<p>
  o      The  x  means  that  the   extended
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 attribute information changed.
</p>

<br>
<br>
<br>
<br>

<p>
  One other output is possible:  when delet‐<br>
  ing files, the "%i" will output the string<br>
  "*deleting"  for  each  item that is being<br>
  removed (assuming that you are talking  to<br>
  a  recent  enough rsync that it logs dele‐<br>
  tions instead of outputting them as a ver‐<br>
  bose message).
</p>

<br>
<br>
<br>
<br>

<p>
   --out-format=FORMAT
</p>

<br>

<p>
  This  allows  you  to specify exactly what<br>
  the rsync client outputs to the user on  a<br>
  per-update  basis.   The  format is a text<br>
  string containing embedded  single-charac‐<br>
  ter  escape sequences prefixed with a per‐<br>
  cent (%) character.   A default format  of<br>
  "%n%L" is assumed if either --info=name or<br>
  -v is specified (this tells you  just  the<br>
  name  of  the  file  and, if the item is a<br>
  link, where it points).  For a  full  list<br>
  of the possible escape characters, see the<br>
  "log format" setting  in  the  rsyncd.conf<br>
  manpage.
</p>

<br>
<br>
<br>
<br>

<p>
  Specifying the --out-format option implies<br>
  the --info=name option, which will mention<br>
  each  file, dir, etc. that gets updated in<br>
  a significant way (a transferred  file,  a<br>
  recreated  symlink/device,  or  a  touched<br>
  directory).  In  addition,  if  the  item‐<br>
  ize-changes escape (%i) is included in the<br>
  string  (e.g.  if  the   --itemize-changes<br>
  option  was  used),  the  logging of names<br>
  increases to  mention  any  item  that  is<br>
  changed in any way (as long as the receiv‐<br>
  ing side is  at  least  2.6.4).   See  the<br>
  --itemize-changes option for a description<br>
  of the output of "%i".
</p>

<br>
<br>
<br>
<br>

<p>
  Rsync will output  the  out-format  string<br>
  prior  to  a file’s transfer unless one of<br>
  the    transfer-statistic    escapes    is<br>
  requested,  in  which  case the logging is<br>
  done at the end of  the  file’s  transfer.<br>
  When  this  late  logging is in effect and<br>
  --progress is also specified,  rsync  will<br>
  also  output  the  name  of the file being<br>
  transferred prior to its progress informa‐<br>
  tion (followed, of course, by the out-for‐<br>
  mat output).
</p>

<br>
<br>
<br>
<br>

<p>
   --log-file=FILE
</p>

<br>

<p>
  This option causes rsync to log what it is<br>
  doing  to  a file.  This is similar to the<br>
  logging that a daemon  does,  but  can  be<br>
  requested  for  the client side and/or the<br>
  server side of a non-daemon transfer.   If<br>
  specified  as  a  client  option, transfer<br>
  logging will be  enabled  with  a  default<br>
  format    of    "%i    %n%L".    See   the<br>
  --log-file-format option if  you  wish  to<br>
  override this.
</p>

<br>
<br>
<br>
<br>

<p>
  Here’s a example command that requests the<br>
  remote side to log what is happening:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
rsync -av --remote-option=--log-file=/tmp/rlog src/ dest/
</p>

<br>
<br>
<br>
<br>

<p>
  This is very useful if you need  to  debug<br>
  why a connection is closing unexpectedly.
</p>

<br>
<br>
<br>
<br>

<p>
   --log-file-format=FORMAT
</p>

<br>

<p>
  This  allows  you  to specify exactly what<br>
  per-update logging is put  into  the  file<br>
  specified  by the --log-file option (which<br>
  must also be specified for this option  to<br>
  have any effect).  If you specify an empty<br>
  string, updated files  will  not  be  men‐<br>
  tioned in the log file.  For a list of the<br>
  possible escape characters, see  the  "log<br>
  format"  setting  in  the rsyncd.conf man‐<br>
  page.
</p>

<br>
<br>
<br>
<br>

<p>
  The default FORMAT used if  --log-file  is<br>
  specified  and  this  option is not is ’%i<br>
  %n%L’.
</p>

<br>
<br>
<br>
<br>

<p>
   --stats
</p>

<br>

<p>
  This tells rsync to print a verbose set of<br>
  statistics  on the file transfer, allowing<br>
  you  to   tell   how   effective   rsync’s<br>
  delta-transfer algorithm is for your data.<br>
  This option is equivalent to --info=stats2<br>
  if  combined  with  0  or 1 -v options, or<br>
  --info=stats3 if combined with 2  or  more<br>
  -v options.
</p>

<br>
<br>
<br>
<br>

<p>
  The current statistics are as follows:
</p>

<br>
<br>
<br>
<br>

<p>
  o      Number of files is the count of all
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 "files"  (in  the  generic  sense),<br>
 which  includes  directories,  sym‐<br>
 links, etc.  The total  count  will<br>
 be  followed by a list of counts by<br>
 filetype   (if   the    total    is<br>
 non-zero).   For example: "(reg: 5,<br>
 dir: 3, link: 2, dev:  1,  special:<br>
 1)"  lists  the  totals for regular<br>
 files,    directories,    symlinks,<br>
 devices, and special files.  If any<br>
 of value is  0,  it  is  completely<br>
 omitted from the list.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Number  of  created  files  is  the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 count of how many "files"  (generic<br>
 sense)  were created (as opposed to<br>
 updated).  The total count will  be<br>
 followed  by  a  list  of counts by<br>
 filetype   (if   the    total    is<br>
 non-zero).
</p>

<br>
<br>
<br>
<br>

<p>
  o      Number  of  deleted  files  is  the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 count of how many "files"  (generic<br>
 sense)  were created (as opposed to<br>
 updated).  The total count will  be<br>
 followed  by  a  list  of counts by<br>
 filetype   (if   the    total    is<br>
 non-zero).   Note that this line is<br>
 only output  if  deletions  are  in<br>
 effect,  and only if protocol 31 is<br>
 being used (the default  for  rsync<br>
 3.1.x).
</p>

<br>
<br>
<br>
<br>

<p>
  o      Number of regular files transferred
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 is the count of normal  files  that<br>
 were     updated     via    rsync’s<br>
 delta-transfer   algorithm,   which<br>
 does  not  include  dirs, symlinks,<br>
 etc.  Note that rsync  3.1.0  added<br>
 the  word "regular" into this head‐<br>
 ing.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Total file size is the total sum of
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 all  file  sizes  in  the transfer.<br>
 This does not count  any  size  for<br>
 directories  or  special files, but<br>
 does include the size of symlinks.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Total transferred file size is  the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 total  sum  of  all files sizes for<br>
 just the transferred files.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Literal data is how much  unmatched
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 file-update  data we had to send to<br>
 the receiver for it to recreate the<br>
 updated files.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Matched  data  is how much data the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 receiver got locally when  recreat‐<br>
 ing the updated files.
</p>

<br>
<br>
<br>
<br>

<p>
  o      File  list  size  is  how  big  the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 file-list data was when the  sender<br>
 sent  it  to the receiver.  This is<br>
 smaller than the in-memory size for<br>
 the file list due to some compress‐<br>
 ing of duplicated data  when  rsync<br>
 sends the list.
</p>

<br>
<br>
<br>
<br>

<p>
  o      File  list  generation  time is the
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 number of seconds that  the  sender<br>
 spent creating the file list.  This<br>
 requires  a  modern  rsync  on  the<br>
 sending   side   for   this  to  be<br>
 present.
</p>

<br>
<br>
<br>
<br>

<p>
  o      File list transfer time is the num‐
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 ber  of  seconds  that  the  sender<br>
 spent sending the file list to  the<br>
 receiver.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Total  bytes  sent  is the count of
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 all the bytes that rsync sent  from<br>
 the client side to the server side.
</p>

<br>
<br>
<br>
<br>

<p>
  o      Total  bytes  received is the count
</p>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
 of all non-message bytes that rsync<br>
 received  by  the  client side from<br>
 the  server  side.    "Non-message"<br>
 bytes means that we don’t count the<br>
 bytes for a  verbose  message  that<br>
 the  server sent to us, which makes<br>
 the stats more consistent.
</p>

<br>
<br>
<br>
<br>

<p>
   -8, --8-bit-output
</p>

<br>

<p>
  This tells rsync  to  leave  all  high-bit<br>
  characters unescaped in the output instead<br>
  of trying to test them to see  if  they’re<br>
  valid  in  the current locale and escaping<br>
  the invalid ones.  All control  characters<br>
  (but   never  tabs)  are  always  escaped,<br>
  regardless of this option’s setting.
</p>

<br>
<br>
<br>
<br>

<p>
  The escape idiom that started in 2.6.7  is<br>
  to  output  a  literal backslash (\) and a<br>
  hash (#), followed by exactly 3 octal dig‐<br>
  its.   For example, a newline would output<br>
  as "\#012".  A literal backslash  that  is<br>
  in  a filename is not escaped unless it is<br>
  followed by a hash and 3 digits (0-9).
</p>

<br>
<br>
<br>
<br>

<p>
   -h, --human-readable
</p>

<br>

<p>
  Output numbers in  a  more  human-readable<br>
  format.  There are 3 possible levels:  (1)<br>
  output numbers with  a  separator  between<br>
  each  set of 3 digits (either a comma or a<br>
  period, depending on if the decimal  point<br>
  is  represented  by  a period or a comma);<br>
  (2) output numbers in units of 1000  (with<br>
  a character suffix for larger units -- see<br>
  below); (3) output  numbers  in  units  of<br>
  1024.
</p>

<br>
<br>
<br>
<br>

<p>
  The  default  is  human-readable  level 1.<br>
  Each -h option increases the level by one.<br>
  You  can take the level down to 0 (to out‐<br>
  put numbers as pure digits)  by  specifing<br>
  the --no-human-readable (--no-h) option.
</p>

<br>
<br>
<br>
<br>

<p>
  The unit letters that are appended in lev‐<br>
  els 2 and 3 are: K  (kilo),  M  (mega),  G<br>
  (giga),  or  T  (tera).   For  example,  a<br>
  1234567-byte file would output as 1.23M in<br>
  level-2  (assuming  that  a period is your<br>
  local decimal point).
</p>

<br>
<br>
<br>
<br>

<p>
  Backward compatibility note:  versions  of<br>
  rsync   prior  to  3.1.0  do  not  support<br>
  human-readable level 1, and  they  default<br>
  to  level  0.  Thus, specifying one or two<br>
  -h options will  behave  in  a  comparable<br>
  manner  in old and new versions as long as<br>
  you didn’t specify a --no-h  option  prior<br>
  to  one  or  more  -h  options.   See  the<br>
  --list-only option for one difference.
</p>

<br>
<br>
<br>
<br>

<p>
   --partial
</p>

<br>

<p>
  By default, rsync  will  delete  any  par‐<br>
  tially transferred file if the transfer is<br>
  interrupted. In some circumstances  it  is<br>
  more  desirable  to  keep partially trans‐<br>
  ferred files. Using the  --partial  option<br>
  tells rsync to keep the partial file which<br>
  should make a subsequent transfer  of  the<br>
  rest of the file much faster.
</p>

<br>
<br>
<br>
<br>

<p>
   --partial-dir=DIR
</p>

<br>

<p>
  A  better  way  to keep partial files than<br>
  the --partial option is to specify  a  DIR<br>
  that will be used to hold the partial data<br>
  (instead of writing it out to the destina‐<br>
  tion  file).   On the next transfer, rsync<br>
  will use a file found in this dir as  data<br>
  to speed up the resumption of the transfer<br>
  and then delete it after it has served its<br>
  purpose.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that if --whole-file is specified (or<br>
  implied), any  partial-dir  file  that  is<br>
  found  for  a  file  that is being updated<br>
  will simply be  removed  (since  rsync  is<br>
  sending   files   without   using  rsync’s<br>
  delta-transfer algorithm).
</p>

<br>
<br>
<br>
<br>

<p>
  Rsync will create the DIR if it is missing<br>
  (just the last dir -- not the whole path).<br>
  This makes it easy to use a relative  path<br>
  (such  as  "--partial-dir=.rsync-partial")<br>
  to have rsync create the partial-directory<br>
  in  the  destination file’s directory when<br>
  needed, and then remove it again when  the<br>
  partial file is deleted.
</p>

<br>
<br>
<br>
<br>

<p>
  If  the  partial-dir value is not an abso‐<br>
  lute path, rsync will add an exclude  rule<br>
  at  the end of all your existing excludes.<br>
  This will prevent the sending of any  par‐<br>
  tial-dir files that may exist on the send‐<br>
  ing  side,  and  will  also  prevent   the<br>
  untimely  deletion of partial-dir items on<br>
  the receiving side.  An example: the above<br>
  --partial-dir option would add the equiva‐<br>
  lent of "-f '-p .rsync-partial/'"  at  the<br>
  end of any other filter rules.
</p>

<br>
<br>
<br>
<br>

<p>
  If  you  are  supplying  your  own exclude<br>
  rules,  you  may  need  to  add  your  own<br>
  exclude/hide/protect  rule  for  the  par‐<br>
  tial-dir because (1) the  auto-added  rule<br>
  may  be  ineffective  at  the  end of your<br>
  other rules, or (2) you may wish to  over‐<br>
  ride    rsync’s   exclude   choice.    For<br>
  instance,  if  you  want  to  make   rsync<br>
  clean-up  any  left-over partial-dirs that<br>
  may be lying around,  you  should  specify<br>
  --delete-after  and  add  a  "risk" filter<br>
  rule,  e.g.    -f   'R   .rsync-partial/'.<br>
  (Avoid     using     --delete-before    or<br>
  --delete-during  unless  you  don’t   need<br>
  rsync  to  use  any  of the left-over par‐<br>
  tial-dir data during the current run.)
</p>

<br>
<br>
<br>
<br>

<p>
  IMPORTANT: the --partial-dir should not be<br>
  writable  by  other users or it is a secu‐<br>
  rity risk.  E.g. AVOID "/tmp".
</p>

<br>
<br>
<br>
<br>

<p>
  You can also set the partial-dir value the<br>
  RSYNC_PARTIAL_DIR   environment  variable.<br>
  Setting this in the environment  does  not<br>
  force  --partial to be enabled, but rather<br>
  it affects where  partial  files  go  when<br>
  --partial  is  specified.   For  instance,<br>
  instead of using  --partial-dir=.rsync-tmp<br>
  along   with  --progress,  you  could  set<br>
  RSYNC_PARTIAL_DIR=.rsync-tmp in your envi‐<br>
  ronment and then just use the -P option to<br>
  turn on the use of the .rsync-tmp dir  for<br>
  partial  transfers.   The  only times that<br>
  the --partial option  does  not  look  for<br>
  this   environment   value  are  (1)  when<br>
  --inplace was specified  (since  --inplace<br>
  conflicts  with  --partial-dir),  and  (2)<br>
  when --delay-updates  was  specified  (see<br>
  below).
</p>

<br>
<br>
<br>
<br>

<p>
  For  the  purposes  of the daemon-config’s<br>
  "refuse  options"  setting,  --partial-dir<br>
  does not imply --partial.  This is so that<br>
  a refusal of the --partial option  can  be<br>
  used to disallow the overwriting of desti‐<br>
  nation  files  with  a  partial  transfer,<br>
  while  still allowing the safer idiom pro‐<br>
  vided by --partial-dir.
</p>

<br>
<br>
<br>
<br>

<p>
   --delay-updates
</p>

<br>

<p>
  This option puts the temporary  file  from<br>
  each updated file into a holding directory<br>
  until the end of the  transfer,  at  which<br>
  time  all the files are renamed into place<br>
  in rapid  succession.   This  attempts  to<br>
  make  the  updating  of the files a little<br>
  more atomic.  By  default  the  files  are<br>
  placed  into a directory named ".~tmp~" in<br>
  each file’s destination directory, but  if<br>
  you’ve specified the --partial-dir option,<br>
  that directory will be used instead.   See<br>
  the  comments in the --partial-dir section<br>
  for a discussion of how this ".~tmp~"  dir<br>
  will  be  excluded  from the transfer, and<br>
  what you can  do  if  you  want  rsync  to<br>
  cleanup  old  ".~tmp~"  dirs that might be<br>
  lying around.   Conflicts  with  --inplace<br>
  and --append.
</p>

<br>
<br>
<br>
<br>

<p>
  This   option  uses  more  memory  on  the<br>
  receiving side (one bit  per  file  trans‐<br>
  ferred) and also requires enough free disk<br>
  space on the receiving  side  to  hold  an<br>
  additional  copy of all the updated files.<br>
  Note also that you should not use an abso‐<br>
  lute  path  to  --partial-dir  unless  (1)<br>
  there is no chance of any of the files  in<br>
  the  transfer  having the same name (since<br>
  all the updated files will be put  into  a<br>
  single  directory if the path is absolute)<br>
  and (2) there are no mount points  in  the<br>
  hierarchy  (since the delayed updates will<br>
  fail if they can’t be renamed into place).
</p>

<br>
<br>
<br>
<br>

<p>
  See also the "atomic-rsync" perl script in<br>
  the  "support"  subdir for an update algo‐<br>
  rithm that is even more  atomic  (it  uses<br>
  --link-dest  and  a  parallel hierarchy of<br>
  files).
</p>

<br>
<br>
<br>
<br>

<p>
   -m, --prune-empty-dirs
</p>

<br>

<p>
  This option tells the receiving  rsync  to<br>
  get  rid  of  empty  directories  from the<br>
  file-list,  including  nested  directories<br>
  that have no non-directory children.  This<br>
  is useful for avoiding the creation  of  a<br>
  bunch  of  useless  directories  when  the<br>
  sending rsync is  recursively  scanning  a<br>
  hierarchy       of       files       using<br>
  include/exclude/filter rules.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that the use of transfer rules,  such<br>
  as  the --min-size option, does not affect<br>
  what goes into the  file  list,  and  thus<br>
  does  not leave directories empty, even if<br>
  none of the files in a directory match the<br>
  transfer rule.
</p>

<br>
<br>
<br>
<br>

<p>
  Because  the  file-list  is actually being<br>
  pruned,  this  option  also  affects  what<br>
  directories  get  deleted when a delete is<br>
  active.   However,  keep  in   mind   that<br>
  excluded files and directories can prevent<br>
  existing items from being deleted  due  to<br>
  an  exclude  both  hiding source files and<br>
  protecting  destination  files.   See  the<br>
  perishable  filter-rule  option for how to<br>
  avoid this.
</p>

<br>
<br>
<br>
<br>

<p>
  You can prevent  the  pruning  of  certain<br>
  empty  directories  from  the file-list by<br>
  using  a  global  "protect"  filter.   For<br>
  instance,  this  option  would ensure that<br>
  the directory "emptydir" was kept  in  the<br>
  file-list:
</p>

<br>
<br>
<br>
<br>

<p>
  --filter ’protect emptydir/’
</p>

<br>
<br>
<br>
<br>

<p>
  Here’s  an  example  that  copies all .pdf<br>
  files in a hierarchy,  only  creating  the<br>
  necessary  destination directories to hold<br>
  the  .pdf  files,  and  ensures  that  any<br>
  superfluous  files  and directories in the<br>
  destination are  removed  (note  the  hide<br>
  filter   of   non-directories  being  used<br>
  instead of an exclude):
</p>

<br>
<br>
<br>
<br>

<p>
  rsync  -avm  --del  --include=’*.pdf’   -f<br>
  ’hide,! */’ src/ dest
</p>

<br>
<br>
<br>
<br>

<p>
  If  you  didn’t want to remove superfluous<br>
  destination files, the  more  time-honored<br>
  options  of "--include='*/' --exclude='*'"<br>
  would work fine in place of the  hide-fil‐<br>
  ter (if that is more natural to you).
</p>

<br>
<br>
<br>
<br>

<p>
   --progress
</p>

<br>

<p>
  This  option tells rsync to print informa‐<br>
  tion showing the progress of the transfer.<br>
  This  gives  a  bored  user  something  to<br>
  watch.  With a modern rsync  this  is  the<br>
  same             as             specifying<br>
  --info=flist2,name,progress,    but    any<br>
  user-supplied   settings  for  those  info<br>
  flags     takes      precedence      (e.g.<br>
  "--info=flist0 --progress").
</p>

<br>
<br>
<br>
<br>

<p>
  While  rsync  is  transferring  a  regular<br>
  file, it  updates  a  progress  line  that<br>
  looks like this:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
782448  63%  110.64kB/s    0:00:04
</p>

<br>
<br>
<br>
<br>

<p>
  In  this  example, the receiver has recon‐<br>
  structed  782448  bytes  or  63%  of   the<br>
  sender’s   file,  which  is  being  recon‐<br>
  structed at a rate of 110.64 kilobytes per<br>
  second,  and the transfer will finish in 4<br>
  seconds if the current rate is  maintained<br>
  until the end.
</p>

<br>
<br>
<br>
<br>

<p>
  These  statistics  can  be  misleading  if<br>
  rsync’s  delta-transfer  algorithm  is  in<br>
  use.   For  example,  if the sender’s file<br>
  consists of the  basis  file  followed  by<br>
  additional  data,  the  reported rate will<br>
  probably  drop   dramatically   when   the<br>
  receiver gets to the literal data, and the<br>
  transfer will probably take much longer to<br>
  finish  than  the receiver estimated as it<br>
  was finishing  the  matched  part  of  the<br>
  file.
</p>

<br>
<br>
<br>
<br>

<p>
  When  the  file  transfer  finishes, rsync<br>
  replaces the progress line with a  summary<br>
  line that looks like this:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
1,238,099 100%  146.38kB/s    0:00:08  (xfr#5, to-chk=169/396)
</p>

<br>
<br>
<br>
<br>

<p>
  In  this  example,  the file was 1,238,099<br>
  bytes long in total, the average  rate  of<br>
  transfer  for  the  whole  file was 146.38<br>
  kilobytes per second over  the  8  seconds<br>
  that  it  took to complete, it was the 5th<br>
  transfer of a regular file during the cur‐<br>
  rent rsync session, and there are 169 more<br>
  files for the receiver to check (to see if<br>
  they  are up-to-date or not) remaining out<br>
  of the 396 total files in the file-list.
</p>

<br>
<br>
<br>
<br>

<p>
  In an incremental  recursion  scan,  rsync<br>
  won’t  know  the  total number of files in<br>
  the file-list until it reaches the ends of<br>
  the  scan, but since it starts to transfer<br>
  files during the scan, it will  display  a<br>
  line with the text "ir-chk" (for incremen‐<br>
  tal recursion check) instead  of  "to-chk"<br>
  until  the  point  that  it knows the full<br>
  size of the list, at which point  it  will<br>
  switch  to  using  "to-chk".  Thus, seeing<br>
  "ir-chk" lets  you  know  that  the  total<br>
  count  of  files in the file list is still<br>
  going to increase (and each time it  does,<br>
  the  count  of  files  left to check  will<br>
  increase by the number of the files  added<br>
  to the list).
</p>

<br>
<br>
<br>
<br>

<p>
   -P     The  -P  option is equivalent to --partial
</p>

<br>

<p>
  --progress.  Its purpose  is  to  make  it<br>
  much  easier  to specify these two options<br>
  for a long transfer  that  may  be  inter‐<br>
  rupted.
</p>

<br>
<br>
<br>
<br>

<p>
  There  is  also  a --info=progress2 option<br>
  that outputs statistics based on the whole<br>
  transfer,  rather  than  individual files.<br>
  Use this flag without outputting  a  file‐<br>
  name    (e.g.    avoid   -v   or   specify<br>
  --info=name0) if you want to see  how  the<br>
  transfer  is  doing  without scrolling the<br>
  screen with a lot of  names.   (You  don’t<br>
  need  to  specify the --progress option in<br>
  order to use --info=progress2.)
</p>

<br>
<br>
<br>
<br>

<p>
   --password-file=FILE
</p>

<br>

<p>
  This option allows you to provide a  pass‐<br>
  word  for  accessing an rsync daemon via a<br>
  file or via standard input if FILE  is  -.<br>
  The  file should contain just the password<br>
  on the first line  (all  other  lines  are<br>
  ignored).   Rsync  will exit with an error<br>
  if FILE is world readable or if a root-run<br>
  rsync command finds a non-root-owned file.
</p>

<br>
<br>
<br>
<br>

<p>
  This  option does not supply a password to<br>
  a remote shell transport such as  ssh;  to<br>
  learn  how  to do that, consult the remote<br>
  shell’s documentation.  When accessing  an<br>
  rsync  daemon  using a remote shell as the<br>
  transport, this  option  only  comes  into<br>
  effect after the remote shell finishes its<br>
  authentication  (i.e.  if  you  have  also<br>
  specified  a password in the daemon’s con‐<br>
  fig file).
</p>

<br>
<br>
<br>
<br>

<p>
   --list-only
</p>

<br>

<p>
  This option will cause the source files to<br>
  be  listed  instead  of transferred.  This<br>
  option is inferred if there  is  a  single<br>
  source  arg  and no destination specified,<br>
  so its main uses are: (1) to turn  a  copy<br>
  command  that  includes  a destination arg<br>
  into a file-listing command, or (2) to  be<br>
  able  to  specify more than one source arg<br>
  (note: be sure  to  include  the  destina‐<br>
  tion).   Caution:  keep  in  mind  that  a<br>
  source arg with a wild-card is expanded by<br>
  the  shell  into  multiple  args, so it is<br>
  never safe to try  to  list  such  an  arg<br>
  without using this option.  For example:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync -av --list-only foo* dest/
</p>

<br>
<br>
<br>
<br>

<p>
  Starting  with rsync 3.1.0, the sizes out‐<br>
  put by --list-only  are  affected  by  the<br>
  --human-readable  option.  By default they<br>
  will contain digit separators, but  higher<br>
  levels  of  readability  will  output  the<br>
  sizes with unit suffixes.  Note also  that<br>
  the  column  width for the size output has<br>
  increased from 11 to 14 characters for all<br>
  human-readable  levels.  Use --no-h if you<br>
  want just digits in the sizes, and the old<br>
  column width of 11 characters.
</p>

<br>
<br>
<br>
<br>

<p>
  Compatibility  note:   when  requesting  a<br>
  remote listing of files from an rsync that<br>
  is   version   2.6.3  or  older,  you  may<br>
  encounter  an  error  if  you  ask  for  a<br>
  non-recursive  listing.  This is because a<br>
  file listing implies the --dirs option w/o<br>
  --recursive,  and  older rsyncs don’t have<br>
  that  option.   To  avoid  this   problem,<br>
  either  specify  the  --no-dirs option (if<br>
  you don’t need  to  expand  a  directory’s<br>
  content), or turn on recursion and exclude<br>
  the   content   of   subdirectories:    -r<br>
  --exclude='/*/*'.
</p>

<br>
<br>
<br>
<br>

<p>
   --bwlimit=RATE
</p>

<br>

<p>
  This option allows you to specify the max‐<br>
  imum transfer rate for the data sent  over<br>
  the socket, specified in units per second.<br>
  The RATE value  can  be  suffixed  with  a<br>
  string  to indicate a size multiplier, and<br>
  may   be   a   fractional   value    (e.g.<br>
  "--bwlimit=1.5m").  If no suffix is speci‐<br>
  fied, the value will be assumed to  be  in<br>
  units  of  1024  bytes (as if "K" or "KiB"<br>
  had been appended).   See  the  --max-size<br>
  option for a description of all the avail‐<br>
  able suffixes. A value of  zero  specifies<br>
  no limit.
</p>

<br>
<br>
<br>
<br>

<p>
  For  backward-compatibility  reasons,  the<br>
  rate limit will be rounded to the  nearest<br>
  KiB  unit,  so  no  rate smaller than 1024<br>
  bytes per second is possible.
</p>

<br>
<br>
<br>
<br>

<p>
  Rsync  writes  data  over  the  socket  in<br>
  blocks,  and  this  option both limits the<br>
  size of the blocks that rsync writes,  and<br>
  tries to keep the average transfer rate at<br>
  the requested  limit.   Some  "burstiness"<br>
  may be seen where rsync writes out a block<br>
  of data and then sleeps to bring the aver‐<br>
  age rate into compliance.
</p>

<br>
<br>
<br>
<br>

<p>
  Due to the internal buffering of data, the<br>
  --progress option may not be  an  accurate<br>
  reflection  on  how fast the data is being<br>
  sent.  This is because some files can show<br>
  up  as being rapidly sent when the data is<br>
  quickly buffered, while other can show  up<br>
  as very slow when the flushing of the out‐<br>
  put buffer occurs.  This may be fixed in a<br>
  future version.
</p>

<br>
<br>
<br>
<br>

<p>
   --stop-at=y-m-dTh:m
</p>

<br>

<p>
  This  option allows you to specify at what<br>
  time      to      stop      rsync,      in<br>
  year-month-dayThour:minute  numeric format<br>
  (e.g.  2004-12-31T23:59).  You can specify<br>
  a  2  or 4-digit year.  You can also leave<br>
  off various items and the result  will  be<br>
  the  next  possible  time that matches the<br>
  specified data.  For example, "1-30" spec‐<br>
  ifies the next January 30th (at midnight),<br>
  "04:00" specifies the next 4am, "1" speci‐<br>
  fies  the  next  1st  of the month at mid‐<br>
  night, and ":59" specifies the  next  59th<br>
  minute after the hour.  If you prefer, you<br>
  may  separate  the  date   numbers   using<br>
  slashes instead of dashes.
</p>

<br>
<br>
<br>
<br>

<p>
   --time-limit=MINS
</p>

<br>

<p>
  This option allows you to specify the max‐<br>
  imum number of minutes rsync will run for.
</p>

<br>
<br>
<br>
<br>

<p>
   --write-batch=FILE
</p>

<br>

<p>
  Record a file that can later be applied to<br>
  another    identical    destination   with<br>
  --read-batch. See the "BATCH MODE" section<br>
  for      details,     and     also     the<br>
  --only-write-batch option.
</p>

<br>
<br>
<br>
<br>

<p>
   --only-write-batch=FILE
</p>

<br>

<p>
  Works like --write-batch, except  that  no<br>
  updates are made on the destination system<br>
  when creating the batch.   This  lets  you<br>
  transport  the  changes to the destination<br>
  system via some other means and then apply<br>
  the changes via --read-batch.
</p>

<br>
<br>
<br>
<br>

<p>
  Note  that  you can feel free to write the<br>
  batch directly to some portable media:  if<br>
  this  media  fills  to capacity before the<br>
  end of the transfer, you  can  just  apply<br>
  that  partial  transfer to the destination<br>
  and repeat the whole process  to  get  the<br>
  rest  of the changes (as long as you don’t<br>
  mind a partially updated destination  sys‐<br>
  tem  while  the multi-update cycle is hap‐<br>
  pening).
</p>

<br>
<br>
<br>
<br>

<p>
  Also note that  you  only  save  bandwidth<br>
  when  pushing  changes  to a remote system<br>
  because this allows the batched data to be<br>
  diverted  from  the  sender into the batch<br>
  file without having to flow over the  wire<br>
  to  the receiver (when pulling, the sender<br>
  is  remote,  and  thus  can’t  write   the<br>
  batch).
</p>

<br>
<br>
<br>
<br>

<p>
   --read-batch=FILE
</p>

<br>

<p>
  Apply all of the changes stored in FILE, a<br>
  file     previously      generated      by<br>
  --write-batch.   If  FILE  is -, the batch<br>
  data will be  read  from  standard  input.<br>
  See the "BATCH MODE" section for details.
</p>

<br>
<br>
<br>
<br>

<p>
   --protocol=NUM
</p>

<br>

<p>
  Force  an  older  protocol  version  to be<br>
  used.  This is useful for creating a batch<br>
  file that is compatible with an older ver‐<br>
  sion of rsync.   For  instance,  if  rsync<br>
  2.6.4 is being used with the --write-batch<br>
  option, but rsync 2.6.3 is  what  will  be<br>
  used  to  run the --read-batch option, you<br>
  should use "--protocol=28"  when  creating<br>
  the batch file to force the older protocol<br>
  version to  be  used  in  the  batch  file<br>
  (assuming  you  can’t upgrade the rsync on<br>
  the reading system).
</p>

<br>
<br>
<br>
<br>

<p>
   --iconv=CONVERT_SPEC
</p>

<br>

<p>
  Rsync can convert filenames between  char‐<br>
  acter  sets  using  this  option.  Using a<br>
  CONVERT_SPEC of "." tells rsync to look up<br>
  the  default  character-set via the locale<br>
  setting.  Alternately, you can fully spec‐<br>
  ify  what  conversion  to  do  by giving a<br>
  local and a remote charset separated by  a<br>
  comma  in  the order --iconv=LOCAL,REMOTE,<br>
  e.g.  --iconv=utf8,iso88591.   This  order<br>
  ensures that the option will stay the same<br>
  whether you’re pushing or  pulling  files.<br>
  Finally, you can specify either --no-iconv<br>
  or a CONVERT_SPEC of "-" to turn  off  any<br>
  conversion.   The  default setting of this<br>
  option is site-specific, and can  also  be<br>
  affected  via  the RSYNC_ICONV environment<br>
  variable.
</p>

<br>
<br>
<br>
<br>

<p>
  For a list  of  what  charset  names  your<br>
  local  iconv library supports, you can run<br>
  "iconv --list".
</p>

<br>
<br>
<br>
<br>

<p>
  If you specify the  --protect-args  option<br>
  (-s),  rsync  will translate the filenames<br>
  you specify on the command-line  that  are<br>
  being  sent  to the remote host.  See also<br>
  the --files-from option.
</p>

<br>
<br>
<br>
<br>

<p>
  Note that rsync does not do any conversion<br>
  of   names   in  filter  files  (including<br>
  include/exclude files).  It is up  to  you<br>
  to  ensure that you’re specifying matching<br>
  rules that can match on both sides of  the<br>
  transfer.   For  instance, you can specify<br>
  extra include/exclude rules if  there  are<br>
  filename differences on the two sides that<br>
  need to be accounted for.
</p>

<br>
<br>
<br>
<br>

<p>
  When you pass  an  --iconv  option  to  an<br>
  rsync  daemon  that  allows it, the daemon<br>
  uses  the   charset   specified   in   its<br>
  "charset"  configuration parameter regard‐<br>
  less of the remote  charset  you  actually<br>
  pass.   Thus, you may feel free to specify<br>
  just the local charset for a daemon trans‐<br>
  fer (e.g. --iconv=utf8).
</p>

<br>
<br>
<br>
<br>

<p>
   -4, --ipv4 or -6, --ipv6
</p>

<br>

<p>
  Tells  rsync to prefer IPv4/IPv6 when cre‐<br>
  ating sockets.  This only affects  sockets<br>
  that  rsync  has direct control over, such<br>
  as the outgoing socket when directly  con‐<br>
  tacting  an  rsync daemon.  See also these<br>
  options in the --daemon mode section.
</p>

<br>
<br>
<br>
<br>

<p>
  If rsync was complied without support  for<br>
  IPv6,  the  --ipv6  option  will  have  no<br>
  effect.  The --version  output  will  tell<br>
  you if this is the case.
</p>

<br>
<br>
<br>
<br>

<p>
   --checksum-seed=NUM
</p>

<br>

<p>
  Set  the checksum seed to the integer NUM.<br>
  This 4 byte checksum seed is  included  in<br>
  each  block and MD4 file checksum calcula‐<br>
  tion (the more modern MD5  file  checksums<br>
  don’t  use a seed).  By default the check‐<br>
  sum seed is generated by  the  server  and<br>
  defaults  to  the  current  time() .  This<br>
  option is used to set a specific  checksum<br>
  seed,  which  is  useful  for applications<br>
  that want repeatable block  checksums,  or<br>
  in  the  case  where the user wants a more<br>
  random checksum seed.  Setting  NUM  to  0<br>
  causes  rsync to use the default of time()<br>
  for checksum seed.
</p>

<br>
<br>
<br>

<p>
DAEMON OPTIONS
</p>

<p>
   The options allowed when starting an rsync daemon<br>
   are as follows:
</p>

<br>
<br>
<br>
<br>

<p>
   --daemon
</p>

<br>

<p>
  This  tells  rsync  that it is to run as a<br>
  daemon.  The daemon you start running  may<br>
  be  accessed  using  an rsync client using<br>
  the host::module  or  <a href="rsync://host/module/" title="rsync://host/module/" class="rsync">rsync://host/module/</a><br>
  syntax.
</p>

<br>
<br>
<br>
<br>

<p>
  If  standard  input is a socket then rsync<br>
  will assume  that  it  is  being  run  via<br>
  inetd,  otherwise  it will detach from the<br>
  current terminal and become  a  background<br>
  daemon.   The  daemon will read the config<br>
  file (rsyncd.conf) on each connect made by<br>
  a  client  and respond to requests accord‐<br>
  ingly.  See the  rsyncd.conf(5)  man  page<br>
  for more details.
</p>

<br>
<br>
<br>
<br>

<p>
   --address
</p>

<br>

<p>
  By default rsync will bind to the wildcard<br>
  address when run  as  a  daemon  with  the<br>
  --daemon  option.   The  --address  option<br>
  allows  you  to  specify  a  specific   IP<br>
  address  (or  hostname)  to bind to.  This<br>
  makes virtual hosting possible in conjunc‐<br>
  tion  with  the --config option.  See also<br>
  the  "address"  global   option   in   the<br>
  rsyncd.conf manpage.
</p>

<br>
<br>
<br>
<br>

<p>
   --bwlimit=RATE
</p>

<br>

<p>
  This option allows you to specify the max‐<br>
  imum transfer rate for the data the daemon<br>
  sends  over  the  socket.   The client can<br>
  still specify a smaller  --bwlimit  value,<br>
  but  no larger value will be allowed.  See<br>
  the client version of this option  (above)<br>
  for some extra details.
</p>

<br>
<br>
<br>
<br>

<p>
   --config=FILE
</p>

<br>

<p>
  This  specifies  an  alternate config file<br>
  than the default.  This is  only  relevant<br>
  when  --daemon  is specified.  The default<br>
  is /etc/rsyncd.conf unless the  daemon  is<br>
  running  over  a  remote shell program and<br>
  the remote user is not the super-user;  in<br>
  that  case  the  default is rsyncd.conf in<br>
  the current directory (typically $HOME).
</p>

<br>
<br>
<br>
<br>

<p>
   -M, --dparam=OVERRIDE
</p>

<br>

<p>
  This option can be  used  to  set  a  dae‐<br>
  mon-config   parameter  when  starting  up<br>
  rsync in daemon mode.  It is equivalent to<br>
  adding  the  parameter  at  the end of the<br>
  global settings prior to  the  first  mod‐<br>
  ule’s definition.  The parameter names can<br>
  be specified without  spaces,  if  you  so<br>
  desire.  For instance:
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 120pt'&gt;<br>
  rsync --daemon -M pidfile=/path/rsync.pid
</p>

<br>
<br>
<br>
<br>

<p>
   --no-detach
</p>

<br>

<p>
  When  running  as  a  daemon,  this option<br>
  instructs rsync to not detach  itself  and<br>
  become  a background process.  This option<br>
  is required when running as a  service  on<br>
  Cygwin,  and may also be useful when rsync<br>
  is supervised by a program such as daemon‐<br>
  tools or AIX’s System Resource Controller.<br>
  --no-detach is also recommended when rsync<br>
  is  run under a debugger.  This option has<br>
  no effect if rsync is run  from  inetd  or<br>
  sshd.
</p>

<br>
<br>
<br>
<br>

<p>
   --port=PORT
</p>

<br>

<p>
  This  specifies an alternate TCP port num‐<br>
  ber for the daemon  to  listen  on  rather<br>
  than  the  default  of  873.  See also the<br>
  "port" global option  in  the  rsyncd.conf<br>
  manpage.
</p>

<br>
<br>
<br>
<br>

<p>
   --log-file=FILE
</p>

<br>

<p>
  This  option tells the rsync daemon to use<br>
  the given log-file name instead  of  using<br>
  the "log file" setting in the config file.
</p>

<br>
<br>
<br>
<br>

<p>
   --log-file-format=FORMAT
</p>

<br>

<p>
  This  option tells the rsync daemon to use<br>
  the given FORMAT string instead  of  using<br>
  the  "log  format"  setting  in the config<br>
  file.  It also enables "transfer  logging"<br>
  unless  the string is empty, in which case<br>
  transfer logging is turned off.
</p>

<br>
<br>
<br>
<br>

<p>
   --sockopts
</p>

<br>

<p>
  This overrides the socket options  setting<br>
  in  the  rsyncd.conf file and has the same<br>
  syntax.
</p>

<br>
<br>
<br>
<br>

<p>
   -v, --verbose
</p>

<br>

<p>
  This option increases the amount of infor‐<br>
  mation  the daemon logs during its startup<br>
  phase.  After  the  client  connects,  the<br>
  daemon’s  verbosity  level  will  be  con‐<br>
  trolled by the  options  that  the  client<br>
  used  and  the  "max verbosity" setting in<br>
  the module’s config section.
</p>

<br>
<br>
<br>
<br>

<p>
   -4, --ipv4 or -6, --ipv6
</p>

<br>

<p>
  Tells rsync to prefer IPv4/IPv6 when  cre‐<br>
  ating  the incoming sockets that the rsync<br>
  daemon will use to listen for connections.<br>
  One  of  these  options may be required in<br>
  older versions of Linux to work around  an<br>
  IPv6  bug  in  the  kernel  (if you see an<br>
  "address already in use" error when  noth‐<br>
  ing else is using the port, try specifying<br>
  --ipv6 or --ipv4 when  starting  the  dae‐<br>
  mon).
</p>

<br>
<br>
<br>
<br>

<p>
  If  rsync was complied without support for<br>
  IPv6,  the  --ipv6  option  will  have  no<br>
  effect.   The  --version  output will tell<br>
  you if this is the case.
</p>

<br>
<br>
<br>
<br>

<p>
   -h, --help
</p>

<br>

<p>
  When specified  after  --daemon,  print  a<br>
  short  help  page  describing  the options<br>
  available for starting an rsync daemon.
</p>

<br>
<br>
<br>

<p>
FILTER RULES
</p>

<p>
   The filter rules allow for flexible selection  of<br>
   which files to transfer (include) and which files<br>
   to skip (exclude).   The  rules  either  directly<br>
   specify  include/exclude patterns or they specify<br>
   a way to acquire  more  include/exclude  patterns<br>
   (e.g. to read them from a file).
</p>

<br>
<br>
<br>
<br>

<p>
   As  the  list of files/directories to transfer is<br>
   built, rsync checks each name to  be  transferred<br>
   against  the  list of include/exclude patterns in<br>
   turn, and the first matching pattern is acted on:<br>
   if  it  is  an exclude pattern, then that file is<br>
   skipped; if it is an include  pattern  then  that<br>
   filename  is  not skipped; if no matching pattern<br>
   is found, then the filename is not skipped.
</p>

<br>
<br>
<br>
<br>

<p>
   Rsync builds an ordered list of filter  rules  as<br>
   specified on the command-line.  Filter rules have<br>
   the following syntax:
</p>

<br>
<br>
<br>
<br>

<p>
  RULE [PATTERN_OR_FILENAME]<br>
  RULE,MODIFIERS [PATTERN_OR_FILENAME]
</p>

<br>
<br>
<br>
<br>

<p>
   You have your choice of  using  either  short  or<br>
   long  RULE names, as described below.  If you use<br>
   a short-named rule, the ’,’ separating  the  RULE<br>
   from  the  MODIFIERS is optional.  The PATTERN or<br>
   FILENAME that follows (when  present)  must  come<br>
   after either a single space or an underscore (_).<br>
   Here are the available rule prefixes:
</p>

<br>
<br>
<br>
<br>

<p>
  exclude, - specifies an exclude pattern.<br>
  include, + specifies an include pattern.<br>
  merge, . specifies a  merge-file  to  read<br>
  for more rules.<br>
  dir-merge,  :  specifies  a  per-directory<br>
  merge-file.<br>
  hide, H specifies  a  pattern  for  hiding<br>
  files from the transfer.<br>
  show,  S  files that match the pattern are<br>
  not hidden.<br>
  protect, P specifies a  pattern  for  pro‐<br>
  tecting files from deletion.<br>
  risk,  R  files that match the pattern are<br>
  not protected.<br>
  clear,    !     clears     the     current<br>
  include/exclude list (takes no arg)
</p>

<br>
<br>
<br>
<br>

<p>
   When  rules  are  being  read  from a file, empty<br>
   lines are ignored,  as  are  comment  lines  that<br>
   start with a "#".
</p>

<br>
<br>
<br>
<br>

<p>
   Note  that  the  --include/--exclude command-line<br>
   options do not allow the full range of rule pars‐<br>
   ing  as  described  above  -- they only allow the<br>
   specification of include/exclude patterns plus  a<br>
   "!"  token to clear the list (and the normal com‐<br>
   ment parsing when rules are read  from  a  file).<br>
   If  a  pattern  does  not  begin with "- " (dash,<br>
   space) or "+ " (plus, space), then the rule  will<br>
   be interpreted as if "+ " (for an include option)<br>
   or "- " (for an exclude option) were prefixed  to<br>
   the  string.   A  --filter  option,  on the other<br>
   hand, must always contain either a short or  long<br>
   rule name at the start of the rule.
</p>

<br>
<br>
<br>
<br>

<p>
   Note  also  that  the  --filter,  --include,  and<br>
   --exclude options take one rule/pattern each.  To<br>
   add  multiple ones, you can repeat the options on<br>
   the command-line, use the  merge-file  syntax  of<br>
   the       --filter       option,      or      the<br>
   --include-from/--exclude-from options.
</p>

<br>
<br>
<br>

<p>
INCLUDE/EXCLUDE PATTERN RULES
</p>

<p>
   You can include and exclude files  by  specifying<br>
   patterns  using  the  "+", "-", etc. filter rules<br>
   (as  introduced  in  the  FILTER  RULES   section<br>
   above).  The include/exclude rules each specify a<br>
   pattern that is matched against the names of  the<br>
   files  that  are  going to be transferred.  These<br>
   patterns can take several forms:
</p>

<br>
<br>
<br>
<br>

<p>
   o      if the pattern starts with a / then it  is
</p>

<br>

<p>
  anchored to a particular spot in the hier‐<br>
  archy of files, otherwise  it  is  matched<br>
  against  the end of the pathname.  This is<br>
  similar to a leading ^ in regular  expres‐<br>
  sions.   Thus "/foo" would match a name of<br>
  "foo" at either the "root of the transfer"<br>
  (for a global rule) or in the merge-file’s<br>
  directory (for a per-directory rule).   An<br>
  unqualified  "foo"  would  match a name of<br>
  "foo" anywhere in  the  tree  because  the<br>
  algorithm  is applied recursively from the<br>
  top down; it behaves as if each path  com‐<br>
  ponent gets a turn at being the end of the<br>
  filename.  Even the  unanchored  "sub/foo"<br>
  would  match at any point in the hierarchy<br>
  where a "foo" was found within a directory<br>
  named "sub".  See the section on ANCHORING<br>
  INCLUDE/EXCLUDE PATTERNS for a  full  dis‐<br>
  cussion  of  how to specify a pattern that<br>
  matches at the root of the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
   o      if the pattern ends with a / then it  will
</p>

<br>

<p>
  only  match  a  directory,  not  a regular<br>
  file, symlink, or device.
</p>

<br>
<br>
<br>
<br>

<p>
   o      rsync  chooses  between  doing  a   simple
</p>

<br>

<p>
  string  match  and  wildcard  matching  by<br>
  checking if the pattern  contains  one  of<br>
  these three wildcard characters: ’*’, ’?’,<br>
  and ’[’ .
</p>

<br>
<br>
<br>
<br>

<p>
   o      a ’*’ matches any path component,  but  it
</p>

<br>

<p>
  stops at slashes.
</p>

<br>
<br>
<br>
<br>

<p>
   o      use  ’**’  to  match  anything,  including
</p>

<br>

<p>
  slashes.
</p>

<br>
<br>
<br>
<br>

<p>
   o      a ’?’ matches any character except a slash
</p>

<br>

<p>
  (/).
</p>

<br>
<br>
<br>
<br>

<p>
   o      a  ’[’  introduces a character class, such
</p>

<br>

<p>
  as [a-z] or :alpha:.
</p>

<br>
<br>
<br>
<br>

<p>
   o      in a wildcard pattern, a backslash can  be
</p>

<br>

<p>
  used  to  escape a wildcard character, but<br>
  it is matched literally when no  wildcards<br>
  are  present.  This means that there is an<br>
  extra level of backslash  removal  when  a<br>
  pattern  contains wildcard characters com‐<br>
  pared to a pattern that has none.  e.g. if<br>
  you  add  a  wildcard  to "foo\bar" (which<br>
  matches the backslash) you would  need  to<br>
  use "foo\\bar*" to avoid the "\b" becoming<br>
  just "b".
</p>

<br>
<br>
<br>
<br>

<p>
   o      if the pattern contains a / (not  counting
</p>

<br>

<p>
  a  trailing  /)  or  a  "**",  then  it is<br>
  matched against the full pathname, includ‐<br>
  ing  any  leading directories. If the pat‐<br>
  tern doesn’t contain a / or a  "**",  then<br>
  it  is matched only against the final com‐<br>
  ponent of the  filename.   (Remember  that<br>
  the  algorithm  is  applied recursively so<br>
  "full filename" can actually be  any  por‐<br>
  tion of a path from the starting directory<br>
  on down.)
</p>

<br>
<br>
<br>
<br>

<p>
   o      a trailing "dir_name/***" will match  both
</p>

<br>

<p>
  the  directory (as if "dir_name/" had been<br>
  specified) and everything in the directory<br>
  (as  if "dir_name/**" had been specified).<br>
  This behavior was added in version 2.6.7.
</p>

<br>
<br>
<br>
<br>

<p>
   Note that, when using the --recursive (-r) option<br>
   (which  is  implied by -a), every subcomponent of<br>
   every path is  visited  from  the  top  down,  so<br>
   include/exclude  patterns get applied recursively<br>
   to each subcomponent’s full name (e.g. to include<br>
   "/foo/bar/baz"   the   subcomponents  "/foo"  and<br>
   "/foo/bar" must not be  excluded).   The  exclude<br>
   patterns  actually  short-circuit  the  directory<br>
   traversal stage when rsync  finds  the  files  to<br>
   send.   If a pattern excludes a particular parent<br>
   directory, it can render a deeper include pattern<br>
   ineffectual because rsync did not descend through<br>
   that excluded section of the hierarchy.  This  is<br>
   particularly  important when using a trailing ’*’<br>
   rule.  For instance, this won’t work:
</p>

<br>
<br>
<br>
<br>

<p>
  + /some/path/this-file-will-not-be-found<br>
  + /file-is-included<br>
  - *
</p>

<br>
<br>
<br>
<br>

<p>
   This fails because the parent directory "some" is<br>
   excluded  by  the ’*’ rule, so rsync never visits<br>
   any of the files in  the  "some"  or  "some/path"<br>
   directories.   One  solution  is  to  ask for all<br>
   directories in the hierarchy to  be  included  by<br>
   using  a  single  rule:  "+ */" (put it somewhere<br>
   before the "-  *"  rule),  and  perhaps  use  the<br>
   --prune-empty-dirs  option.   Another solution is<br>
   to add specific include rules for all the  parent<br>
   dirs that need to be visited.  For instance, this<br>
   set of rules works fine:
</p>

<br>
<br>
<br>
<br>

<p>
  + /some/<br>
  + /some/path/<br>
  + /some/path/this-file-is-found<br>
  + /file-also-included<br>
  - *
</p>

<br>
<br>
<br>
<br>

<p>
   Here are some examples of exclude/include  match‐<br>
   ing:
</p>

<br>
<br>
<br>
<br>

<p>
   o      "-  *.o"  would exclude all names matching
</p>

<br>

<p>
  *.o
</p>

<br>
<br>
<br>
<br>

<p>
   o      "- /foo" would exclude a file  (or  direc‐
</p>

<br>

<p>
  tory)   named  foo  in  the  transfer-root<br>
  directory
</p>

<br>
<br>
<br>
<br>

<p>
   o      "- foo/" would exclude any directory named
</p>

<br>

<p>
  foo
</p>

<br>
<br>
<br>
<br>

<p>
   o      "-  /foo/*/bar"  would  exclude  any  file
</p>

<br>

<p>
  named bar which is at two levels  below  a<br>
  directory  named  foo in the transfer-root<br>
  directory
</p>

<br>
<br>
<br>
<br>

<p>
   o      "- /foo/**/bar"  would  exclude  any  file
</p>

<br>

<p>
  named  bar  two  or  more  levels  below a<br>
  directory named foo in  the  transfer-root<br>
  directory
</p>

<br>
<br>
<br>
<br>

<p>
   o      The combination of "+ */", "+ *.c", and "-
</p>

<br>

<p>
  *" would include  all  directories  and  C<br>
  source  files  but  nothing else (see also<br>
  the --prune-empty-dirs option)
</p>

<br>
<br>
<br>
<br>

<p>
   o      The   combination   of   "+   foo/",    "+
</p>

<br>

<p>
  foo/bar.c",  and  "- *" would include only<br>
  the foo directory and foo/bar.c  (the  foo<br>
  directory  must  be explicitly included or<br>
  it would be excluded by the "*")
</p>

<br>
<br>
<br>
<br>

<p>
   The following modifiers are accepted after a  "+"<br>
   or "-":
</p>

<br>
<br>
<br>
<br>

<p>
   o      A  /  specifies  that  the include/exclude
</p>

<br>

<p>
  rule should be matched against  the  abso‐<br>
  lute  pathname  of  the current item.  For<br>
  example, "-/  /etc/passwd"  would  exclude<br>
  the  passwd file any time the transfer was<br>
  sending files from the  "/etc"  directory,<br>
  and  "-/  subdir/foo" would always exclude<br>
  "foo" when it is in a dir named  "subdir",<br>
  even  if  "foo" is at the root of the cur‐<br>
  rent transfer.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A !  specifies  that  the  include/exclude
</p>

<br>

<p>
  should take effect if the pattern fails to<br>
  match.   For  instance,  "-!   */"   would<br>
  exclude all non-directories.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A  C  is  used  to  indicate  that all the
</p>

<br>

<p>
  global   CVS-exclude   rules   should   be<br>
  inserted as excludes in place of the "-C".<br>
  No arg should follow.
</p>

<br>
<br>
<br>
<br>

<p>
   o      An s is used to  indicate  that  the  rule
</p>

<br>

<p>
  applies  to the sending side.  When a rule<br>
  affects  the  sending  side,  it  prevents<br>
  files from being transferred.  The default<br>
  is for a rule to affect both sides  unless<br>
  --delete-excluded  was specified, in which<br>
  case  default  rules  become   sender-side<br>
  only.   See also the hide (H) and show (S)<br>
  rules, which are an alternate way to spec‐<br>
  ify sending-side includes/excludes.
</p>

<br>
<br>
<br>
<br>

<p>
   o      An  r  is  used  to indicate that the rule
</p>

<br>

<p>
  applies to the  receiving  side.   When  a<br>
  rule  affects  the receiving side, it pre‐<br>
  vents files from being deleted.  See the s<br>
  modifier for more info.  See also the pro‐<br>
  tect (P) and risk (R) rules, which are  an<br>
  alternate  way  to  specify  receiver-side<br>
  includes/excludes.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A p indicates that a rule  is  perishable,
</p>

<br>

<p>
  meaning  that it is ignored in directories<br>
  that are being deleted.  For instance, the<br>
  -C  option’s  default  rules  that exclude<br>
  things like "CVS" and "*.o" are marked  as<br>
  perishable,  and will not prevent a direc‐<br>
  tory that was removed on the  source  from<br>
  being deleted on the destination.
</p>

<br>
<br>
<br>

<p>
MERGE-FILE FILTER RULES
</p>

<p>
   You  can merge whole files into your filter rules<br>
   by specifying either a merge (.) or  a  dir-merge<br>
   (:)  filter  rule  (as  introduced  in the FILTER<br>
   RULES section above).
</p>

<br>
<br>
<br>
<br>

<p>
   There are two  kinds  of  merged  files  --  sin‐<br>
   gle-instance  (’.’)  and  per-directory (’:’).  A<br>
   single-instance merge file is read one time,  and<br>
   its  rules  are incorporated into the filter list<br>
   in the place of the "." rule.  For  per-directory<br>
   merge files, rsync will scan every directory that<br>
   it traverses for the named file, merging its con‐<br>
   tents  when the file exists into the current list<br>
   of inherited  rules.   These  per-directory  rule<br>
   files must be created on the sending side because<br>
   it is the sending side that is being scanned  for<br>
   the  available  files  to  transfer.   These rule<br>
   files may also need  to  be  transferred  to  the<br>
   receiving  side  if  you want them to affect what<br>
   files don’t get deleted (see PER-DIRECTORY  RULES<br>
   AND DELETE below).
</p>

<br>
<br>
<br>
<br>

<p>
   Some examples:
</p>

<br>
<br>
<br>
<br>

<p>
  merge /etc/rsync/default.rules<br>
  . /etc/rsync/default.rules<br>
  dir-merge .per-dir-filter<br>
  dir-merge,n-                   .non-inher‐<br>
  ited-per-dir-excludes<br>
  :n- .non-inherited-per-dir-excludes
</p>

<br>
<br>
<br>
<br>

<p>
   The following  modifiers  are  accepted  after  a<br>
   merge or dir-merge rule:
</p>

<br>
<br>
<br>
<br>

<p>
   o      A - specifies that the file should consist
</p>

<br>

<p>
  of only exclude patterns,  with  no  other<br>
  rule-parsing except for in-file comments.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A + specifies that the file should consist
</p>

<br>

<p>
  of only include patterns,  with  no  other<br>
  rule-parsing except for in-file comments.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A  C  is  a  way  to specify that the file
</p>

<br>

<p>
  should be read in a CVS-compatible manner.<br>
  This  turns on ’n’, ’w’, and ’-’, but also<br>
  allows the list-clearing token (!)  to  be<br>
  specified.   If  no  filename is provided,<br>
  ".cvsignore" is assumed.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A e will exclude the merge-file name  from
</p>

<br>

<p>
  the  transfer;  e.g.  "dir-merge,e .rules"<br>
  is like "dir-merge .rules" and "- .rules".
</p>

<br>
<br>
<br>
<br>

<p>
   o      An n specifies  that  the  rules  are  not
</p>

<br>

<p>
  inherited by subdirectories.
</p>

<br>
<br>
<br>
<br>

<p>
   o      A   w   specifies   that   the  rules  are
</p>

<br>

<p>
  word-split on whitespace  instead  of  the<br>
  normal  line-splitting.   This  also turns<br>
  off comments.  Note: the space that  sepa‐<br>
  rates  the prefix from the rule is treated<br>
  specially, so "- foo + bar" is  parsed  as<br>
  two  rules  (assuming  that prefix-parsing<br>
  wasn’t also disabled).
</p>

<br>
<br>
<br>
<br>

<p>
   o      You may also specify any of the  modifiers
</p>

<br>

<p>
  for  the "+" or "-" rules (above) in order<br>
  to have the rules that are  read  in  from<br>
  the  file  default to having that modifier<br>
  set (except  for  the  !  modifier,  which<br>
  would   not  be  useful).   For  instance,<br>
  "merge,-/ .excl" would treat the  contents<br>
  of  .excl as absolute-path excludes, while<br>
  "dir-merge,s .filt" and ":sC"  would  each<br>
  make  all  their per-directory rules apply<br>
  only on the sending side.   If  the  merge<br>
  rule  specifies sides to affect (via the s<br>
  or r modifier or both), then the rules  in<br>
  the  file  must  not  specify sides (via a<br>
  modifier or a rule prefix such as hide).
</p>

<br>
<br>
<br>
<br>

<p>
   Per-directory rules are inherited in  all  subdi‐<br>
   rectories  of  the directory where the merge-file<br>
   was found unless the ’n’ modifier was used.  Each<br>
   subdirectory’s  rules  are prefixed to the inher‐<br>
   ited per-directory rules from its parents,  which<br>
   gives the newest rules a higher priority than the<br>
   inherited rules.  The  entire  set  of  dir-merge<br>
   rules  are grouped together in the spot where the<br>
   merge-file was specified, so it  is  possible  to<br>
   override  dir-merge  rules  via  a  rule that got<br>
   specified earlier in the list  of  global  rules.<br>
   When  the list-clearing rule ("!") is read from a<br>
   per-directory file, it only clears the  inherited<br>
   rules for the current merge file.
</p>

<br>
<br>
<br>
<br>

<p>
   Another  way  to  prevent  a  single  rule from a<br>
   dir-merge file from being inherited is to  anchor<br>
   it  with  a  leading  slash.  Anchored rules in a<br>
   per-directory  merge-file  are  relative  to  the<br>
   merge-file’s directory, so a pattern "/foo" would<br>
   only match the file "foo" in the directory  where<br>
   the dir-merge filter file was found.
</p>

<br>
<br>
<br>
<br>

<p>
   Here’s an example filter file which you’d specify<br>
   via --filter=". file":
</p>

<br>
<br>
<br>
<br>

<p>
  merge /home/user/.global-filter<br>
  - *.gz<br>
  dir-merge .rules<br>
  + *.[ch]<br>
  - *.o
</p>

<br>
<br>
<br>
<br>

<p>
   This   will   merge   the   contents    of    the<br>
   /home/user/.global-filter  file  at  the start of<br>
   the list and also  turns  the  ".rules"  filename<br>
   into a per-directory filter file.  All rules read<br>
   in prior to the start of the directory scan  fol‐<br>
   low  the  global  anchoring rules (i.e. a leading<br>
   slash matches at the root of the transfer).
</p>

<br>
<br>
<br>
<br>

<p>
   If a per-directory merge-file is specified with a<br>
   path  that  is  a  parent  directory of the first<br>
   transfer directory, rsync will scan all the  par‐<br>
   ent dirs from that starting point to the transfer<br>
   directory for the indicated  per-directory  file.<br>
   For instance, here is a common filter (see -F):
</p>

<br>
<br>
<br>
<br>

<p>
  --filter=': /.rsync-filter'
</p>

<br>
<br>
<br>
<br>

<p>
   That  rule  tells  rsync  to  scan  for  the file<br>
   .rsync-filter in all directories  from  the  root<br>
   down through the parent directory of the transfer<br>
   prior to the start of the normal  directory  scan<br>
   of the file in the directories that are sent as a<br>
   part of the transfer.  (Note: for an  rsync  dae‐<br>
   mon,  the root is always the same as the module’s<br>
   "path".)
</p>

<br>
<br>
<br>
<br>

<p>
   Some examples of this pre-scanning for per-direc‐<br>
   tory files:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync -avF /src/path/ /dest/dir<br>
  rsync -av --filter=': ../../.rsync-filter'<br>
  /src/path/ /dest/dir<br>
  rsync   -av   --filter=':   .rsync-filter'<br>
  /src/path/ /dest/dir
</p>

<br>
<br>
<br>
<br>

<p>
   The  first  two  commands  above  will  look  for<br>
   ".rsync-filter" in "/" and "/src" before the nor‐<br>
   mal   scan   begins   looking  for  the  file  in<br>
   "/src/path" and  its  subdirectories.   The  last<br>
   command avoids the parent-dir scan and only looks<br>
   for the ".rsync-filter" files in  each  directory<br>
   that is a part of the transfer.
</p>

<br>
<br>
<br>
<br>

<p>
   If you want to include the contents of a ".cvsig‐<br>
   nore" in your patterns, you should use  the  rule<br>
   ":C", which creates a dir-merge of the .cvsignore<br>
   file, but parsed in a CVS-compatible manner.  You<br>
   can  use  this  to affect where the --cvs-exclude<br>
   (-C)  option’s  inclusion  of  the  per-directory<br>
   .cvsignore  file  gets  placed into your rules by<br>
   putting the ":C" wherever you like in your filter<br>
   rules.    Without   this,  rsync  would  add  the<br>
   dir-merge rule for the .cvsignore file at the end<br>
   of all your other rules (giving it a lower prior‐<br>
   ity than your command-line rules).  For example:
</p>

<br>
<br>
<br>
<br>

<p>
  cat &lt;&lt;EOT | rsync -avC --filter='. -' a/ b<br>
  + foo.o<br>
  :C<br>
  - *.old<br>
  EOT<br>
  rsync   -avC   --include=foo.o    -f    :C<br>
  --exclude='*.old' a/ b
</p>

<br>
<br>
<br>
<br>

<p>
   Both  of  the above rsync commands are identical.<br>
   Each one will merge all the per-directory .cvsig‐<br>
   nore  rules in the middle of the list rather than<br>
   at the end.  This allows their dir-specific rules<br>
   to supersede the rules that follow the :C instead<br>
   of being  subservient  to  all  your  rules.   To<br>
   affect  the  other  CVS  exclude  rules (i.e. the<br>
   default  list  of  exclusions,  the  contents  of<br>
   $HOME/.cvsignore,  and  the  value of $CVSIGNORE)<br>
   you should omit the -C  command-line  option  and<br>
   instead  insert  a  "-C"  rule  into  your filter<br>
   rules; e.g. "--filter=-C".
</p>

<br>
<br>
<br>

<p>
LIST-CLEARING FILTER RULE
</p>

<p>
   You can clear the current include/exclude list by<br>
   using  the  "!" filter rule (as introduced in the<br>
   FILTER RULES section above).  The "current"  list<br>
   is  either  the global list of rules (if the rule<br>
   is encountered while parsing the filter  options)<br>
   or a set of per-directory rules (which are inher‐<br>
   ited in their own sub-list, so a subdirectory can<br>
   use this to clear out the parent’s rules).
</p>

<br>
<br>
<br>

<p>
ANCHORING INCLUDE/EXCLUDE PATTERNS
</p>

<p>
   As mentioned earlier, global include/exclude pat‐<br>
   terns are anchored at the "root of the  transfer"<br>
   (as  opposed to per-directory patterns, which are<br>
   anchored at the merge-file’s directory).  If  you<br>
   think  of the transfer as a subtree of names that<br>
   are being  sent  from  sender  to  receiver,  the<br>
   transfer-root  is  where  the  tree  starts to be<br>
   duplicated in the  destination  directory.   This<br>
   root  governs  where patterns that start with a /<br>
   match.
</p>

<br>
<br>
<br>
<br>

<p>
   Because the matching is relative  to  the  trans‐<br>
   fer-root, changing the trailing slash on a source<br>
   path or  changing  your  use  of  the  --relative<br>
   option  affects  the path you need to use in your<br>
   matching (in addition to changing how much of the<br>
   file tree is duplicated on the destination host).<br>
   The following examples demonstrate this.
</p>

<br>
<br>
<br>
<br>

<p>
   Let’s say that we want to match two source files,<br>
   one  with an absolute path of "/home/me/foo/bar",<br>
   and one with a path of "/home/you/bar/baz".  Here<br>
   is  how  the various command choices differ for a<br>
   2-source transfer:
</p>

<br>
<br>
<br>
<br>

<p>
  Example cmd: rsync -a  /home/me  /home/you<br>
  /dest<br>
  +/- pattern: /me/foo/bar<br>
  +/- pattern: /you/bar/baz<br>
  Target file: /dest/me/foo/bar<br>
  Target file: /dest/you/bar/baz
</p>

<br>
<br>
<br>
<br>

<p>
  Example cmd: rsync -a /home/me/ /home/you/<br>
  /dest<br>
  +/- pattern: /foo/bar                (note<br>
  missing "me")<br>
  +/-  pattern: /bar/baz               (note<br>
  missing "you")<br>
  Target file: /dest/foo/bar<br>
  Target file: /dest/bar/baz
</p>

<br>
<br>
<br>
<br>

<p>
  Example cmd: rsync -a --relative /home/me/<br>
  /home/you /dest<br>
  +/-  pattern: /home/me/foo/bar       (note<br>
  full path)<br>
  +/-       pattern:       /home/you/bar/baz<br>
  (ditto)<br>
  Target file: /dest/home/me/foo/bar<br>
  Target file: /dest/home/you/bar/baz
</p>

<br>
<br>
<br>
<br>

<p>
  Example cmd: cd /home; rsync -a --relative<br>
  me/foo you/ /dest<br>
  +/- pattern: /me/foo/bar       (starts  at<br>
  specified path)<br>
  +/- pattern: /you/bar/baz     (ditto)<br>
  Target file: /dest/me/foo/bar<br>
  Target file: /dest/you/bar/baz
</p>

<br>
<br>
<br>
<br>

<p>
   The  easiest way to see what name you should fil‐<br>
   ter is to just look  at  the  output  when  using<br>
   --verbose  and  put a / in front of the name (use<br>
   the --dry-run option if you’re not yet  ready  to<br>
   copy any files).
</p>

<br>
<br>
<br>

<p>
PER-DIRECTORY RULES AND DELETE
</p>

<p>
   Without  a delete option, per-directory rules are<br>
   only relevant on the sending  side,  so  you  can<br>
   feel  free  to exclude the merge files themselves<br>
   without affecting the  transfer.   To  make  this<br>
   easy, the ’e’ modifier adds this exclude for you,<br>
   as seen in these two equivalent commands:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync     -av      --filter=':      .excl'<br>
  --exclude=.excl host:src/dir /dest<br>
  rsync -av --filter=':e .excl' host:src/dir<br>
  /dest
</p>

<br>
<br>
<br>
<br>

<p>
   However, if you  want  to  do  a  delete  on  the<br>
   receiving  side  AND  you  want  some files to be<br>
   excluded from being deleted, you’ll  need  to  be<br>
   sure  that the receiving side knows what files to<br>
   exclude.  The  easiest  way  is  to  include  the<br>
   per-directory merge files in the transfer and use<br>
   --delete-after, because  this  ensures  that  the<br>
   receiving side gets all the same exclude rules as<br>
   the sending side before it tries to  delete  any‐<br>
   thing:
</p>

<br>
<br>
<br>
<br>

<p>
  rsync   -avF  --delete-after  host:src/dir<br>
  /dest
</p>

<br>
<br>
<br>
<br>

<p>
   However, if the merge files are not a part of the<br>
   transfer,  you’ll  need  to  either  specify some<br>
   global exclude rules (i.e. specified on the  com‐<br>
   mand  line),  or you’ll need to maintain your own<br>
   per-directory merge files on the receiving  side.<br>
   An  example of the first is this (assume that the<br>
   remote .rules files exclude themselves):
</p>

<br>
<br>
<br>
<br>

<p>
   rsync -av --filter=’: .rules’ --filter=’. /my/extra.rules’
</p>

<br>

<p>
  --delete host:src/dir /dest
</p>

<br>
<br>
<br>
<br>

<p>
   In the above example  the  extra.rules  file  can<br>
   affect  both  sides  of the transfer, but (on the<br>
   sending side) the rules are  subservient  to  the<br>
   rules  merged  from the .rules files because they<br>
   were  specified  after  the  per-directory  merge<br>
   rule.
</p>

<br>
<br>
<br>
<br>

<p>
   In  one final example, the remote side is exclud‐<br>
   ing the .rsync-filter files  from  the  transfer,<br>
   but we want to use our own .rsync-filter files to<br>
   control what gets deleted on the receiving  side.<br>
   To  do  this  we  must  specifically  exclude the<br>
   per-directory merge files (so that they don’t get<br>
   deleted)  and then put rules into the local files<br>
   to control what  else  should  not  get  deleted.<br>
   Like one of these commands:
</p>

<br>
<br>
<br>
<br>

<p>
   rsync -av --filter=':e /.rsync-filter' --delete \
</p>

<br>

<p>
   host:src/dir /dest
</p>

<br>

<p>
   rsync -avFF --delete host:src/dir /dest
</p>

<br>
<br>
<br>

<p>
BATCH MODE
</p>

<p>
   Batch  mode  can be used to apply the same set of<br>
   updates to many identical  systems.  Suppose  one<br>
   has  a  tree  which  is replicated on a number of<br>
   hosts.  Now suppose some changes have  been  made<br>
   to  this source tree and those changes need to be<br>
   propagated to the other hosts.  In  order  to  do<br>
   this  using  batch  mode,  rsync  is run with the<br>
   write-batch option to apply the changes  made  to<br>
   the  source tree to one of the destination trees.<br>
   The write-batch option causes the rsync client to<br>
   store  in  a  "batch  file"  all  the information<br>
   needed to repeat this  operation  against  other,<br>
   identical destination trees.
</p>

<br>
<br>
<br>
<br>

<p>
   Generating  the  batch  file once saves having to<br>
   perform the file status, checksum, and data block<br>
   generation  more than once when updating multiple<br>
   destination trees. Multicast transport  protocols<br>
   can be used to transfer the batch update files in<br>
   parallel to many hosts at once, instead of  send‐<br>
   ing the same data to every host individually.
</p>

<br>
<br>
<br>
<br>

<p>
   To apply the recorded changes to another destina‐<br>
   tion tree, run rsync with the read-batch  option,<br>
   specifying  the  name of the same batch file, and<br>
   the destination tree.  Rsync updates the destina‐<br>
   tion  tree  using  the  information stored in the<br>
   batch file.
</p>

<br>
<br>
<br>
<br>

<p>
   For your convenience, a script file is also  cre‐<br>
   ated  when  the  write-batch  option is used:  it<br>
   will be named the same as  the  batch  file  with<br>
   ".sh" appended.  This script file contains a com‐<br>
   mand-line suitable  for  updating  a  destination<br>
   tree  using  the associated batch file. It can be<br>
   executed using a Bourne (or  Bourne-like)  shell,<br>
   optionally  passing  in  an alternate destination<br>
   tree pathname which is then used instead  of  the<br>
   original  destination  path.  This is useful when<br>
   the destination tree path  on  the  current  host<br>
   differs  from  the  one  used to create the batch<br>
   file.
</p>

<br>
<br>
<br>
<br>

<p>
   Examples:
</p>

<br>
<br>
<br>
<br>

<p>
  $     rsync      --write-batch=foo      -a<br>
  host:/source/dir/ /adest/dir/<br>
  $ scp foo* remote:<br>
  $ ssh remote ./foo.sh /bdest/dir/
</p>

<br>
<br>
<br>
<br>

<p>
  $  rsync --write-batch=foo -a /source/dir/<br>
  /adest/dir/<br>
  $  ssh  remote  rsync  --read-batch=-   -a<br>
  /bdest/dir/ &lt;foo
</p>

<br>
<br>
<br>
<br>

<p>
   In  these  examples,  rsync  is  used  to  update<br>
   /adest/dir/ from /source/dir/ and the information<br>
   to  repeat  this operation is stored in "foo" and<br>
   "foo.sh".  The host "remote" is then updated with<br>
   the   batched   data  going  into  the  directory<br>
   /bdest/dir.   The  differences  between  the  two<br>
   examples reveals some of the flexibility you have<br>
   in how you deal with batches:
</p>

<br>
<br>
<br>
<br>

<p>
   o      The first example shows that  the  initial
</p>

<br>

<p>
  copy  doesn’t  have to be local -- you can<br>
  push or pull data to/from  a  remote  host<br>
  using  either  the  remote-shell syntax or<br>
  rsync daemon syntax, as desired.
</p>

<br>
<br>
<br>
<br>

<p>
   o      The  first  example   uses   the   created
</p>

<br>

<p>
  "foo.sh"  file  to  get  the  right  rsync<br>
  options when running the  read-batch  com‐<br>
  mand on the remote host.
</p>

<br>
<br>
<br>
<br>

<p>
   o      The  second  example  reads the batch data
</p>

<br>

<p>
  via standard input so that the batch  file<br>
  doesn’t  need  to  be copied to the remote<br>
  machine first.  This  example  avoids  the<br>
  foo.sh  script  because it needed to use a<br>
  modified  --read-batch  option,  but   you<br>
  could  edit  the script file if you wished<br>
  to make use of it (just be  sure  that  no<br>
  other  option  is  trying  to use standard<br>
  input,  such  as  the   "--exclude-from=-"<br>
  option).
</p>

<br>
<br>
<br>
<br>

<p>
   Caveats:
</p>

<br>
<br>
<br>
<br>

<p>
   The  read-batch  option  expects  the destination<br>
   tree that it is updating to be identical  to  the<br>
   destination  tree  that  was  used  to create the<br>
   batch update fileset.  When a difference  between<br>
   the  destination  trees is encountered the update<br>
   might be discarded with a warning  (if  the  file<br>
   appears   to   be   up-to-date  already)  or  the<br>
   file-update may be attempted  and  then,  if  the<br>
   file  fails  to verify, the update discarded with<br>
   an error.  This means that it should be  safe  to<br>
   re-run  a read-batch operation if the command got<br>
   interrupted.   If   you   wish   to   force   the<br>
   batched-update  to always be attempted regardless<br>
   of the file’s size and date, use  the  -I  option<br>
   (when  reading  the  batch).  If an error occurs,<br>
   the destination tree will probably be in  a  par‐<br>
   tially  updated state. In that case, rsync can be<br>
   used in its regular (non-batch) mode of operation<br>
   to fix up the destination tree.
</p>

<br>
<br>
<br>
<br>

<p>
   The  rsync  version used on all destinations must<br>
   be at least as new as the one  used  to  generate<br>
   the  batch file.  Rsync will die with an error if<br>
   the protocol version in the batch file is too new<br>
   for  the batch-reading rsync to handle.  See also<br>
   the --protocol option for a way to have the  cre‐<br>
   ating  rsync  generate a batch file that an older<br>
   rsync can understand.   (Note  that  batch  files<br>
   changed  format  in version 2.6.3, so mixing ver‐<br>
   sions older than that with  newer  versions  will<br>
   not work.)
</p>

<br>
<br>
<br>
<br>

<p>
   When  reading  a batch file, rsync will force the<br>
   value of certain options to match the data in the<br>
   batch  file if you didn’t set them to the same as<br>
   the batch-writing  command.   Other  options  can<br>
   (and    should)   be   changed.    For   instance<br>
   --write-batch    changes     to     --read-batch,<br>
   --files-from   is   dropped,   and   the   --fil‐<br>
   ter/--include/--exclude options  are  not  needed<br>
   unless one of the --delete options is specified.
</p>

<br>
<br>
<br>
<br>

<p>
   The  code  that  creates the BATCH.sh file trans‐<br>
   forms any filter/include/exclude options  into  a<br>
   single list that is appended as a "here" document<br>
   to the shell script file.  An advanced  user  can<br>
   use  this  to modify the exclude list if a change<br>
   in what gets deleted by --delete is  desired.   A<br>
   normal  user  can ignore this detail and just use<br>
   the shell script as an easy way to run the appro‐<br>
   priate --read-batch command for the batched data.
</p>

<br>
<br>
<br>
<br>

<p>
   The  original  batch  mode  in rsync was based on<br>
   "rsync+", but  the  latest  version  uses  a  new<br>
   implementation.
</p>

<br>
<br>
<br>

<p>
SYMBOLIC LINKS
</p>

<p>
   Three  basic  behaviors  are  possible when rsync<br>
   encounters a symbolic link in the  source  direc‐<br>
   tory.
</p>

<br>
<br>
<br>
<br>

<p>
   By default, symbolic links are not transferred at<br>
   all.  A message "skipping  non-regular"  file  is<br>
   emitted for any symlinks that exist.
</p>

<br>
<br>
<br>
<br>

<p>
   If --links is specified, then symlinks are recre‐<br>
   ated with the same  target  on  the  destination.<br>
   Note that --archive implies --links.
</p>

<br>
<br>
<br>
<br>

<p>
   If  --copy-links  is specified, then symlinks are<br>
   "collapsed" by  copying  their  referent,  rather<br>
   than the symlink.
</p>

<br>
<br>
<br>
<br>

<p>
   Rsync  can  also  distinguish "safe" and "unsafe"<br>
   symbolic links.  An example where this  might  be<br>
   used  is  a web site mirror that wishes to ensure<br>
   that the rsync module that  is  copied  does  not<br>
   include symbolic links to /etc/passwd in the pub‐<br>
   lic    section    of     the     site.      Using<br>
   --copy-unsafe-links  will  cause  any links to be<br>
   copied as the file they point to on the  destina‐<br>
   tion.  Using --safe-links will cause unsafe links<br>
   to be omitted altogether.  (Note  that  you  must<br>
   specify  --links  for  --safe-links  to  have any<br>
   effect.)
</p>

<br>
<br>
<br>
<br>

<p>
   Symbolic links are considered unsafe if they  are<br>
   absolute  symlinks  (start  with /), empty, or if<br>
   they contain enough  ".."  components  to  ascend<br>
   from the directory being copied.
</p>

<br>
<br>
<br>
<br>

<p>
   Here’s  a  summary of how the symlink options are<br>
   interpreted.  The list is in order of precedence,<br>
   so  if  your  combination  of  options isn’t men‐<br>
   tioned, use the first line  that  is  a  complete<br>
   subset of your options:
</p>

<br>
<br>
<br>
<br>

<p>
   --copy-links
</p>

<br>

<p>
  Turn all symlinks into normal files (leav‐<br>
  ing no symlinks for any other  options  to<br>
  affect).
</p>

<br>
<br>
<br>
<br>

<p>
   --links --copy-unsafe-links
</p>

<br>

<p>
  Turn  all  unsafe  symlinks into files and<br>
  duplicate all safe symlinks.
</p>

<br>
<br>
<br>
<br>

<p>
   --copy-unsafe-links
</p>

<br>

<p>
  Turn all unsafe symlinks into files, nois‐<br>
  ily skip all safe symlinks.
</p>

<br>
<br>
<br>
<br>

<p>
   --links --safe-links
</p>

<br>

<p>
  Duplicate  safe  symlinks  and skip unsafe<br>
  ones.
</p>

<br>
<br>
<br>
<br>

<p>
   --links
</p>

<br>

<p>
  Duplicate all symlinks.
</p>

<br>
<br>
<br>

<p>
DIAGNOSTICS
</p>

<p>
   rsync occasionally produces error  messages  that<br>
   may  seem a little cryptic. The one that seems to<br>
   cause the most  confusion  is  "protocol  version<br>
   mismatch -- is your shell clean?".
</p>

<br>
<br>
<br>
<br>

<p>
   This  message  is  usually caused by your startup<br>
   scripts  or  remote  shell   facility   producing<br>
   unwanted  garbage  on  the  stream  that rsync is<br>
   using for its transport. The way to diagnose this<br>
   problem is to run your remote shell like this:
</p>

<br>
<br>
<br>
<br>

<p>
  ssh remotehost /bin/true &gt; out.dat
</p>

<br>
<br>
<br>
<br>

<p>
   then  look  at  out.dat. If everything is working<br>
   correctly then out.dat should be  a  zero  length<br>
   file.  If  you  are  getting the above error from<br>
   rsync then you will probably  find  that  out.dat<br>
   contains  some text or data. Look at the contents<br>
   and try to work out what  is  producing  it.  The<br>
   most common cause is incorrectly configured shell<br>
   startup scripts (such as .cshrc or .profile) that<br>
   contain  output  statements  for  non-interactive<br>
   logins.
</p>

<br>
<br>
<br>
<br>

<p>
   If you are having trouble debugging  filter  pat‐<br>
   terns,  then  try  specifying the -vv option.  At<br>
   this level of verbosity rsync will show why  each<br>
   individual file is included or excluded.
</p>

<br>
<br>
<br>

<p>
EXIT VALUES
</p>

<p>
   0      Success
</p>

<br>
<br>
<br>
<br>

<p>
   1      Syntax or usage error
</p>

<br>
<br>
<br>
<br>

<p>
   2      Protocol incompatibility
</p>

<br>
<br>
<br>
<br>

<p>
   3      Errors selecting input/output files, dirs
</p>

<br>
<br>
<br>
<br>

<p>
   4      Requested action not supported: an attempt
</p>

<br>

<p>
  was made to manipulate 64-bit files  on  a<br>
  platform  that  cannot support them; or an<br>
  option was specified that is supported  by<br>
  the client and not by the server.
</p>

<br>
<br>
<br>
<br>

<p>
   5      Error starting client-server protocol
</p>

<br>
<br>
<br>
<br>

<p>
   6      Daemon unable to append to log-file
</p>

<br>
<br>
<br>
<br>

<p>
   10     Error in socket I/O
</p>

<br>
<br>
<br>
<br>

<p>
   11     Error in file I/O
</p>

<br>
<br>
<br>
<br>

<p>
   12     Error in rsync protocol data stream
</p>

<br>
<br>
<br>
<br>

<p>
   13     Errors with program diagnostics
</p>

<br>
<br>
<br>
<br>

<p>
   14     Error in IPC code
</p>

<br>
<br>
<br>
<br>

<p>
   20     Received SIGUSR1 or SIGINT
</p>

<br>
<br>
<br>
<br>

<p>
   21     Some error returned by waitpid()
</p>

<br>
<br>
<br>
<br>

<p>
   22     Error allocating core memory buffers
</p>

<br>
<br>
<br>
<br>

<p>
   23     Partial transfer due to error
</p>

<br>
<br>
<br>
<br>

<p>
   24     Partial  transfer  due  to vanished source
</p>

<br>

<p>
  files
</p>

<br>
<br>
<br>
<br>

<p>
   25     The --max-delete limit stopped deletions
</p>

<br>
<br>
<br>
<br>

<p>
   30     Timeout in data send/receive
</p>

<br>
<br>
<br>
<br>

<p>
   35     Timeout waiting for daemon connection
</p>

<br>
<br>
<br>

<p>
ENVIRONMENT VARIABLES
</p>

<p>
   CVSIGNORE
</p>

<br>

<p>
  The CVSIGNORE environment variable supple‐<br>
  ments  any  ignore  patterns in .cvsignore<br>
  files. See the  --cvs-exclude  option  for<br>
  more details.
</p>

<br>
<br>
<br>
<br>

<p>
   RSYNC_ICONV
</p>

<br>

<p>
  Specify  a  default  --iconv setting using<br>
  this  environment  variable.  (First  sup‐<br>
  ported in 3.0.0.)
</p>

<br>
<br>
<br>
<br>

<p>
   RSYNC_PROTECT_ARGS
</p>

<br>

<p>
  Specify  a  non-zero  numeric value if you<br>
  want  the  --protect-args  option  to   be<br>
  enabled  by  default,  or  a zero value to<br>
  make sure that it is disabled by  default.<br>
  (First supported in 3.1.0.)
</p>

<br>
<br>
<br>
<br>

<p>
   RSYNC_RSH
</p>

<br>

<p>
  The  RSYNC_RSH environment variable allows<br>
  you to override the default shell used  as<br>
  the  transport  for  rsync.   Command line<br>
  options are permitted  after  the  command<br>
  name, just as in the -e option.
</p>

<br>
<br>
<br>
<br>

<p>
   RSYNC_PROXY
</p>

<br>

<p>
  The   RSYNC_PROXY   environment   variable<br>
  allows you to redirect your  rsync  client<br>
  to  use  a  web proxy when connecting to a<br>
  rsync daemon. You should  set  RSYNC_PROXY<br>
  to a hostname:port pair.
</p>

<br>
<br>
<br>
<br>

<p>
   RSYNC_PASSWORD
</p>

<br>

<p>
  Setting  RSYNC_PASSWORD  to  the  required<br>
  password allows you to  run  authenticated<br>
  rsync connections to an rsync daemon with‐<br>
  out user intervention. Note that this does<br>
  not  supply  a  password to a remote shell<br>
  transport such as ssh; to learn how to  do<br>
  that,  consult the remote shell’s documen‐<br>
  tation.
</p>

<br>
<br>
<br>
<br>

<p>
   USER or LOGNAME
</p>

<br>

<p>
  The USER or LOGNAME environment  variables<br>
  are used to determine the default username<br>
  sent to an rsync daemon.   If  neither  is<br>
  set, the username defaults to "nobody".
</p>

<br>
<br>
<br>
<br>

<p>
   HOME   The  HOME  environment variable is used to
</p>

<br>

<p>
  find the user’s default .cvsignore file.
</p>

<br>
<br>
<br>

<p>
FILES
</p>

<p>
   /etc/rsyncd.conf or rsyncd.conf
</p>

<br>
<br>
<br>

<p>
SEE ALSO
</p>

<p>
   rsyncd.conf(5)
</p>

<br>
<br>
<br>

<p>
BUGS
</p>

<p>
   times are transferred as *nix time_t values
</p>

<br>
<br>
<br>
<br>

<p>
   When transferring to FAT  filesystems  rsync  may<br>
   re-sync  unmodified  files.   See the comments on<br>
   the --modify-window option.
</p>

<br>
<br>
<br>
<br>

<p>
   file permissions, devices, etc.  are  transferred<br>
   as native numerical values
</p>

<br>
<br>
<br>
<br>

<p>
   see also the comments on the --delete option
</p>

<br>
<br>
<br>
<br>

<p>
   Please   report   bugs!   See  the  web  site  at<br>
   <a href="http://rsync.samba.org/" title="http://rsync.samba.org/" class="http">http://rsync.samba.org/</a>
</p>

<br>
<br>
<br>

<p>
VERSION
</p>

<p>
   This man page is current  for  version  3.1.2  of<br>
   rsync.
</p>

<br>
<br>
<br>

<p>
INTERNAL OPTIONS
</p>

<p>
   The options --server and --sender are used inter‐<br>
   nally by rsync, and should never be  typed  by  a<br>
   user  under normal circumstances.  Some awareness<br>
   of these options may be needed in certain scenar‐<br>
   ios,  such  as  when  setting up a login that can<br>
   only run an rsync  command.   For  instance,  the<br>
   support  directory  of the rsync distribution has<br>
   an example script named  rrsync  (for  restricted<br>
   rsync)  that  can  be  used with a restricted ssh<br>
   login.
</p>

<br>
<br>
<br>

<p>
CREDITS
</p>

<p>
   rsync is distributed under the GNU General Public<br>
   License.  See the file COPYING for details.
</p>

<br>
<br>
<br>
<br>

<p>
   A      WEB      site      is     available     at<br>
   <a href="http://rsync.samba.org/" title="http://rsync.samba.org/" class="http">http://rsync.samba.org/</a>.  The  site  includes  an<br>
   FAQ-O-Matic  which may cover questions unanswered<br>
   by this manual page.
</p>

<br>
<br>
<br>
<br>

<p>
   The   primary   ftp    site    for    rsync    is<br>
   <a href="ftp://rsync.samba.org/pub/rsync" title="ftp://rsync.samba.org/pub/rsync" class="ftp">ftp://rsync.samba.org/pub/rsync</a>.
</p>

<br>
<br>
<br>
<br>

<p>
   We  would  be  delighted  to hear from you if you<br>
   like this  program.   Please  contact  the  mail‐<br>
   ing-list at <a href="mailto:rsync@lists.samba.org" title="rsync@lists.samba.org" class="mailto">rsync@lists.samba.org</a>.
</p>

<br>
<br>
<br>
<br>

<p>
   This  program uses the excellent zlib compression<br>
   library written  by  Jean-loup  Gailly  and  Mark<br>
   Adler.
</p>

<br>
<br>
<br>

<p>
THANKS
</p>

<p>
   Special  thanks  go  out to: John Van Essen, Matt<br>
   McCutchen, Wesley W. Terpstra, David Dykstra, Jos<br>
   Backus,  Sebastian  Krahmer, Martin Pool, and our<br>
   gone-but-not-forgotten compadre, J.W. Schultz.
</p>

<br>
<br>
<br>
<br>

<p>
   Thanks also to  Richard  Brent,  Brendan  Mackay,<br>
   Bill  Waite,  Stephen  Rothwell  and  David Bell.<br>
   I’ve probably missed some people, my apologies if<br>
   I have.
</p>

<br>
<br>
<br>

<p>
AUTHOR
</p>

<p>
   rsync  was  originally written by Andrew Tridgell<br>
   and Paul Mackerras.  Many people have later  con‐<br>
   tributed  to  it.   It is currently maintained by<br>
   Wayne Davison.
</p>

<br>
<br>
<br>
<br>

<p>
   Mailing lists for  support  and  development  are<br>
   available at <a href="http://lists.samba.org" title="http://lists.samba.org" class="http">http://lists.samba.org</a>
</p>

<br>
<br>
<br>

<p>
&lt;div style='padding-left: 150pt'&gt;<br>
   21 Dec 2015              rsync(1)
</p>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>



<!-- End wiki content -->

</body>

</html>
